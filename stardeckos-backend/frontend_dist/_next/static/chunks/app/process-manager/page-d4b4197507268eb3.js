(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1242],{4927:(e,t,s)=>{Promise.resolve().then(s.bind(s,77894))},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},20562:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},26983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},33789:(e,t,s)=>{"use strict";s.d(t,{p:()=>c});var a=s(95155);s(12115);var r=s(25016);function c(e){let{className:t,type:s,...c}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...c})}},77894:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(95155),r=s(12115),c=s(20063),l=s(6707),n=s(83209),o=s(97003),d=s(33789),i=s(22312),m=s(50906),x=s(93341),u=s(20562),h=s(71847);let p=(0,h.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var f=s(6132),b=s(95707);let j=(0,h.A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var g=s(85710),N=s(26983),v=s(75159),y=s(89559),w=s(86651),k=s(78874);function A(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB","TB"][t]}function _(e){let{value:t,max:s,color:r,showLabel:c=!1}=e,l=s>0?Math.min(t/s*100,100):0;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(r," transition-all duration-500"),style:{width:"".concat(l,"%")}})}),c&&(0,a.jsxs)("span",{className:"text-xs font-mono w-12 text-right",children:[l.toFixed(0),"%"]})]})}function C(){var e,t,s,h,C;let{isAuthenticated:M,isLoading:S,token:E,user:F}=(0,l.A)(),Z=(0,c.useRouter)(),[B,L]=(0,r.useState)(""),P=(null==F?void 0:F.role)==="admin"||(null==F?void 0:F.role)==="operator"||(null==F?void 0:F.is_pam_admin),[R,T]=(0,r.useState)([]),[z,I]=(0,r.useState)(null),[U,W]=(0,r.useState)(""),[D,q]=(0,r.useState)("cpu"),[O,G]=(0,r.useState)("desc"),[K,V]=(0,r.useState)(null),[$,H]=(0,r.useState)(!1),Y=(0,r.useCallback)(async()=>{if(E)try{let[e,t]=await Promise.all([fetch("/api/processes",{headers:{Authorization:"Bearer ".concat(E)}}),fetch("/api/system/resources",{headers:{Authorization:"Bearer ".concat(E)}})]);if(!e.ok)throw Error("Failed to fetch processes");let s=await e.json();if(T(Array.isArray(s)?s:[]),t.ok){let e=await t.json();I(e)}V(null)}catch(e){V(e instanceof Error?e.message:"Failed to load data")}},[E]),J=async()=>{H(!0),await Y(),setTimeout(()=>H(!1),500)};if((0,r.useEffect)(()=>{S||M?S||!M||P||Z.push("/dashboard"):Z.push("/login")},[M,S,P,Z]),(0,r.useEffect)(()=>{let e=()=>{L(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,r.useEffect)(()=>{if(M&&E){Y();let e=setInterval(Y,3e3);return()=>clearInterval(e)}},[M,E,Y]),S||!M||!P)return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-12 h-12 text-accent animate-pulse"})});let Q=e=>{D===e?G("asc"===O?"desc":"asc"):(q(e),G("pid"===e?"asc":"desc"))},X=e=>D!==e?(0,a.jsx)(x.A,{className:"w-3 h-3 ml-1 opacity-30"}):"asc"===O?(0,a.jsx)(u.A,{className:"w-3 h-3 ml-1 text-accent"}):(0,a.jsx)(p,{className:"w-3 h-3 ml-1 text-accent"}),ee=R.filter(e=>e.command.toLowerCase().includes(U.toLowerCase())||e.name.toLowerCase().includes(U.toLowerCase())||e.user.toLowerCase().includes(U.toLowerCase())||e.pid.toString().includes(U)).sort((e,t)=>{let s="asc"===O?1:-1;switch(D){case"cpu":return(t.cpu_percent-e.cpu_percent)*s;case"memory":return(t.memory_mb-e.memory_mb)*s;case"pid":return(e.pid-t.pid)*s;case"name":return e.name.localeCompare(t.name)*s;case"user":return e.user.localeCompare(t.user)*s;case"state":return e.state.localeCompare(t.state)*s;default:return 0}}),et=R.filter(e=>"R"===e.state).length,es=R.filter(e=>"S"===e.state).length,ea=R.filter(e=>"Z"===e.state).length,er=null!=(e=null==z?void 0:z.cpu.cores)?e:0,ec=null!=(t=null==z?void 0:z.cpu.usage_percent)?t:0,el=null!=(s=null==z?void 0:z.memory.total)?s:0,en=null!=(h=null==z?void 0:z.memory.used)?h:0,eo=el>0?en/el*100:0,ed=null==z?void 0:z.load_avg,ei=null!=(C=null==z?void 0:z.uptime)?C:0,em=async(e,t)=>{if(confirm("Kill process ".concat(t," (PID: ").concat(e,")?")))try{let t=await fetch("/api/processes/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(E)}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to kill process")}await Y()}catch(e){alert(e instanceof Error?e.message:"Failed to kill process")}};return(0,a.jsx)(i.N,{title:"PROCESS MANAGER",time:B,children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[K&&(0,a.jsxs)("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg text-destructive text-sm flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),K]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,a.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(n.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 text-chart-3"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:er})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"CPU Cores"})]})}),(0,a.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(n.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(j,{className:"w-4 h-4 text-chart-3"}),(0,a.jsxs)("span",{className:"text-2xl font-bold",children:[ec.toFixed(1),"%"]})]}),(0,a.jsx)(_,{value:ec,max:100,color:"bg-chart-3"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"CPU Usage"})]})}),(0,a.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(n.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-chart-4"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:A(el)})]}),(0,a.jsx)(_,{value:en,max:el,color:"bg-chart-4"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[A(en)," used (",eo.toFixed(0),"%)"]})]})}),(0,a.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(n.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-chart-2"}),(0,a.jsx)("span",{className:"text-lg font-bold font-mono",children:ed?"".concat(ed.load_1.toFixed(2)):"—"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Load: ",ed?"".concat(ed.load_1.toFixed(2)," / ").concat(ed.load_5.toFixed(2)," / ").concat(ed.load_15.toFixed(2)):"—"]})]})}),(0,a.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(n.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 text-primary"}),(0,a.jsx)("span",{className:"text-lg font-bold",children:function(e){let t=Math.floor(e/86400),s=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return t>0?"".concat(t,"d ").concat(s,"h ").concat(a,"m"):s>0?"".concat(s,"h ").concat(a,"m"):"".concat(a,"m")}(ei)})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"System Uptime"})]})}),(0,a.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(n.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 text-accent"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:R.length})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:"text-primary",children:[et,"R"]})," / ",(0,a.jsxs)("span",{className:"text-muted-foreground",children:[es,"S"]}),ea>0&&(0,a.jsxs)("span",{className:"text-destructive",children:[" / ",ea,"Z"]})]})]})})]}),(0,a.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsxs)(n.aR,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"w-5 h-5 text-accent"}),"Process List"]}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:J,className:"h-8 w-8 p-0",children:(0,a.jsx)(y.A,{className:"w-4 h-4 ".concat($?"animate-spin":"")})})]}),(0,a.jsx)("div",{className:"flex gap-2 w-full md:w-auto",children:(0,a.jsxs)("div",{className:"relative flex-1 md:w-72",children:[(0,a.jsx)(w.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(d.p,{placeholder:"Search by name, command, user, or PID...",value:U,onChange:e=>W(e.target.value),className:"pl-10 bg-input/80 border-border/60"})]})})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",ee.length," of ",R.length," processes",U&&' matching "'.concat(U,'"')]})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border/50",children:[(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground",children:(0,a.jsxs)("button",{onClick:()=>Q("pid"),className:"flex items-center hover:text-accent transition-colors",children:["PID ",X("pid")]})}),(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground",children:(0,a.jsxs)("button",{onClick:()=>Q("name"),className:"flex items-center hover:text-accent transition-colors",children:["NAME ",X("name")]})}),(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground",children:(0,a.jsxs)("button",{onClick:()=>Q("user"),className:"flex items-center hover:text-accent transition-colors",children:["USER ",X("user")]})}),(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground min-w-[140px]",children:(0,a.jsxs)("button",{onClick:()=>Q("cpu"),className:"flex items-center hover:text-accent transition-colors",children:["CPU % ",X("cpu")]})}),(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground min-w-[140px]",children:(0,a.jsxs)("button",{onClick:()=>Q("memory"),className:"flex items-center hover:text-accent transition-colors",children:["MEMORY ",X("memory")]})}),(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground",children:(0,a.jsxs)("button",{onClick:()=>Q("state"),className:"flex items-center hover:text-accent transition-colors",children:["STATE ",X("state")]})}),(0,a.jsx)("th",{className:"text-left py-3 px-3 text-xs font-medium text-muted-foreground max-w-xs",children:"COMMAND"}),(0,a.jsx)("th",{className:"text-right py-3 px-3 text-xs font-medium text-muted-foreground",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:ee.slice(0,100).map(e=>(0,a.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors group",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-mono text-sm",children:e.pid}),(0,a.jsx)("td",{className:"py-2 px-3 text-sm font-medium",children:e.name}),(0,a.jsx)("td",{className:"py-2 px-3 text-sm text-muted-foreground",children:e.user}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all duration-300 ".concat(e.cpu_percent>50?"bg-destructive":e.cpu_percent>20?"bg-chart-2":"bg-chart-3"),style:{width:"".concat(Math.min(e.cpu_percent,100),"%")}})}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(e.cpu_percent>50?"text-destructive":e.cpu_percent>20?"text-chart-2":""),children:e.cpu_percent.toFixed(1)})]})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all duration-300 ".concat(e.memory_mb>500?"bg-destructive":e.memory_mb>200?"bg-chart-2":"bg-chart-4"),style:{width:"".concat(Math.min(e.memory_mb/1024*100,100),"%")}})}),(0,a.jsx)("span",{className:"font-mono text-sm ".concat(e.memory_mb>500?"text-destructive":e.memory_mb>200?"text-chart-2":""),children:e.memory_mb>=1024?"".concat((e.memory_mb/1024).toFixed(1),"G"):"".concat(e.memory_mb.toFixed(0),"M")})]})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded text-xs font-bold ".concat("R"===e.state?"bg-primary/20 text-primary":"S"===e.state?"bg-muted text-muted-foreground":"D"===e.state?"bg-chart-2/20 text-chart-2":"Z"===e.state?"bg-destructive/20 text-destructive":"T"===e.state?"bg-chart-5/20 text-chart-5":"bg-muted"),children:e.state})}),(0,a.jsx)("td",{className:"py-2 px-3 font-mono text-xs text-muted-foreground max-w-xs truncate",title:e.command,children:e.command}),(0,a.jsx)("td",{className:"py-2 px-3 text-right",children:(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>em(e.pid,e.name),className:"opacity-0 group-hover:opacity-100 text-destructive hover:text-destructive hover:bg-destructive/10 transition-all h-7 w-7 p-0",children:(0,a.jsx)(k.A,{className:"w-4 h-4"})})})]},e.pid))})]}),ee.length>100&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center py-4",children:"Showing first 100 processes. Use search to find specific processes."})]})})]})]})})}},78874:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},83209:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>n,Zp:()=>c,aR:()=>l});var a=s(95155);s(12115);var r=s(25016);function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},86651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},89559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},93341:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])}},e=>{e.O(0,[110,6263,7924,2940,2312,8441,1255,7358],()=>e(e.s=4927)),_N_E=e.O()}]);