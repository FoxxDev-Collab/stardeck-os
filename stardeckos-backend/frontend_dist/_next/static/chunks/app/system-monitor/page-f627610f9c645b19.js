(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3617],{37721:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var l=t(95155),r=t(12115),a=t(20063),d=t(6707),n=t(83209),c=t(22312),o=t(50906),i=t(95707),m=t(85710),x=t(14639),u=t(20523),h=t(89559);function f(e){if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(1))+" "+["B","KB","MB","GB","TB"][s]}function j(e){if(0===e)return"0 B/s";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(1))+" "+["B/s","KB/s","MB/s","GB/s"][s]}function N(){var e,s,t,N,g,b,v,p,w,y,k,M;let{isAuthenticated:_,isLoading:B,token:A,user:Z}=(0,d.A)(),F=(0,a.useRouter)(),[R,S]=(0,r.useState)(""),[C,E]=(0,r.useState)(null),[U,W]=(0,r.useState)(null),[I,P]=(0,r.useState)(!0),[T,O]=(0,r.useState)(null),D=(0,r.useRef)(null),[L,K]=(0,r.useState)({recv:0,sent:0}),G=(null==Z?void 0:Z.role)==="admin"||(null==Z?void 0:Z.role)==="operator"||(null==Z?void 0:Z.is_pam_admin),H=(0,r.useCallback)(async()=>{if(A)try{let e={Authorization:"Bearer ".concat(A)},[s,t]=await Promise.all([fetch("/api/system/info",{headers:e}),fetch("/api/system/resources",{headers:e})]);if(!s.ok||!t.ok)throw Error("Failed to fetch system data");let[l,r]=await Promise.all([s.json(),t.json()]);E(l),W(r),O(null);let a=Date.now();if(D.current){let e=(a-D.current.time)/1e3;if(e>0){let s=(r.network.bytes_recv-D.current.recv)/e,t=(r.network.bytes_sent-D.current.sent)/e;K({recv:Math.max(0,s),sent:Math.max(0,t)})}}D.current={recv:r.network.bytes_recv,sent:r.network.bytes_sent,time:a}}catch(e){O(e instanceof Error?e.message:"Failed to load data")}finally{P(!1)}},[A]);if((0,r.useEffect)(()=>{B||_?B||!_||G||F.push("/dashboard"):F.push("/login")},[_,B,G,F]),(0,r.useEffect)(()=>{let e=()=>{S(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[]),(0,r.useEffect)(()=>{if(_&&A){H();let e=setInterval(H,2e3);return()=>clearInterval(e)}},[_,A,H]),B||!_||!G)return(0,l.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,l.jsx)(o.A,{className:"w-12 h-12 text-accent animate-pulse"})});let q=null!=(e=null==U?void 0:U.cpu.usage_percent)?e:0,z=null!=(s=null==U?void 0:U.cpu.per_core)?s:[],Y=null!=(t=null==U?void 0:U.memory.used)?t:0,J=null!=(N=null==U?void 0:U.memory.total)?N:1,Q=null!=(g=null==U?void 0:U.memory.cached)?g:0,V=null!=(b=null==U?void 0:U.disk.used)?b:0,X=null!=(v=null==U?void 0:U.disk.total)?v:1,$=null!=(p=null==U?void 0:U.uptime)?p:0;return(0,l.jsx)(c.N,{title:"SYSTEM MONITOR",time:R,children:(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[T&&(0,l.jsx)("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg text-destructive text-sm",children:T}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"CPU Usage"}),(0,l.jsx)(i.A,{className:"w-4 h-4 text-chart-3"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("div",{className:"text-3xl font-bold",children:[q.toFixed(1),"%"]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[null!=(w=null==U?void 0:U.cpu.cores)?w:0," cores"]}),(0,l.jsx)("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-chart-3 transition-all duration-300",style:{width:"".concat(Math.min(q,100),"%")}})})]})]}),(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Memory Usage"}),(0,l.jsx)(m.A,{className:"w-4 h-4 text-chart-4"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("div",{className:"text-3xl font-bold",children:[(Y/J*100).toFixed(1),"%"]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[f(Y)," / ",f(J)]}),(0,l.jsx)("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-chart-4 transition-all duration-300",style:{width:"".concat(Y/J*100,"%")}})})]})]}),(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Network I/O"}),(0,l.jsx)(x.A,{className:"w-4 h-4 text-accent"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold font-mono",children:j(L.recv+L.sent)}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["↑ ",j(L.sent)," ↓ ",j(L.recv)]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Total: ",f(null!=(y=null==U?void 0:U.network.bytes_recv)?y:0)," / ",f(null!=(k=null==U?void 0:U.network.bytes_sent)?k:0)]})]})]}),(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Disk Usage"}),(0,l.jsx)(u.A,{className:"w-4 h-4 text-chart-5"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("div",{className:"text-3xl font-bold",children:[(V/X*100).toFixed(1),"%"]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[f(V)," / ",f(X)]}),(0,l.jsx)("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-chart-5 transition-all duration-300",style:{width:"".concat(V/X*100,"%")}})})]})]})]}),(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(i.A,{className:"w-5 h-5 text-chart-3"}),"CPU Cores",I&&(0,l.jsx)(h.A,{className:"w-4 h-4 text-muted-foreground animate-spin ml-auto"})]})}),(0,l.jsx)(n.Wu,{children:z.length>0?(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:z.map((e,s)=>(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-muted-foreground",children:["Core ",s]}),(0,l.jsxs)("span",{className:"font-mono text-foreground",children:[e.toFixed(1),"%"]})]}),(0,l.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-chart-3 transition-all duration-300",style:{width:"".concat(Math.min(e,100),"%")}})})]},s))}):(0,l.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,l.jsx)(o.A,{className:"w-8 h-8 text-accent animate-pulse"})})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(o.A,{className:"w-5 h-5 text-accent"}),"System Information"]})}),(0,l.jsx)(n.Wu,{children:C?(0,l.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Hostname"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:C.hostname})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"OS"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:C.os})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Kernel"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:C.kernel})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Architecture"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:C.architecture})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"IP Address"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:C.ip})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Uptime"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:function(e){let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),l=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(t,"h ").concat(l,"m"):t>0?"".concat(t,"h ").concat(l,"m"):"".concat(l,"m")}($)})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Load Average"}),(0,l.jsxs)("dd",{className:"font-mono text-foreground",children:[null==U?void 0:U.load_avg.load_1.toFixed(2),", ",null==U?void 0:U.load_avg.load_5.toFixed(2),", ",null==U?void 0:U.load_avg.load_15.toFixed(2)]})]})]}):(0,l.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,l.jsx)(o.A,{className:"w-8 h-8 text-accent animate-pulse"})})})]}),(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(m.A,{className:"w-5 h-5 text-chart-4"}),"Memory Details"]})}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Total Memory"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:f(J)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Used Memory"}),(0,l.jsx)("dd",{className:"font-mono text-chart-4",children:f(Y)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Available"}),(0,l.jsx)("dd",{className:"font-mono text-primary",children:f(null!=(M=null==U?void 0:U.memory.available)?M:0)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Cached"}),(0,l.jsx)("dd",{className:"font-mono text-foreground",children:f(Q)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("dt",{className:"text-muted-foreground",children:"Usage"}),(0,l.jsxs)("dd",{className:"font-mono text-foreground",children:[(Y/J*100).toFixed(1),"%"]})]})]}),(0,l.jsx)("div",{className:"mt-4 h-3 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-chart-4 transition-all duration-300",style:{width:"".concat(Y/J*100,"%")}})})]})]})]}),(null==C?void 0:C.cpu_model)&&(0,l.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(i.A,{className:"w-5 h-5 text-chart-3"}),"Processor"]})}),(0,l.jsx)(n.Wu,{children:(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("p",{className:"font-mono text-foreground",children:C.cpu_model}),(0,l.jsxs)("p",{className:"text-muted-foreground mt-1",children:[C.cpu_cores," cores • Current usage: ",q.toFixed(1),"%"]})]})})]})]})})}},72632:(e,s,t)=>{Promise.resolve().then(t.bind(t,37721))},83209:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>a,aR:()=>d});var l=t(95155);t(12115);var r=t(25016);function a(e){let{className:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function n(e){let{className:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function o(e){let{className:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}},89559:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[110,6263,7924,2940,2312,8441,1255,7358],()=>e(e.s=72632)),_N_E=e.O()}]);