(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4446],{33789:(e,s,a)=>{"use strict";a.d(s,{p:()=>c});var t=a(95155);a(12115);var r=a(25016);function c(e){let{className:s,type:a,...c}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...c})}},45246:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>D});var t=a(95155),r=a(12115),c=a(20063),l=a(6707),n=a(83209),i=a(97003),d=a(33789),o=a(90235),m=a(90923),x=a(22312),h=a(89559),p=a(35299),u=a(39867),g=a(26617),j=a(17910),N=a(61362),f=a(78874),b=a(6132),v=a(65229),w=a(34172),y=a(5917),k=a(54485),A=a(52987),S=a(20523),C=a(23327),z=a(26983),R=a(86651),E=a(6191),B=a(11010),P=a(71360),$=a(16140),_=a(89715),U=a(85843),F=a(39068),Z=a(93499);function D(){let{isAuthenticated:e,isLoading:s,token:a,user:D}=(0,l.A)(),I=(0,c.useRouter)(),[W,G]=(0,r.useState)(""),L=(null==D?void 0:D.role)==="admin"||(null==D?void 0:D.role)==="operator"||(null==D?void 0:D.is_pam_admin),[M,J]=(0,r.useState)([]),[T,O]=(0,r.useState)([]),[V,K]=(0,r.useState)(new Set),[X,H]=(0,r.useState)(""),[Y,q]=(0,r.useState)([]),[Q,ee]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(new Set),[et,er]=(0,r.useState)([]),[ec,el]=(0,r.useState)(!1),[en,ei]=(0,r.useState)(null),[ed,eo]=(0,r.useState)({id:"",name:"",baseurl:"",enabled:!0,gpgcheck:!0}),[em,ex]=(0,r.useState)(null),[eh,ep]=(0,r.useState)("updates"),[eu,eg]=(0,r.useState)(!1),[ej,eN]=(0,r.useState)(null),[ef,eb]=(0,r.useState)(""),[ev,ew]=(0,r.useState)(0),[ey,ek]=(0,r.useState)([]),[eA,eS]=(0,r.useState)(!1),[eC,ez]=(0,r.useState)(!1),[eR,eE]=(0,r.useState)(""),eB=(0,r.useRef)(null),eP=(0,r.useRef)(null),[e$,e_]=(0,r.useState)(!1),[eU,eF]=(0,r.useState)(null),[eZ,eD]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s||e?s||!e||L||I.push("/dashboard"):I.push("/login")},[e,s,L,I]),(0,r.useEffect)(()=>{let e=()=>{G(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[]),(0,r.useEffect)(()=>{e&&a&&("updates"===eh?(eG(),eL()):"repositories"===eh&&eO())},[e,a,eh]),(0,r.useEffect)(()=>{eB.current&&(eB.current.scrollTop=eB.current.scrollHeight)},[ey]);let eI=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!a||!e)return;eg(!0),eN(e),eb("starting"),ew(0),ek([]),eS(!1),ez(!1),eE("");let t="3000"===window.location.port,r=t?"ws:":"https:"===window.location.protocol?"wss:":"ws:",c=t?"".concat(window.location.hostname,":8080"):window.location.host,l=new WebSocket("".concat(r,"//").concat(c,"/api/packages/ws?token=").concat(encodeURIComponent(a)));eP.current=l,l.onopen=()=>{l.send(JSON.stringify({operation:e,packages:s}))},l.onmessage=e=>{try{let s=JSON.parse(e.data);s.phase&&eb(s.phase),void 0!==s.progress&&ew(s.progress),"output"===s.type||"status"===s.type?ek(e=>[...e,s.message]):"complete"===s.type?(eS(!0),ez(s.success||!1),eE(s.message),ew(100)):"error"===s.type&&(ek(e=>[...e,"ERROR: ".concat(s.message)]),eS(!0),ez(!1),eE(s.message))}catch(e){console.error("Failed to parse WebSocket message:",e)}},l.onerror=e=>{console.error("WebSocket error:",e),ek(e=>[...e,"WebSocket connection error"]),eS(!0),ez(!1),eE("Connection error")},l.onclose=()=>{eP.current=null}},eW=()=>{eP.current&&eP.current.close(),eg(!1),eN(null),ek([]),eA&&eC&&(eG(),eL(),K(new Set),ea(new Set))},eG=(0,r.useCallback)(async()=>{if(a)try{let e=await fetch("/api/updates/available",{headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok)throw Error("Failed to fetch updates");let s=await e.json();J(s||[])}catch(e){ex("Failed to fetch updates"),console.error(e)}},[a]),eL=(0,r.useCallback)(async()=>{if(a)try{let e=await fetch("/api/updates/history",{headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok)throw Error("Failed to fetch history");let s=await e.json();O(s||[])}catch(e){console.error(e)}},[a]),eM=async()=>{if(a&&X.trim()){ee(!0),ex(null);try{let e=await fetch("/api/packages/search?q=".concat(encodeURIComponent(X)),{headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok)throw Error("Failed to search packages");let s=await e.json();q(s||[])}catch(e){ex("Failed to search packages"),console.error(e)}finally{ee(!1)}}},eJ=async e=>{if(a){eD(!0),e_(!0),eF(null);try{let s=await fetch("/api/packages/".concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok)throw Error("Failed to fetch package details");let t=await s.json();eF(t)}catch(s){console.error(s),eF({name:e,arch:"",summary:"Failed to load package details"})}finally{eD(!1)}}},eT=e=>{if(!e||0===e)return"N/A";let s=["B","KB","MB","GB"],a=0,t=e;for(;t>=1024&&a<s.length-1;)t/=1024,a++;return"".concat(t.toFixed(1)," ").concat(s[a])},eO=(0,r.useCallback)(async()=>{if(a)try{let e=await fetch("/api/repositories",{headers:{Authorization:"Bearer ".concat(a)}});if(!e.ok)throw Error("Failed to fetch repositories");let s=await e.json();er(s||[])}catch(e){ex("Failed to fetch repositories"),console.error(e)}},[a]),eV=async()=>{if(a){ex(null);try{if(!(await fetch(en?"/api/repositories/".concat(en):"/api/repositories",{method:en?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(ed)})).ok)throw Error("Failed to save repository");el(!1),ei(null),eo({id:"",name:"",baseurl:"",enabled:!0,gpgcheck:!0}),eO()}catch(e){ex("Failed to save repository"),console.error(e)}}},eK=async e=>{if(a&&confirm("Delete repository ".concat(e,"?")))try{if(!(await fetch("/api/repositories/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}})).ok)throw Error("Failed to delete repository");eO()}catch(e){ex("Failed to delete repository"),console.error(e)}};if(s||!e||!L)return(0,t.jsx)(x.N,{title:"RPM Manager",time:W,children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(h.A,{className:"w-8 h-8 animate-spin text-accent"})})});let eX=M.filter(e=>e.security_update).length,eH=M.length;return(0,t.jsxs)(x.N,{title:"RPM MANAGER",time:W,children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[em&&(0,t.jsxs)("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg text-destructive text-sm flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"w-4 h-4"}),em,(0,t.jsx)(i.$,{variant:"ghost",size:"sm",className:"ml-auto h-6 w-6 p-0",onClick:()=>ex(null),children:(0,t.jsx)(v.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)(m.tU,{value:eh,onValueChange:ep,className:"w-full",children:[(0,t.jsxs)(m.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(m.Xi,{value:"updates",className:"gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Updates",eH>0&&(0,t.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-accent/20 text-accent rounded-full",children:eH})]}),(0,t.jsxs)(m.Xi,{value:"packages",className:"gap-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4"}),"Packages"]}),(0,t.jsxs)(m.Xi,{value:"repositories",className:"gap-2",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"}),"Repositories"]})]}),(0,t.jsxs)(m.av,{value:"updates",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsxs)(n.Wu,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 text-accent"}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:eH})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available Updates"})]})}),(0,t.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsxs)(n.Wu,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(j.A,{className:"w-4 h-4 text-orange-500"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-500",children:eX})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Security Patches"})]})}),(0,t.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsxs)(n.Wu,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:V.size})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selected"})]})}),(0,t.jsx)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsxs)(n.Wu,{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(k.A,{className:"w-4 h-4 text-chart-4"}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:T.length})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Transactions"})]})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(i.$,{onClick:()=>{eI("update",V.size>0?Array.from(V):[])},disabled:0===eH,className:"gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),V.size>0?"Update Selected (".concat(V.size,")"):"Update All"]}),(0,t.jsxs)(i.$,{onClick:()=>{eI("refresh")},variant:"outline",className:"gap-2",children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),"Refresh Metadata"]}),M.length>0&&(0,t.jsxs)(i.$,{onClick:()=>{V.size===M.length?K(new Set):K(new Set(M.map(e=>e.name)))},variant:"ghost",className:"gap-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4"}),V.size===M.length?"Deselect All":"Select All"]})]}),(0,t.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.aR,{className:"pb-3",children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-5 h-5 text-accent"}),"Available Updates"]})}),(0,t.jsx)(n.Wu,{children:0===eH?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(N.A,{className:"w-16 h-16 mx-auto mb-4 text-green-500/50"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"System is up to date"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"No updates available"})]}):(0,t.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:M.map(e=>(0,t.jsx)("div",{className:"p-4 border rounded-lg transition-all ".concat(V.has(e.name)?"border-accent bg-accent/10":"border-border/40 hover:border-accent/50"),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:V.has(e.name),onChange:()=>(e=>{let s=new Set(V);s.has(e)?s.delete(e):s.add(e),K(s)})(e.name),className:"w-4 h-4 accent-accent mt-1 cursor-pointer"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-medium hover:text-accent cursor-pointer",onClick:()=>eJ(e.name),children:e.name}),e.security_update&&(0,t.jsxs)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-0.5 rounded flex items-center gap-1",children:[(0,t.jsx)(j.A,{className:"w-3 h-3"}),"SECURITY"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:e.current_version}),(0,t.jsx)(A.A,{className:"w-3 h-3 text-accent"}),(0,t.jsx)("span",{className:"font-mono text-xs bg-accent/20 text-accent px-2 py-1 rounded",children:e.new_version})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.A,{className:"w-3 h-3"}),e.repository]}),e.size&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.A,{className:"w-3 h-3"}),e.size]})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),eJ(e.name)},className:"h-8 w-8 p-0",title:"View details",children:(0,t.jsx)(C.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),eI("update",[e.name])},className:"h-8 w-8 p-0 text-accent hover:text-accent",title:"Update this package",children:(0,t.jsx)(u.A,{className:"w-4 h-4"})})]})]})},e.name))})})]}),(0,t.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.aR,{className:"pb-3",children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"w-5 h-5 text-accent"}),"Update History"]})}),(0,t.jsx)(n.Wu,{children:0===T.length?(0,t.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No update history"}):(0,t.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:T.slice(0,20).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border/40 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:(0,t.jsx)(z.A,{className:"w-4 h-4 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.action}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.date).toLocaleString()})]})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-mono",children:e.package_count}),(0,t.jsx)("span",{className:"text-muted-foreground ml-1",children:"packages"})]})]},e.id))})})]})]}),(0,t.jsx)(m.av,{value:"packages",className:"space-y-6",children:(0,t.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.aR,{className:"pb-3",children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(R.A,{className:"w-5 h-5 text-accent"}),"Search Packages"]})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(R.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(d.p,{placeholder:"Search for packages (e.g., nginx, vim, docker)...",value:X,onChange:e=>H(e.target.value),onKeyDown:e=>"Enter"===e.key&&eM(),className:"pl-10"})]}),(0,t.jsxs)(i.$,{onClick:eM,disabled:Q||!X.trim(),className:"gap-2",children:[Q?(0,t.jsx)(p.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(R.A,{className:"w-4 h-4"}),"Search"]})]}),es.size>0&&(0,t.jsxs)(i.$,{onClick:()=>{0!==es.size&&eI("install",Array.from(es))},className:"w-full gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Install Selected (",es.size,")"]}),Y.length>0&&(0,t.jsx)("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:Y.map(e=>(0,t.jsx)("div",{className:"p-4 border rounded-lg transition-all ".concat(es.has(e.name)?"border-accent bg-accent/10":"border-border/40 hover:border-accent/50"),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:es.has(e.name),onChange:()=>(e=>{let s=new Set(es);s.has(e)?s.delete(e):s.add(e),ea(s)})(e.name),className:"w-4 h-4 accent-accent mt-1 cursor-pointer"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-medium hover:text-accent cursor-pointer",onClick:()=>eJ(e.name),children:e.name}),e.arch&&(0,t.jsx)("span",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:e.arch}),e.version&&(0,t.jsx)("span",{className:"text-xs font-mono text-muted-foreground",children:e.version})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.summary}),e.repository&&(0,t.jsx)("div",{className:"flex items-center gap-4 mt-2",children:(0,t.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(w.A,{className:"w-3 h-3"}),e.repository]})})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),eJ(e.name)},className:"h-8 w-8 p-0",title:"View details",children:(0,t.jsx)(C.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.$,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),eI("install",[e.name])},className:"h-8 w-8 p-0 text-green-500 hover:text-green-400",title:"Install package",children:(0,t.jsx)(u.A,{className:"w-4 h-4"})})]})]})},"".concat(e.name,"-").concat(e.arch)))}),0===Y.length&&X&&!Q&&(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,t.jsx)(g.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsxs)("p",{children:['No packages found matching "',X,'"']})]}),!X&&(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,t.jsx)(R.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"Enter a package name to search"})]})]})]})}),(0,t.jsxs)(m.av,{value:"repositories",className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(i.$,{onClick:()=>{el(!0),ei(null),eo({id:"",name:"",baseurl:"",enabled:!0,gpgcheck:!0})},className:"gap-2",children:[(0,t.jsx)(E.A,{className:"w-4 h-4"}),"Add Repository"]})}),ec&&(0,t.jsxs)(n.Zp,{className:"border-accent/50 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.aR,{className:"pb-3",children:(0,t.jsx)(n.ZB,{children:en?"Edit Repository":"Add Repository"})}),(0,t.jsxs)(n.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"Repository ID"}),(0,t.jsx)(d.p,{value:ed.id,onChange:e=>eo({...ed,id:e.target.value}),placeholder:"my-repo",disabled:!!en})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"Name"}),(0,t.jsx)(d.p,{value:ed.name,onChange:e=>eo({...ed,name:e.target.value}),placeholder:"My Repository"})]}),(0,t.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,t.jsx)(o.J,{children:"Base URL"}),(0,t.jsx)(d.p,{value:ed.baseurl||"",onChange:e=>eo({...ed,baseurl:e.target.value}),placeholder:"https://example.com/repo/$releasever/$basearch"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"Mirror List (optional)"}),(0,t.jsx)(d.p,{value:ed.mirrorlist||"",onChange:e=>eo({...ed,mirrorlist:e.target.value}),placeholder:"https://example.com/mirrorlist"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{children:"GPG Key (optional)"}),(0,t.jsx)(d.p,{value:ed.gpgkey||"",onChange:e=>eo({...ed,gpgkey:e.target.value}),placeholder:"https://example.com/RPM-GPG-KEY"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:ed.enabled,onChange:e=>eo({...ed,enabled:e.target.checked}),className:"w-4 h-4 accent-accent"}),(0,t.jsx)("span",{children:"Enabled"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:ed.gpgcheck,onChange:e=>eo({...ed,gpgcheck:e.target.checked}),className:"w-4 h-4 accent-accent"}),(0,t.jsx)("span",{children:"GPG Check"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.$,{onClick:eV,className:"gap-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4"}),"Save Repository"]}),(0,t.jsx)(i.$,{variant:"outline",onClick:()=>{el(!1),ei(null)},children:"Cancel"})]})]})]}),(0,t.jsxs)(n.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.aR,{className:"pb-3",children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"w-5 h-5 text-accent"}),"Configured Repositories"]})}),(0,t.jsx)(n.Wu,{children:0===et.length?(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,t.jsx)(w.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No repositories configured"})]}):(0,t.jsx)("div",{className:"space-y-2",children:et.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-border/40 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name||e.id}),e.enabled?(0,t.jsx)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-0.5 rounded",children:"ENABLED"}):(0,t.jsx)("span",{className:"text-xs bg-muted text-muted-foreground px-2 py-0.5 rounded",children:"DISABLED"}),e.gpgcheck&&(0,t.jsxs)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded flex items-center gap-1",children:[(0,t.jsx)(j.A,{className:"w-3 h-3"}),"GPG"]})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:e.id}),(e.baseurl||e.mirrorlist||e.metalink)&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1 truncate max-w-md",children:e.baseurl||e.mirrorlist||e.metalink})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>{eo(e),ei(e.id),el(!0)},children:(0,t.jsx)(B.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.$,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive",onClick:()=>eK(e.id),children:(0,t.jsx)(P.A,{className:"w-4 h-4"})})]})]},e.id))})})]})]})]})]}),eu&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"starting":case"checking":default:return(0,t.jsx)(p.A,{className:"w-5 h-5 animate-spin"});case"downloading":return(0,t.jsx)(u.A,{className:"w-5 h-5 animate-pulse"});case"installing":return(0,t.jsx)(g.A,{className:"w-5 h-5 animate-pulse"});case"verifying":return(0,t.jsx)(j.A,{className:"w-5 h-5 animate-pulse"});case"complete":return eC?(0,t.jsx)(N.A,{className:"w-5 h-5 text-green-500"}):(0,t.jsx)(f.A,{className:"w-5 h-5 text-destructive"});case"cleaning":case"caching":return(0,t.jsx)(h.A,{className:"w-5 h-5 animate-spin"});case"error":return(0,t.jsx)(f.A,{className:"w-5 h-5 text-destructive"})}})(ef),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold",children:["update"===ej&&"Updating Packages","install"===ej&&"Installing Packages","remove"===ej&&"Removing Packages","refresh"===ej&&"Refreshing Metadata"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(e=>{switch(e){case"starting":return"Starting...";case"checking":return"Checking dependencies...";case"downloading":return"Downloading packages...";case"installing":return"Installing packages...";case"verifying":return"Verifying...";case"complete":return"Complete";case"cleaning":return"Cleaning metadata...";case"caching":return"Building cache...";case"error":return"Error";default:return e}})(ef)})]})]}),eA&&(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:eW,children:(0,t.jsx)(v.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Progress"}),(0,t.jsxs)("span",{className:"text-sm font-mono",children:[ev,"%"]})]}),(0,t.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all duration-300 ".concat(eA?eC?"bg-green-500":"bg-destructive":"bg-accent"),style:{width:"".concat(ev,"%")}})})]}),(0,t.jsxs)("div",{ref:eB,className:"flex-1 overflow-y-auto p-4 font-mono text-xs bg-black/30 min-h-[200px] max-h-[400px]",children:[ey.map((e,s)=>(0,t.jsx)("div",{className:"py-0.5 ".concat(e.includes("ERROR")||e.includes("error")?"text-destructive":e.includes("Complete!")||e.includes("successfully")?"text-green-500":e.includes("Downloading")||e.includes("Installing")?"text-accent":"text-muted-foreground"),children:e},s)),!eA&&(0,t.jsx)("div",{className:"py-0.5 text-muted-foreground animate-pulse",children:"â–Œ"})]}),eA&&(0,t.jsxs)("div",{className:"p-4 border-t border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3 ".concat(eC?"text-green-500":"text-destructive"),children:[eC?(0,t.jsx)(N.A,{className:"w-5 h-5"}):(0,t.jsx)(f.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium",children:eR})]}),(0,t.jsx)(i.$,{onClick:eW,className:"w-full",children:"Close"})]})]})}),e$&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-accent/20 flex items-center justify-center",children:(0,t.jsx)(g.A,{className:"w-5 h-5 text-accent"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:eZ?"Loading...":(null==eU?void 0:eU.name)||"Package Details"}),(null==eU?void 0:eU.arch)&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:eU.arch})]})]}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>e_(!1),children:(0,t.jsx)(v.A,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto",children:eZ?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(p.A,{className:"w-8 h-8 animate-spin text-accent"})}):eU?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Summary"}),(0,t.jsx)("p",{className:"text-sm",children:eU.summary||"No summary available"})]}),eU.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:eU.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[eU.version&&(0,t.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)($.A,{className:"w-4 h-4 text-accent"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Version"})]}),(0,t.jsx)("p",{className:"text-sm font-mono",children:eU.version})]}),eU.repository&&(0,t.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(w.A,{className:"w-4 h-4 text-chart-4"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Repository"})]}),(0,t.jsx)("p",{className:"text-sm",children:eU.repository})]}),void 0!==eU.size&&eU.size>0&&(0,t.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(S.A,{className:"w-4 h-4 text-chart-2"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Download Size"})]}),(0,t.jsx)("p",{className:"text-sm font-mono",children:eT(eU.size)})]}),void 0!==eU.install_size&&eU.install_size>0&&(0,t.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(_.A,{className:"w-4 h-4 text-chart-3"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Installed Size"})]}),(0,t.jsx)("p",{className:"text-sm font-mono",children:eT(eU.install_size)})]}),eU.license&&(0,t.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(U.A,{className:"w-4 h-4 text-chart-5"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"License"})]}),(0,t.jsx)("p",{className:"text-sm",children:eU.license})]}),eU.url&&(0,t.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(F.A,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Website"})]}),(0,t.jsxs)("a",{href:eU.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["Visit ",(0,t.jsx)(Z.A,{className:"w-3 h-3"})]})]})]})]}):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No package selected"})}),(0,t.jsxs)("div",{className:"p-4 border-t border-border flex gap-2",children:[eU&&!eZ&&(0,t.jsxs)(i.$,{onClick:()=>{e_(!1),eI("install",[eU.name])},className:"flex-1 gap-2",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Install Package"]}),(0,t.jsx)(i.$,{variant:"outline",onClick:()=>e_(!1),className:eU&&!eZ?"":"w-full",children:"Close"})]})]})})]})}},83209:(e,s,a)=>{"use strict";a.d(s,{BT:()=>i,Wu:()=>d,ZB:()=>n,Zp:()=>c,aR:()=>l});var t=a(95155);a(12115);var r=a(25016);function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...a})}},90235:(e,s,a)=>{"use strict";a.d(s,{J:()=>l});var t=a(95155);a(12115);var r=a(10489),c=a(25016);function l(e){let{className:s,...a}=e;return(0,t.jsx)(r.b,{"data-slot":"label",className:(0,c.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},90923:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>i,av:()=>d,j7:()=>n,tU:()=>l});var t=a(95155);a(12115);var r=a(65218),c=a(25016);function l(e){let{className:s,...a}=e;return(0,t.jsx)(r.bL,{"data-slot":"tabs",className:(0,c.cn)("flex flex-col gap-2",s),...a})}function n(e){let{className:s,...a}=e;return(0,t.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,c.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,c.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,c.cn)("flex-1 outline-none",s),...a})}},91127:(e,s,a)=>{Promise.resolve().then(a.bind(a,45246))}},e=>{e.O(0,[110,6263,7924,4505,1037,2940,2312,8441,1255,7358],()=>e(e.s=91127)),_N_E=e.O()}]);