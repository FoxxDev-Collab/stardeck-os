(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6358],{33789:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155);t(12115);var r=t(25016);function n(e){let{className:s,type:t,...n}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}},47507:(e,s,t)=>{"use strict";t.d(s,{bq:()=>u,eb:()=>x,gC:()=>m,l6:()=>d,yv:()=>o});var a=t(95155);t(12115);var r=t(88190),n=t(24033),l=t(5917),i=t(12108),c=t(25016);function d(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...s})}function o(e){let{...s}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...s})}function u(e){let{className:s,size:t="default",children:l,...i}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:s,children:t,position:n="popper",align:l="center",...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,align:l,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(p,{})]})})}function x(e){let{className:s,children:t,...n}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:t})]})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(i.A,{className:"size-4"})})}function p(e){let{className:s,...t}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(n.A,{className:"size-4"})})}},47697:(e,s,t)=>{Promise.resolve().then(t.bind(t,57570))},54679:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>u,Es:()=>x,L3:()=>h,c7:()=>m,lG:()=>i,rr:()=>p,zM:()=>c});var a=t(95155);t(12115);var r=t(41590),n=t(65229),l=t(25016);function i(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"dialog",...s})}function c(e){let{...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"dialog-trigger",...s})}function d(e){let{...s}=e;return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function o(e){let{className:s,...t}=e;return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function u(e){let{className:s,children:t,showCloseButton:i=!0,...c}=e;return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(o,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...c,children:[t,i&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function x(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",s),...t})}function p(e){let{className:s,...t}=e;return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",s),...t})}},57570:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var a=t(95155),r=t(12115),n=t(20063),l=t(6707),i=t(83209),c=t(97003),d=t(33789),o=t(90235),u=t(22312),m=t(90923),x=t(67812),h=t(47507),p=t(54679),f=t(96633),g=t(5370),j=t(34172),v=t(39068),b=t(17910),N=t(89715),y=t(76907),w=t(26617),_=t(35299),k=t(89559),A=t(78874),C=t(61362),S=t(15870),E=t(91169),z=t(6191),T=t(85921),L=t(71360),B=t(50859),F=t(30924),P=t(96583),O=t(20639);function U(){let{isAuthenticated:e,isLoading:s,token:t}=(0,l.A)(),U=(0,n.useRouter)(),[I,Z]=(0,r.useState)(null),[D,R]=(0,r.useState)([]),[J,$]=(0,r.useState)([]),[W,G]=(0,r.useState)([]),[M,V]=(0,r.useState)([]),[X,q]=(0,r.useState)(null),[H,K]=(0,r.useState)(null),[Y,Q]=(0,r.useState)("status"),[ee,es]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(null),[er,en]=(0,r.useState)({name:"",type:"oidc",issuer_url:"",client_id:"",client_secret:"",redirect_uri:"",scopes:"openid profile email",username_claim:"preferred_username",email_claim:"email",groups_claim:"groups"}),[el,ei]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(null),[eo,eu]=(0,r.useState)(null),[em,ex]=(0,r.useState)(!1),[eh,ep]=(0,r.useState)(null),[ef,eg]=(0,r.useState)(""),[ej,ev]=(0,r.useState)(!1),[eb,eN]=(0,r.useState)(!1),[ey,ew]=(0,r.useState)(null),[e_,ek]=(0,r.useState)({}),[eA,eC]=(0,r.useState)(!1),eS=(0,r.useCallback)(async()=>{if(t)try{let e=await fetch("/api/alliance/status",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();Z(s)}}catch(e){console.error("Failed to fetch status:",e)}},[t]),eE=(0,r.useCallback)(async()=>{if(t)try{let e=await fetch("/api/alliance/providers",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();R(s||[])}}catch(e){console.error("Failed to fetch providers:",e)}},[t]),ez=(0,r.useCallback)(async()=>{if(t)try{let e=await fetch("/api/alliance/users",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();$(s||[])}}catch(e){console.error("Failed to fetch users:",e)}},[t]),eT=(0,r.useCallback)(async()=>{if(t)try{let e=await fetch("/api/builtin-templates",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();G(s||[])}}catch(e){console.error("Failed to fetch templates:",e)}},[t]),eL=(0,r.useCallback)(async()=>{if(t)try{let e=await fetch("/api/users",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();V(s||[])}}catch(e){console.error("Failed to fetch local users:",e)}},[t]);(0,r.useEffect)(()=>{s||e||U.push("/login")},[e,s,U]),(0,r.useEffect)(()=>{t&&(eS(),eE(),ez(),eT(),eL())},[t,eS,eE,ez,eT,eL]),(0,r.useEffect)(()=>{if(H){let e=setTimeout(()=>K(null),5e3);return()=>clearTimeout(e)}},[H]),(0,r.useEffect)(()=>{if(X){let e=setTimeout(()=>q(null),5e3);return()=>clearTimeout(e)}},[X]);let eB=()=>{ea(null),en({name:"",type:"oidc",issuer_url:"",client_id:"",client_secret:"",redirect_uri:"".concat(window.location.origin,"/api/alliance/callback"),scopes:"openid profile email",username_claim:"preferred_username",email_claim:"email",groups_claim:"groups"}),es(!0)},eF=async()=>{if(t){ei(!0),q(null);try{let e={issuer_url:er.issuer_url,client_id:er.client_id,client_secret:er.client_secret,redirect_uri:er.redirect_uri,scopes:er.scopes.split(" ").filter(e=>e),username_claim:er.username_claim,email_claim:er.email_claim,groups_claim:er.groups_claim},s={name:er.name,type:er.type,config:e},a=et?"/api/alliance/providers/".concat(et.id):"/api/alliance/providers",r=et?"PUT":"POST",n=await fetch(a,{method:r,headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to save provider")}es(!1),K(et?"Provider updated":"Provider created"),eE(),eS()}catch(e){q(e instanceof Error?e.message:"Failed to save provider")}finally{ei(!1)}}},eP=async e=>{if(t&&confirm("Are you sure you want to delete this provider?"))try{let s=await fetch("/api/alliance/providers/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete provider")}K("Provider deleted"),eE(),eS()}catch(e){q(e instanceof Error?e.message:"Failed to delete provider")}},eO=async e=>{if(t){ed(e),eu(null);try{let s=await fetch("/api/alliance/providers/".concat(e,"/test"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),a=await s.json();eu({success:a.success,message:a.message||(a.success?"Connection successful":"Connection failed")})}catch(e){eu({success:!1,message:e instanceof Error?e.message:"Test failed"})}finally{ed(null)}}},eU=async()=>{if(t&&eh&&ef){ev(!0);try{let e=await fetch("/api/alliance/users/".concat(eh.id,"/link"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({local_user_id:parseInt(ef)})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to link user")}ex(!1),K("User linked successfully"),ez()}catch(e){q(e instanceof Error?e.message:"Failed to link user")}finally{ev(!1)}}},eI=async()=>{if(t&&ey){eC(!0);try{let e=await fetch("/api/builtin-templates/".concat(ey.id,"/deploy"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({environment:e_})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to deploy template")}eN(!1),K("".concat(ey.name," deployed successfully"))}catch(e){q(e instanceof Error?e.message:"Failed to deploy template")}finally{eC(!1)}}};return s?(0,a.jsx)(u.N,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(_.A,{className:"h-8 w-8 animate-spin text-accent"})})}):(0,a.jsx)(u.N,{children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(b.A,{className:"h-8 w-8 text-accent"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold font-mono text-primary",children:"STARFLEET ALLIANCE"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Identity Federation & SSO Management"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{eS(),eE(),ez(),eT()},children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),X&&(0,a.jsxs)("div",{className:"bg-destructive/20 border border-destructive/50 rounded-lg p-3 flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-destructive"}),(0,a.jsx)("span",{className:"text-destructive",children:X})]}),H&&(0,a.jsxs)("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-3 flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-500",children:H})]}),(0,a.jsxs)(m.tU,{value:Y,onValueChange:Q,children:[(0,a.jsxs)(m.j7,{className:"bg-muted/50 border border-border",children:[(0,a.jsxs)(m.Xi,{value:"status",className:"data-[state=active]:bg-accent/20 data-[state=active]:text-accent",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Status"]}),(0,a.jsxs)(m.Xi,{value:"providers",className:"data-[state=active]:bg-accent/20 data-[state=active]:text-accent",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Providers"]}),(0,a.jsxs)(m.Xi,{value:"users",className:"data-[state=active]:bg-accent/20 data-[state=active]:text-accent",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Users"]}),(0,a.jsxs)(m.Xi,{value:"templates",className:"data-[state=active]:bg-accent/20 data-[state=active]:text-accent",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Templates"]})]}),(0,a.jsxs)(m.av,{value:"status",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsx)(i.aR,{className:"pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-mono text-muted-foreground",children:"STATUS"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(null==I?void 0:I.enabled)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-500 font-mono",children:"ENABLED"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground font-mono",children:"DISABLED"})]})})})]}),(0,a.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsx)(i.aR,{className:"pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-mono text-muted-foreground",children:"PROVIDERS"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-3xl font-bold font-mono text-accent",children:(null==I?void 0:I.provider_count)||0})})]}),(0,a.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsx)(i.aR,{className:"pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-mono text-muted-foreground",children:"FEDERATED USERS"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-3xl font-bold font-mono text-primary",children:(null==I?void 0:I.user_count)||0})})]}),(0,a.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsx)(i.aR,{className:"pb-2",children:(0,a.jsx)(i.ZB,{className:"text-sm font-mono text-muted-foreground",children:"SSO CLIENTS"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-3xl font-bold font-mono text-green-500",children:(null==I?void 0:I.client_count)||0})})]})]}),(0,a.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{className:"font-mono text-primary",children:"GETTING STARTED"}),(0,a.jsx)(i.BT,{children:"Configure SSO for your Stardeck installation"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-muted/50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-accent/20 text-accent font-bold",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:"Add Identity Provider"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connect to your existing identity provider (Authentik, Keycloak, etc.) or deploy one using the Templates tab."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-muted/50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-accent/20 text-accent font-bold",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:"Configure SSO"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter your OIDC configuration details and test the connection."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-muted/50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-accent/20 text-accent font-bold",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:"Link Users"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Users from your IdP will appear in the Users tab. Link them to local accounts for unified access."})]})]})]})]})]}),(0,a.jsxs)(m.av,{value:"providers",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-mono text-primary",children:"Identity Providers"}),(0,a.jsxs)(c.$,{onClick:eB,children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Add Provider"]})]}),0===D.length?(0,a.jsx)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(i.Wu,{className:"py-12 text-center",children:[(0,a.jsx)(y.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No providers configured"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Add an identity provider to enable SSO"}),(0,a.jsxs)(c.$,{onClick:eB,variant:"outline",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Add Provider"]})]})}):(0,a.jsx)("div",{className:"space-y-3",children:D.map(e=>(0,a.jsx)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsx)(i.Wu,{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(e=>{switch(e){case"oidc":return(0,a.jsx)(g.A,{className:"h-4 w-4"});case"ldap":return(0,a.jsx)(j.A,{className:"h-4 w-4"});case"saml":return(0,a.jsx)(v.A,{className:"h-4 w-4"});default:return(0,a.jsx)(b.A,{className:"h-4 w-4"})}})(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-foreground",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(x.E,{variant:"outline",children:e.type.toUpperCase()}),e.enabled?(0,a.jsx)(x.E,{className:"bg-green-500/20 text-green-500 border-green-500/50",children:"Enabled"}):(0,a.jsx)(x.E,{variant:"secondary",children:"Disabled"}),e.is_managed&&(0,a.jsx)(x.E,{className:"bg-accent/20 text-accent border-accent/50",children:"Managed"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[eo&&null===ec&&(0,a.jsx)("span",{className:"text-sm ".concat(eo.success?"text-green-500":"text-destructive"),children:eo.message}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>eO(e.id),disabled:ec===e.id,children:ec===e.id?(0,a.jsx)(_.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-1"}),"Test"]})}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>eP(e.id),className:"border-destructive/50 text-destructive hover:bg-destructive/20",children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})]})]})})},e.id))})]}),(0,a.jsxs)(m.av,{value:"users",className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h2",{className:"text-lg font-mono text-primary",children:"Federated Users"})}),0===J.length?(0,a.jsx)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(i.Wu,{className:"py-12 text-center",children:[(0,a.jsx)(E.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No federated users"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Users will appear here after they authenticate via SSO"})]})}):(0,a.jsx)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,a.jsxs)(f.XI,{children:[(0,a.jsx)(f.A0,{children:(0,a.jsxs)(f.Hj,{className:"border-border",children:[(0,a.jsx)(f.nd,{className:"text-muted-foreground",children:"Username"}),(0,a.jsx)(f.nd,{className:"text-muted-foreground",children:"Email"}),(0,a.jsx)(f.nd,{className:"text-muted-foreground",children:"Display Name"}),(0,a.jsx)(f.nd,{className:"text-muted-foreground",children:"Linked Account"}),(0,a.jsx)(f.nd,{className:"text-muted-foreground text-right",children:"Actions"})]})}),(0,a.jsx)(f.BF,{children:J.map(e=>(0,a.jsxs)(f.Hj,{className:"border-border",children:[(0,a.jsx)(f.nA,{className:"font-mono text-accent",children:e.username}),(0,a.jsx)(f.nA,{className:"text-foreground",children:e.email}),(0,a.jsx)(f.nA,{className:"text-foreground",children:e.display_name}),(0,a.jsx)(f.nA,{children:e.local_user_id?(0,a.jsxs)(x.E,{className:"bg-green-500/20 text-green-500 border-green-500/50",children:[(0,a.jsx)(B.A,{className:"h-3 w-3 mr-1"}),"Linked"]}):(0,a.jsxs)(x.E,{variant:"secondary",children:[(0,a.jsx)(F.A,{className:"h-3 w-3 mr-1"}),"Not Linked"]})}),(0,a.jsx)(f.nA,{className:"text-right",children:!e.local_user_id&&(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{ep(e),eg(""),ex(!0)},children:[(0,a.jsx)(P.A,{className:"h-4 w-4 mr-1"}),"Link"]})})]},e.id))})]})})]}),(0,a.jsxs)(m.av,{value:"templates",className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h2",{className:"text-lg font-mono text-primary",children:"Built-in Templates"})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.map(e=>(0,a.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm hover:border-accent/50 transition-colors",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"p-3 bg-accent/10 rounded-lg text-accent",children:(e=>{switch(e){case"file-text":return(0,a.jsx)(N.A,{className:"h-8 w-8"});case"shield-check":return(0,a.jsx)(y.A,{className:"h-8 w-8"});default:return(0,a.jsx)(w.A,{className:"h-8 w-8"})}})(e.icon)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(i.ZB,{className:"text-lg text-foreground",children:e.name}),(0,a.jsx)(i.BT,{className:"mt-1",children:e.description})]})]})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:e.tags.map(e=>(0,a.jsx)(x.E,{variant:"outline",children:e},e))}),(0,a.jsxs)(c.$,{onClick:()=>{ew(e),ek({...e.env_defaults}),eN(!0)},className:"w-full",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Deploy ",e.name]})]})]},e.id))})]})]}),(0,a.jsx)(p.lG,{open:ee,onOpenChange:es,children:(0,a.jsxs)(p.Cf,{className:"max-w-xl",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{className:"text-primary font-mono",children:et?"Edit Provider":"Add Identity Provider"}),(0,a.jsx)(p.rr,{children:"Configure your identity provider connection"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Name"}),(0,a.jsx)(d.p,{value:er.name,onChange:e=>en({...er,name:e.target.value}),placeholder:"My IdP"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Type"}),(0,a.jsxs)(h.l6,{value:er.type,onValueChange:e=>en({...er,type:e}),children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"oidc",children:"OpenID Connect (OIDC)"}),(0,a.jsx)(h.eb,{value:"ldap",children:"LDAP"}),(0,a.jsx)(h.eb,{value:"saml",children:"SAML"})]})]})]})]}),"oidc"===er.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Issuer URL"}),(0,a.jsx)(d.p,{value:er.issuer_url,onChange:e=>en({...er,issuer_url:e.target.value}),placeholder:"https://auth.example.com"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Client ID"}),(0,a.jsx)(d.p,{value:er.client_id,onChange:e=>en({...er,client_id:e.target.value}),placeholder:"client_id"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Client Secret"}),(0,a.jsx)(d.p,{type:"password",value:er.client_secret,onChange:e=>en({...er,client_secret:e.target.value}),placeholder:"client_secret"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Redirect URI"}),(0,a.jsx)(d.p,{value:er.redirect_uri,onChange:e=>en({...er,redirect_uri:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Scopes"}),(0,a.jsx)(d.p,{value:er.scopes,onChange:e=>en({...er,scopes:e.target.value}),placeholder:"openid profile email"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Username Claim"}),(0,a.jsx)(d.p,{value:er.username_claim,onChange:e=>en({...er,username_claim:e.target.value}),placeholder:"preferred_username"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Email Claim"}),(0,a.jsx)(d.p,{value:er.email_claim,onChange:e=>en({...er,email_claim:e.target.value}),placeholder:"email"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Groups Claim"}),(0,a.jsx)(d.p,{value:er.groups_claim,onChange:e=>en({...er,groups_claim:e.target.value}),placeholder:"groups"})]})]})]}),"ldap"===er.type&&(0,a.jsx)("div",{className:"p-4 bg-muted/50 rounded-lg text-center text-muted-foreground",children:"LDAP configuration coming soon"}),"saml"===er.type&&(0,a.jsx)("div",{className:"p-4 bg-muted/50 rounded-lg text-center text-muted-foreground",children:"SAML configuration coming soon"})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>es(!1),children:"Cancel"}),(0,a.jsxs)(c.$,{onClick:eF,disabled:el||!er.name,children:[el?(0,a.jsx)(_.A,{className:"h-4 w-4 animate-spin mr-2"}):null,et?"Update":"Create"," Provider"]})]})]})}),(0,a.jsx)(p.lG,{open:em,onOpenChange:ex,children:(0,a.jsxs)(p.Cf,{children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{className:"text-primary font-mono",children:"Link User Account"}),(0,a.jsxs)(p.rr,{children:['Link "',null==eh?void 0:eh.username,'" to a local Stardeck account']})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Select Local Account"}),(0,a.jsxs)(h.l6,{value:ef,onValueChange:eg,children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"Select a user..."})}),(0,a.jsx)(h.gC,{children:M.map(e=>(0,a.jsxs)(h.eb,{value:e.id.toString(),children:[e.username," (",e.display_name,")"]},e.id))})]})]})}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>ex(!1),children:"Cancel"}),(0,a.jsxs)(c.$,{onClick:eU,disabled:ej||!ef,children:[ej?(0,a.jsx)(_.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Link Account"]})]})]})}),(0,a.jsx)(p.lG,{open:eb,onOpenChange:eN,children:(0,a.jsxs)(p.Cf,{className:"max-w-xl",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsxs)(p.L3,{className:"text-primary font-mono",children:["Deploy ",null==ey?void 0:ey.name]}),(0,a.jsx)(p.rr,{children:"Configure environment variables for deployment"})]}),(0,a.jsx)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:ey&&Object.entries(ey.env_defaults).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(o.J,{className:"flex items-center gap-2",children:[s,ey.required_env_vars.includes(s)&&(0,a.jsx)(x.E,{variant:"destructive",className:"text-xs",children:"Required"})]}),ey.env_descriptions[s]&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:ey.env_descriptions[s]}),(0,a.jsx)(d.p,{value:e_[s]||"",onChange:e=>ek({...e_,[s]:e.target.value}),placeholder:t})]},s)})}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>eN(!1),children:"Cancel"}),(0,a.jsxs)(c.$,{onClick:eI,disabled:eA,children:[eA?(0,a.jsx)(_.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Deploy"]})]})]})})]})})}},67812:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(95155);t(12115);var r=t(83101),n=t(25016);let l=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:t}),s),...r})}},83209:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>l});var a=t(95155);t(12115);var r=t(25016);function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}},90235:(e,s,t)=>{"use strict";t.d(s,{J:()=>l});var a=t(95155);t(12115);var r=t(10489),n=t(25016);function l(e){let{className:s,...t}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}},90923:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>d,j7:()=>i,tU:()=>l});var a=t(95155);t(12115);var r=t(65218),n=t(25016);function l(e){let{className:s,...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",s),...t})}},96633:(e,s,t)=>{"use strict";t.d(s,{A0:()=>l,BF:()=>i,Hj:()=>c,XI:()=>n,nA:()=>o,nd:()=>d});var a=t(95155);t(12115);var r=t(25016);function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",s),...t})})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}}},e=>{e.O(0,[110,6263,7924,4505,9213,5259,9519,2940,2312,8441,1255,7358],()=>e(e.s=47697)),_N_E=e.O()}]);