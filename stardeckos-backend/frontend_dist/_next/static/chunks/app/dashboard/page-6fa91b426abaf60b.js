(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{12595:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>_});var t=a(95155),n=a(12115),o=a(20063),s=a(6707),c=a(22312),i=a(26198);function l(e){let{icon:r,label:a,href:s,description:c,color:l}=e,d=(0,o.useRouter)(),{settings:m}=(0,i.t)(),[u,x]=(0,n.useState)(!1),p=m.desktop.coloredIcons&&l,h=p?(null==l?void 0:l.replace("text-","border-"))+"/60":"border-accent/60";return(0,t.jsxs)("button",{onClick:()=>{x(!0)},onDoubleClick:()=>{d.push(s)},onBlur:()=>{x(!1)},className:"\n        group flex flex-col items-center gap-2 p-4 rounded-lg w-28\n        transition-all duration-200 outline-none\n        ".concat(u?"bg-accent/20 border border-accent/50 shadow-[0_0_20px_rgba(112,187,179,0.3)]":"border border-transparent hover:bg-accent/10 hover:border-accent/20","\n      "),title:c,children:[(0,t.jsxs)("div",{className:"\n          relative w-16 h-16 flex items-center justify-center\n          rounded-lg border-2 transition-all duration-200\n          ".concat((()=>{if(p){let e=null==l?void 0:l.replace("text-","border-");return u?"".concat(e," bg-card/70 shadow-lg"):"border-border/60 bg-card/70 group-hover:".concat(e,"/50 group-hover:bg-card/90")}return u?"border-accent bg-accent/20 shadow-[0_0_15px_rgba(112,187,179,0.4)]":"border-border/60 bg-card/70 group-hover:border-accent/50 group-hover:bg-accent/10"})(),"\n        "),children:[(0,t.jsx)("div",{className:"absolute -top-px -left-px w-2 h-2 border-t-2 border-l-2 ".concat(h)}),(0,t.jsx)("div",{className:"absolute -top-px -right-px w-2 h-2 border-t-2 border-r-2 ".concat(h)}),(0,t.jsx)("div",{className:"absolute -bottom-px -left-px w-2 h-2 border-b-2 border-l-2 ".concat(h)}),(0,t.jsx)("div",{className:"absolute -bottom-px -right-px w-2 h-2 border-b-2 border-r-2 ".concat(h)}),(0,t.jsx)("div",{className:"transition-all duration-200 ".concat(u?p?"".concat(l," scale-110"):"text-accent scale-110":p?"".concat(l," group-hover:scale-110"):"text-muted-foreground group-hover:text-accent"),children:r})]}),(0,t.jsx)("span",{className:"\n          text-xs font-medium text-center leading-tight max-w-full\n          transition-colors duration-200 px-1 py-0.5 rounded\n          ".concat(u?"text-accent bg-accent/10":"text-foreground/80 group-hover:text-foreground","\n        "),children:a})]})}var d=a(16140);function m(e){let{containerId:r,name:a,icon:s,iconLight:c,iconDark:i,status:l}=e,m=(0,o.useRouter)(),[u,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),b="running"===l;(0,n.useEffect)(()=>{let e=()=>{h(document.documentElement.classList.contains("dark"))};e();let r=new MutationObserver(e);return r.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()},[]);let g=p?i||s:c||s,f=b?"bg-green-500":"bg-gray-500";return(0,t.jsxs)("button",{onClick:()=>{x(!0)},onDoubleClick:()=>{b&&m.push("/container-app?id=".concat(encodeURIComponent(r)))},onBlur:()=>{x(!1)},disabled:!b,className:"\n        group flex flex-col items-center gap-2 p-4 rounded-lg w-28\n        transition-all duration-200 outline-none\n        ".concat(!b?"opacity-50 cursor-not-allowed":"","\n        ").concat(u?"bg-cyan-500/20 border border-cyan-500/50 shadow-[0_0_20px_rgba(6,182,212,0.3)]":"border border-transparent hover:bg-cyan-500/10 hover:border-cyan-500/20","\n      "),title:b?"Open ".concat(a):"".concat(a," is not running"),children:[(0,t.jsxs)("div",{className:"\n          relative w-16 h-16 flex items-center justify-center\n          rounded-lg border-2 transition-all duration-200\n          ".concat(u?"border-cyan-500 bg-card/70 shadow-lg":"border-border/60 bg-card/70 group-hover:border-cyan-500/50 group-hover:bg-card/90","\n        "),children:[(0,t.jsx)("div",{className:"absolute -top-px -left-px w-2 h-2 border-t-2 border-l-2 border-cyan-500/60"}),(0,t.jsx)("div",{className:"absolute -top-px -right-px w-2 h-2 border-t-2 border-r-2 border-cyan-500/60"}),(0,t.jsx)("div",{className:"absolute -bottom-px -left-px w-2 h-2 border-b-2 border-l-2 border-cyan-500/60"}),(0,t.jsx)("div",{className:"absolute -bottom-px -right-px w-2 h-2 border-b-2 border-r-2 border-cyan-500/60"}),(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full ".concat(f," border-2 border-background"),children:b&&(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-green-500 animate-ping opacity-75"})}),(0,t.jsx)("div",{className:"transition-all duration-200 ".concat(u?"text-cyan-400 scale-110":"text-cyan-400/70 group-hover:text-cyan-400 group-hover:scale-110"),children:g?(0,t.jsx)("img",{src:g,alt:a,className:"w-8 h-8 object-contain"}):(0,t.jsx)(d.A,{className:"w-8 h-8"})})]}),(0,t.jsx)("span",{className:"\n          text-xs font-medium text-center leading-tight max-w-full truncate\n          transition-colors duration-200 px-1 py-0.5 rounded\n          ".concat(u?"text-cyan-400 bg-cyan-500/10":"text-foreground/80 group-hover:text-foreground","\n        "),children:a}),(0,t.jsx)("span",{className:"text-[10px] ".concat(b?"text-green-500":"text-muted-foreground"),children:b?"Running":"Stopped"})]})}var u=a(50906),x=a(75159),p=a(15870),h=a(14639),b=a(26617),g=a(20523),f=a(58734),v=a(50803),j=a(91169),w=a(89470),N=a(39068),y=a(89715),k=a(53270);let A=[{id:"system-monitor",icon:(0,t.jsx)(u.A,{className:"w-8 h-8"}),label:"System Monitor",href:"/system-monitor",description:"View real-time system metrics and performance data",color:"text-accent",operatorOrAdmin:!0},{id:"process-manager",icon:(0,t.jsx)(x.A,{className:"w-8 h-8"}),label:"Process Manager",href:"/process-manager",description:"Monitor and manage running processes",color:"text-primary",operatorOrAdmin:!0},{id:"service-manager",icon:(0,t.jsx)(p.A,{className:"w-8 h-8"}),label:"Service Manager",href:"/service-manager",description:"Control systemd services",color:"text-chart-5",operatorOrAdmin:!0},{id:"network-manager",icon:(0,t.jsx)(h.A,{className:"w-8 h-8"}),label:"Network Manager",href:"/network-manager",description:"Manage network interfaces, firewall, and routes",color:"text-blue-400",operatorOrAdmin:!0},{id:"container-manager",icon:(0,t.jsx)(d.A,{className:"w-8 h-8"}),label:"Container Manager",href:"/container-manager",description:"Manage Podman containers, images, and volumes",color:"text-cyan-400",operatorOrAdmin:!0},{id:"rpm-manager",icon:(0,t.jsx)(b.A,{className:"w-8 h-8"}),label:"RPM Manager",href:"/rpm-manager",description:"Manage packages, updates, and repositories",color:"text-chart-1",operatorOrAdmin:!0},{id:"storage-viewer",icon:(0,t.jsx)(g.A,{className:"w-8 h-8"}),label:"Storage Viewer",href:"/storage-viewer",description:"View disk usage and storage information",color:"text-chart-3",operatorOrAdmin:!0},{id:"file-browser",icon:(0,t.jsx)(f.A,{className:"w-8 h-8"}),label:"File Browser",href:"/file-browser",description:"Browse, upload, and manage files",color:"text-chart-2",operatorOrAdmin:!0},{id:"terminal",icon:(0,t.jsx)(v.A,{className:"w-8 h-8"}),label:"Terminal",href:"/terminal",description:"Interactive shell terminal",color:"text-green-500",operatorOrAdmin:!0},{id:"user-manager",icon:(0,t.jsx)(j.A,{className:"w-8 h-8"}),label:"User Manager",href:"/user-manager",description:"Manage system users and permissions",color:"text-chart-2",adminOnly:!0},{id:"group-manager",icon:(0,t.jsx)(w.A,{className:"w-8 h-8"}),label:"Group Manager",href:"/group-manager",description:"Manage user groups and permissions",color:"text-chart-1",adminOnly:!0},{id:"realm-manager",icon:(0,t.jsx)(N.A,{className:"w-8 h-8"}),label:"Realm Manager",href:"/realm-manager",description:"Manage authentication realms and domains",color:"text-accent",adminOnly:!0},{id:"audit-log",icon:(0,t.jsx)(y.A,{className:"w-8 h-8"}),label:"Audit Log",href:"/audit-log",description:"View system audit logs and security events",color:"text-orange-400",adminOnly:!0},{id:"settings",icon:(0,t.jsx)(k.A,{className:"w-8 h-8"}),label:"Settings",href:"/settings",description:"Configure desktop and system preferences",color:"text-chart-4"}];function _(){let{isAuthenticated:e,isLoading:r,user:a,token:i}=(0,s.A)(),d=(0,o.useRouter)(),[x,p]=(0,n.useState)(""),[h,b]=(0,n.useState)(!1),[g,f]=(0,n.useState)(new Set),[v,j]=(0,n.useState)([]),w=(0,n.useCallback)(async()=>{if(i)try{let e=await fetch("/api/desktop-apps",{headers:{Authorization:"Bearer ".concat(i)}});if(e.ok){let r=await e.json();j(r||[])}}catch(e){}},[i]);if((0,n.useEffect)(()=>{r||e||d.push("/login")},[e,r,d]),(0,n.useEffect)(()=>{let e=()=>{p(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let r=setInterval(e,1e3);return()=>clearInterval(r)},[]),(0,n.useEffect)(()=>{if(e&&i){w();let e=setInterval(w,1e4);return()=>clearInterval(e)}},[e,i,w]),r||!e)return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(u.A,{className:"w-12 h-12 mx-auto mb-4 text-accent animate-pulse"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})});let N=(null==a?void 0:a.role)==="admin"||(null==a?void 0:a.is_pam_admin),y=(null==a?void 0:a.role)==="admin"||(null==a?void 0:a.role)==="operator"||(null==a?void 0:a.is_pam_admin),_=A.filter(e=>(!e.adminOnly||!!N)&&(!e.operatorOrAdmin||!!y)),O=_.filter(e=>!g.has(e.id));return(0,t.jsx)(c.N,{time:x,showCustomize:!0,onCustomizeClick:()=>b(!h),children:(0,t.jsxs)("div",{className:"h-[calc(100vh-3.5rem)] relative overflow-hidden",children:[h&&(0,t.jsxs)("div",{className:"absolute top-6 right-6 z-20 w-80 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-2xl",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border/50",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"w-4 h-4"}),"Customize Desktop"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Show or hide desktop icons"})]}),(0,t.jsx)("div",{className:"p-4 space-y-2 max-h-96 overflow-y-auto",children:_.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 rounded hover:bg-accent/10 cursor-pointer transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:!g.has(e.id),onChange:()=>{var r;return r=e.id,void f(e=>{let a=new Set(e);return a.has(r)?a.delete(r):a.add(r),a})},className:"w-4 h-4 rounded border-accent/50 text-accent focus:ring-accent"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)("div",{className:e.color,children:e.icon}),(0,t.jsx)("span",{className:"text-sm",children:e.label})]})]},e.id))})]}),(0,t.jsx)("div",{className:"absolute inset-0 p-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap content-start gap-2",children:[O.map(e=>(0,t.jsx)(l,{icon:e.icon,label:e.label,href:e.href,description:e.description,color:e.color},e.id)),v.length>0&&(0,t.jsxs)("div",{className:"w-full my-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-cyan-500/30 to-transparent"}),(0,t.jsx)("span",{className:"text-xs text-cyan-500/70 font-medium tracking-wider",children:"CONTAINER APPS"}),(0,t.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-cyan-500/30 to-transparent"})]}),v.map(e=>(0,t.jsx)(m,{containerId:e.container_id,name:e.name,icon:e.icon,iconLight:e.icon_light,iconDark:e.icon_dark,status:e.status},e.id))]})}),(0,t.jsx)("div",{className:"absolute bottom-6 right-6 text-right pointer-events-none",children:(0,t.jsxs)("div",{className:"inline-block bg-card/60 backdrop-blur-md border border-border/50 rounded-lg p-4 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"relative w-5 h-5",children:(0,t.jsx)("div",{className:"absolute inset-0 border-2 border-accent rounded rotate-45 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-[8px] font-bold text-accent -rotate-45",children:"SD"})})}),(0,t.jsx)("span",{className:"text-sm font-bold tracking-widest text-foreground",children:"STARDECK OS"})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Welcome, ",(0,t.jsx)("span",{className:"text-accent",children:null==a?void 0:a.username})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground/60 mt-1",children:"Double-click an icon to open"})]})})]})})}},40234:(e,r,a)=>{Promise.resolve().then(a.bind(a,12595))}},e=>{e.O(0,[110,6263,7924,2940,2312,8441,1255,7358],()=>e(e.s=40234)),_N_E=e.O()}]);