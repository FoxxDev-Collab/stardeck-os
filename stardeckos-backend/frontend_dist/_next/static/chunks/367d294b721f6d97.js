(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34386,e=>{"use strict";e.s(["default",()=>eL],34386);var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(91432),n=e.i(17995),l=e.i(70065),i=e.i(67881),c=e.i(23750),o=e.i(48654),d=e.i(27341),m=e.i(26999),x=e.i(95926),h=e.i(47163);function u(e){let{...s}=e;return(0,t.jsx)(m.Root,{"data-slot":"sheet",...s})}function p(e){let{...s}=e;return(0,t.jsx)(m.Portal,{"data-slot":"sheet-portal",...s})}function j(e){let{className:s,...a}=e;return(0,t.jsx)(m.Overlay,{"data-slot":"sheet-overlay",className:(0,h.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function g(e){let{className:s,children:a,side:r="right",...n}=e;return(0,t.jsxs)(p,{children:[(0,t.jsx)(j,{}),(0,t.jsxs)(m.Content,{"data-slot":"sheet-content",className:(0,h.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",s),...n,children:[a,(0,t.jsxs)(m.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,t.jsx)(x.XIcon,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function f(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,h.cn)("flex flex-col gap-1.5 p-4",s),...a})}function N(e){let{className:s,...a}=e;return(0,t.jsx)(m.Title,{"data-slot":"sheet-title",className:(0,h.cn)("text-foreground font-semibold",s),...a})}var v=e.i(72664),b=e.i(74886),w=e.i(31343),y=e.i(52044),C=e.i(91810),k=e.i(27612),S=e.i(78917),D=e.i(68054),T=e.i(21218),B=e.i(78094),F=e.i(52786),I=e.i(39616),_=e.i(63209),L=e.i(31278),P=e.i(63059);function E(e){var a,n,c;let{containerId:o,onClose:m,onAction:x,onOpenTerminal:h,onOpenWebUI:p,isAdmin:j}=e,{token:E}=(0,r.useAuth)(),[U,z]=(0,s.useState)(null),[A,O]=(0,s.useState)(null),[R,H]=(0,s.useState)(!0),[M,W]=(0,s.useState)(null),[V,J]=(0,s.useState)("overview"),[G,q]=(0,s.useState)(!1),X=(0,s.useCallback)(async()=>{if(E&&o)try{let e=await fetch("/api/containers/".concat(o),{headers:{Authorization:"Bearer ".concat(E)}});if(!e.ok)throw Error("Failed to fetch container details");let t=await e.json();z(t),W(null)}catch(e){W(e instanceof Error?e.message:"Failed to load details")}finally{H(!1)}},[E,o]),K=(0,s.useCallback)(async()=>{if(E&&o&&(null==U?void 0:U.running))try{let e=await fetch("/api/containers/".concat(o,"/stats"),{headers:{Authorization:"Bearer ".concat(E)}});if(e.ok){let t=await e.json();O(t)}}catch(e){}},[E,o,null==U?void 0:U.running]);(0,s.useEffect)(()=>{o&&(H(!0),z(null),O(null),X())},[o,X]),(0,s.useEffect)(()=>{if(null==U?void 0:U.running){K();let e=setInterval(K,3e3);return()=>clearInterval(e)}},[null==U?void 0:U.running,K]);let Y=async e=>{if(o){q(!0);try{await x(o,e),"remove"!==e?await X():m()}finally{q(!1)}}},Z=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB","TB"][t]},$=e=>e&&"0001-01-01T00:00:00Z"!==e?new Date(e).toLocaleString():"-";return(0,t.jsx)(u,{open:!!o,onOpenChange:()=>m(),children:(0,t.jsxs)(g,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,t.jsx)(f,{className:"border-b border-border/50 pb-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)(N,{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/20 border border-cyan-500/40 flex items-center justify-center",children:(0,t.jsx)(v.Box,{className:"w-5 h-5 text-cyan-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block",children:(null==U?void 0:U.name)||"Loading..."}),U&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat((e=>{switch(e){case"running":return"text-green-500 bg-green-500/20";case"paused":return"text-yellow-500 bg-yellow-500/20";case"exited":case"dead":return"text-red-500 bg-red-500/20";default:return"text-gray-500 bg-gray-500/20"}})(U.status)),children:U.status})]})]})})}),R?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(L.Loader2,{className:"w-8 h-8 animate-spin text-accent"})}):M?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(_.AlertCircle,{className:"w-12 h-12 text-destructive mb-4"}),(0,t.jsx)("p",{className:"text-destructive",children:M})]}):U?(0,t.jsxs)("div",{className:"py-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[U.running?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("stop"),disabled:G,className:"gap-2",children:[(0,t.jsx)(y.Square,{className:"w-4 h-4"}),"Stop"]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("restart"),disabled:G,className:"gap-2",children:[(0,t.jsx)(C.RotateCw,{className:"w-4 h-4"}),"Restart"]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>h(o),className:"gap-2",children:[(0,t.jsx)(D.Terminal,{className:"w-4 h-4"}),"Shell"]}),U.has_web_ui&&p&&(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>p(o),className:"gap-2",children:[(0,t.jsx)(S.ExternalLink,{className:"w-4 h-4"}),"Web UI"]})]}):(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("start"),disabled:G,className:"gap-2",children:[(0,t.jsx)(w.Play,{className:"w-4 h-4"}),"Start"]}),j&&(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("remove"),disabled:G,className:"gap-2 text-destructive hover:text-destructive",children:[(0,t.jsx)(k.Trash2,{className:"w-4 h-4"}),"Remove"]})]}),U.running&&A&&(0,t.jsxs)(l.Card,{className:"bg-card/50 border-border/50",children:[(0,t.jsx)(l.CardHeader,{className:"py-3",children:(0,t.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(T.Activity,{className:"w-4 h-4 text-accent"}),"Live Statistics"]})}),(0,t.jsxs)(l.CardContent,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"CPU"}),(0,t.jsxs)("div",{className:"text-lg font-semibold",children:[A.cpu_percent.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"h-1 bg-muted rounded-full overflow-hidden mt-1",children:(0,t.jsx)("div",{className:"h-full bg-cyan-500 transition-all",style:{width:"".concat(Math.min(A.cpu_percent,100),"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Memory"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:Z(A.memory_used)}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["/ ",Z(A.memory_limit)," (",A.memory_percent.toFixed(1),"%)"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Network I/O"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-green-500",children:"↓"})," ",Z(A.network_rx)]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-blue-500",children:"↑"})," ",Z(A.network_tx)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"PIDs"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:A.pids})]})]})]}),(0,t.jsxs)(d.Tabs,{value:V,onValueChange:J,children:[(0,t.jsxs)(d.TabsList,{className:"grid grid-cols-4 w-full",children:[(0,t.jsx)(d.TabsTrigger,{value:"overview",className:"text-xs",children:"Overview"}),(0,t.jsx)(d.TabsTrigger,{value:"network",className:"text-xs",children:"Network"}),(0,t.jsx)(d.TabsTrigger,{value:"volumes",className:"text-xs",children:"Volumes"}),(0,t.jsx)(d.TabsTrigger,{value:"env",className:"text-xs",children:"Environment"})]}),(0,t.jsxs)(d.TabsContent,{value:"overview",className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Container ID"}),(0,t.jsxs)("div",{className:"font-mono text-xs flex items-center gap-2",children:[U.container_id,(0,t.jsx)("button",{onClick:()=>{var e;return e=U.container_id,void navigator.clipboard.writeText(e)},className:"text-muted-foreground hover:text-accent",children:(0,t.jsx)(b.Copy,{className:"w-3 h-3"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Image"}),(0,t.jsx)("div",{className:"font-mono text-xs truncate",children:U.image})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Created"}),(0,t.jsx)("div",{className:"text-xs",children:$(U.created)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Started"}),(0,t.jsx)("div",{className:"text-xs",children:$(U.started_at)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Hostname"}),(0,t.jsx)("div",{className:"font-mono text-xs",children:U.hostname||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"PID"}),(0,t.jsx)("div",{className:"font-mono text-xs",children:U.running?U.pid:"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"User"}),(0,t.jsx)("div",{className:"font-mono text-xs",children:U.user||"root"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Restart Policy"}),(0,t.jsx)("div",{className:"text-xs",children:(null==(a=U.restart_policy)?void 0:a.name)||"no"})]})]}),((null==(n=U.entrypoint)?void 0:n.length)>0||(null==(c=U.cmd)?void 0:c.length)>0)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Command"}),(0,t.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 font-mono text-xs overflow-x-auto",children:[...U.entrypoint||[],...U.cmd||[]].join(" ")})]}),U.labels&&Object.keys(U.labels).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Labels"}),(0,t.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1 max-h-40 overflow-y-auto",children:Object.entries(U.labels).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"font-mono text-xs",children:[(0,t.jsx)("span",{className:"text-cyan-400",children:s}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"="}),(0,t.jsx)("span",{children:a})]},s)})})]})]}),(0,t.jsxs)(d.TabsContent,{value:"network",className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Network Mode"}),(0,t.jsx)("div",{className:"text-sm",children:U.network_mode||"bridge"})]}),U.networks&&Object.keys(U.networks).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Connected Networks"}),(0,t.jsx)("div",{className:"space-y-3",children:Object.entries(U.networks).map(e=>{let[s,a]=e;return(0,t.jsx)(l.Card,{className:"bg-muted/30",children:(0,t.jsxs)(l.CardContent,{className:"p-3",children:[(0,t.jsxs)("div",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[(0,t.jsx)(B.Network,{className:"w-4 h-4 text-accent"}),s]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"IP Address:"}),(0,t.jsx)("span",{className:"ml-2 font-mono",children:a.IPAddress||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Gateway:"}),(0,t.jsx)("span",{className:"ml-2 font-mono",children:a.Gateway||"-"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"MAC Address:"}),(0,t.jsx)("span",{className:"ml-2 font-mono",children:a.MacAddress||"-"})]})]})]})},s)})})]})]}),(0,t.jsx)(d.TabsContent,{value:"volumes",className:"space-y-4 mt-4",children:U.mounts&&U.mounts.length>0?(0,t.jsx)("div",{className:"space-y-3",children:U.mounts.map((e,s)=>(0,t.jsx)(l.Card,{className:"bg-muted/30",children:(0,t.jsxs)(l.CardContent,{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-4 h-4 text-accent"}),(0,t.jsx)("span",{className:"font-semibold text-sm",children:e.Type}),(0,t.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded ".concat(e.RW?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"),children:e.RW?"RW":"RO"})]}),(0,t.jsxs)("div",{className:"space-y-1 text-xs font-mono",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground w-16",children:"Source:"}),(0,t.jsx)("span",{className:"truncate",children:e.Source})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(P.ChevronRight,{className:"w-3 h-3 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground w-16",children:"Target:"}),(0,t.jsx)("span",{className:"truncate",children:e.Destination})]})]})]})},s))}):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(F.HardDrive,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No volumes mounted"})]})}),(0,t.jsx)(d.TabsContent,{value:"env",className:"space-y-4 mt-4",children:U.env&&U.env.length>0?(0,t.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1 max-h-80 overflow-y-auto",children:U.env.map((e,s)=>{let[a,...r]=e.split("="),n=r.join("="),l=a.toLowerCase().includes("password")||a.toLowerCase().includes("secret")||a.toLowerCase().includes("key")||a.toLowerCase().includes("token");return(0,t.jsxs)("div",{className:"font-mono text-xs",children:[(0,t.jsx)("span",{className:"text-cyan-400",children:a}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"="}),(0,t.jsx)("span",{children:l?"••••••••":n})]},s)})}):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(I.Settings,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No environment variables"})]})})]})]}):null]})})}var U=e.i(30374),z=e.i(37727),A=e.i(98361),O=e.i(26336),R=e.i(94179);function H(e){let{containerId:a,containerName:n,onClose:l}=e,{token:c}=(0,r.useAuth)();(0,s.useRef)(null);let o=(0,s.useRef)(null),[d,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),[u,p]=(0,s.useState)(!1),[j,g]=(0,s.useState)([]),[f,N]=(0,s.useState)(""),v=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!a||!c)return;let e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/containers/").concat(a,"/exec"));return o.current=t,t.onopen=()=>{m(!0),h(null),t.send(JSON.stringify({type:"auth",token:c}))},t.onmessage=e=>{try{let t=JSON.parse(e.data);"output"===t.type?g(e=>[...e,t.data]):"error"===t.type&&h(t.message)}catch(t){g(t=>[...t,e.data])}},t.onerror=()=>{h("WebSocket connection error"),m(!1)},t.onclose=()=>{m(!1)},()=>{t.readyState===WebSocket.OPEN&&t.close()}},[a,c]),(0,s.useEffect)(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[j]),(0,t.jsx)(U.Dialog,{open:!!a,onOpenChange:l,children:(0,t.jsxs)(U.DialogContent,{className:"".concat(u?"max-w-full h-screen":"max-w-4xl h-[600px]"," p-0 gap-0 flex flex-col"),children:[(0,t.jsxs)(U.DialogHeader,{className:"px-4 py-3 border-b border-border/50 flex-row items-center justify-between space-y-0",children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-500/20 to-emerald-500/20 border border-green-500/30 flex items-center justify-center",children:(0,t.jsx)(D.Terminal,{className:"w-4 h-4 text-green-400"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Container Shell"}),n&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground font-normal",children:n}),d?(0,t.jsx)(R.Badge,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/30",children:"Connected"}):(0,t.jsx)(R.Badge,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/30",children:"Disconnected"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{g([])},className:"h-8 w-8",children:(0,t.jsx)(C.RotateCw,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>p(!u),className:"h-8 w-8",children:u?(0,t.jsx)(O.Minimize2,{className:"w-4 h-4"}):(0,t.jsx)(A.Maximize2,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8",children:(0,t.jsx)(z.X,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-black/90 min-h-0",children:[(0,t.jsxs)("div",{ref:v,className:"flex-1 overflow-y-auto p-4 font-mono text-sm text-green-400 space-y-1",children:[x&&(0,t.jsx)("div",{className:"text-red-500 mb-4 p-2 bg-red-500/10 rounded border border-red-500/30",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:x}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{h(null),g([]),o.current&&o.current.close()},className:"h-6 text-xs",children:"Reconnect"})]})}),0===j.length&&!x&&(0,t.jsx)("div",{className:"text-muted-foreground",children:d?"Connected. Type a command...":"Connecting..."}),j.map((e,s)=>(0,t.jsx)("div",{className:"whitespace-pre-wrap break-all",children:e},s))]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f.trim()&&o.current&&o.current.readyState===WebSocket.OPEN&&(o.current.send(JSON.stringify({type:"input",data:f+"\n"})),g(e=>[...e,"$ ".concat(f)]),N(""))},className:"border-t border-border/30 p-3 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-green-400 font-mono",children:"$"}),(0,t.jsx)("input",{type:"text",value:f,onChange:e=>N(e.target.value),placeholder:"Enter command...",disabled:!d,className:"flex-1 bg-transparent border-none outline-none text-green-400 font-mono placeholder:text-green-400/30 disabled:opacity-50",autoFocus:!0}),(0,t.jsx)(i.Button,{type:"submit",size:"sm",disabled:!d||!f.trim(),className:"bg-green-500/20 hover:bg-green-500/30 text-green-400 border border-green-500/30",children:"Send"})]})]}),(0,t.jsx)("div",{className:"px-4 py-2 border-t border-border/50 bg-muted/30 text-xs text-muted-foreground",children:(0,t.jsx)("span",{children:"Tip: This terminal connects to the container's shell. Type 'exit' to disconnect."})})]})})}var M=e.i(19036),W=e.i(10708),V=e.i(62870),J=e.i(78583),G=e.i(40160),q=e.i(55436),X=e.i(75254);let K=(0,X.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var Y=e.i(43531);function Z(e){let{containerId:a,containerName:n,onClose:l}=e,{token:o}=(0,r.useAuth)(),[d,m]=(0,s.useState)([]),[x,h]=(0,s.useState)([]),[u,p]=(0,s.useState)(""),[j,g]=(0,s.useState)(!0),[f,N]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[k,S]=(0,s.useState)("100"),[D,T]=(0,s.useState)(!0),[B,F]=(0,s.useState)(!1),I=(0,s.useRef)(null),_=(0,s.useRef)(null),L=(0,s.useCallback)(async()=>{if(o&&a)try{let e=new URLSearchParams({tail:k,timestamps:D.toString()}),t=await fetch("/api/containers/".concat(a,"/logs?").concat(e),{headers:{Authorization:"Bearer ".concat(o)}});if(!t.ok)throw Error("Failed to fetch logs");let s=await t.json();m(s.logs||[])}catch(e){console.error("Failed to fetch logs:",e)}},[o,a,k,D]),P=(0,s.useCallback)(()=>{if(!a||!o)return;let e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/containers/").concat(a,"/logs/stream"));_.current=t,t.onopen=()=>{t.send(JSON.stringify({type:"auth",token:o})),N(!0)},t.onmessage=e=>{try{let t=JSON.parse(e.data);"log"===t.type&&m(e=>[...e,t.line])}catch(t){m(t=>[...t,e.data])}},t.onerror=()=>{N(!1)},t.onclose=()=>{N(!1)}},[a,o]),E=(0,s.useCallback)(()=>{_.current&&(_.current.close(),_.current=null),N(!1)},[]);(0,s.useEffect)(()=>(a&&L(),()=>{E()}),[a,L,E]),(0,s.useEffect)(()=>{u.trim()?h(d.filter(e=>e.toLowerCase().includes(u.toLowerCase()))):h(d)},[d,u]),(0,s.useEffect)(()=>{j&&I.current&&(I.current.scrollTop=I.current.scrollHeight)},[x,j]);let H=()=>{E(),L()};return(0,t.jsx)(U.Dialog,{open:!!a,onOpenChange:l,children:(0,t.jsxs)(U.DialogContent,{className:"".concat(v?"max-w-full h-screen":"max-w-5xl h-[700px]"," p-0 gap-0 flex flex-col"),children:[(0,t.jsxs)(U.DialogHeader,{className:"px-4 py-3 border-b border-border/50 flex-row items-center justify-between space-y-0",children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500/20 to-indigo-500/20 border border-blue-500/30 flex items-center justify-center",children:(0,t.jsx)(J.FileText,{className:"w-4 h-4 text-blue-400"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Container Logs"}),n&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground font-normal",children:n}),(0,t.jsxs)(R.Badge,{variant:"outline",className:"font-mono",children:[x.length," lines"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>y(!v),className:"h-8 w-8",children:v?(0,t.jsx)(O.Minimize2,{className:"w-4 h-4"}):(0,t.jsx)(A.Maximize2,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8",children:(0,t.jsx)(z.X,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-border/50 bg-muted/30 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[200px] relative",children:[(0,t.jsx)(q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search logs...",value:u,onChange:e=>p(e.target.value),className:"pl-9"})]}),(0,t.jsxs)(V.Select,{value:k,onValueChange:S,children:[(0,t.jsx)(V.SelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(V.SelectValue,{})}),(0,t.jsxs)(V.SelectContent,{children:[(0,t.jsx)(V.SelectItem,{value:"50",children:"Last 50 lines"}),(0,t.jsx)(V.SelectItem,{value:"100",children:"Last 100 lines"}),(0,t.jsx)(V.SelectItem,{value:"500",children:"Last 500 lines"}),(0,t.jsx)(V.SelectItem,{value:"1000",children:"Last 1000 lines"}),(0,t.jsx)(V.SelectItem,{value:"all",children:"All lines"})]})]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{f?E():P()},className:f?"bg-green-500/20 border-green-500/30 text-green-500":"",children:[f?(0,t.jsx)(K,{className:"w-4 h-4 mr-2"}):(0,t.jsx)(w.Play,{className:"w-4 h-4 mr-2"}),f?"Following":"Follow"]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:H,children:[(0,t.jsx)(C.RotateCw,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(x.join("\n")),F(!0),setTimeout(()=>F(!1),2e3)},children:[B?(0,t.jsx)(Y.Check,{className:"w-4 h-4 mr-2"}):(0,t.jsx)(b.Copy,{className:"w-4 h-4 mr-2"}),B?"Copied!":"Copy"]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([d.join("\n")],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="".concat(n||a,"-logs.txt"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},children:[(0,t.jsx)(G.Download,{className:"w-4 h-4 mr-2"}),"Download"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M.Switch,{id:"auto-scroll",checked:j,onCheckedChange:g}),(0,t.jsx)(W.Label,{htmlFor:"auto-scroll",className:"text-sm cursor-pointer",children:"Auto-scroll"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M.Switch,{id:"timestamps",checked:D,onCheckedChange:e=>{T(e),H()}}),(0,t.jsx)(W.Label,{htmlFor:"timestamps",className:"text-sm cursor-pointer",children:"Show timestamps"})]})]})]}),(0,t.jsx)("div",{ref:I,className:"flex-1 overflow-y-auto p-4 bg-black/90 font-mono text-xs text-gray-300 space-y-1 min-h-0",children:0===x.length?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:u?"No logs match your search":"No logs available"}):x.map((e,s)=>{let a=/error|failed|fatal/i.test(e),r=/warn|warning/i.test(e),n=/info/i.test(e),l=/debug/i.test(e),i="text-gray-300";a?i="text-red-400":r?i="text-yellow-400":n?i="text-blue-400":l&&(i="text-purple-400");let c=u?e.split(RegExp("(".concat(u,")"),"gi")):[e];return(0,t.jsxs)("div",{className:"".concat(i," whitespace-pre-wrap break-all hover:bg-white/5 px-2 py-0.5 rounded transition-colors"),children:[(0,t.jsx)("span",{className:"text-muted-foreground select-none mr-2",children:s+1}),u?c.map((e,s)=>e.toLowerCase()===u.toLowerCase()?(0,t.jsx)("span",{className:"bg-yellow-500/30 text-yellow-300",children:e},s):(0,t.jsx)("span",{children:e},s)):e]},s)})}),(0,t.jsx)("div",{className:"px-4 py-2 border-t border-border/50 bg-muted/30 text-xs text-muted-foreground",children:(0,t.jsx)("span",{children:"Tip: Use the Follow button to stream logs in real-time."})})]})})}function $(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,h.cn)("w-full caption-bottom text-sm",s),...a})})}function Q(e){let{className:s,...a}=e;return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,h.cn)("[&_tr]:border-b",s),...a})}function ee(e){let{className:s,...a}=e;return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,h.cn)("[&_tr:last-child]:border-0",s),...a})}function et(e){let{className:s,...a}=e;return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,h.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function es(e){let{className:s,...a}=e;return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,h.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function ea(e){let{className:s,...a}=e;return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,h.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}var er=e.i(88844),en=e.i(16715),el=e.i(51975);let ei=(0,X.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var ec=e.i(52008);function eo(e){let{onRefresh:a}=e,{token:n,user:o}=(0,r.useAuth)(),[d,m]=(0,s.useState)([]),[x,h]=(0,s.useState)([]),[u,p]=(0,s.useState)(!0),[j,g]=(0,s.useState)(null),[f,N]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1),[w,y]=(0,s.useState)(""),[C,S]=(0,s.useState)("latest"),[D,T]=(0,s.useState)(!1),[B,I]=(0,s.useState)(""),P=(null==o?void 0:o.role)==="admin",E=async()=>{if(n){p(!0),g(null);try{let e=await fetch("/api/images",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok)throw Error("Failed to fetch images");let t=await e.json();m(t||[])}catch(e){g(e instanceof Error?e.message:"Failed to load images")}finally{p(!1)}}};(0,s.useEffect)(()=>{E()},[n]),(0,s.useEffect)(()=>{f.trim()?h(d.filter(e=>e.repo_tags.some(e=>e.toLowerCase().includes(f.toLowerCase())))):h(d)},[d,f]);let z=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB","TB"][t]},A=async()=>{if(w.trim()){T(!0),I("Pulling image...");try{let e="".concat(w,":").concat(C);if(!(await fetch("/api/images/pull",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({image:e})})).ok)throw Error("Failed to pull image");I("Image pulled successfully!"),setTimeout(()=>{b(!1),y(""),S("latest"),I(""),E(),null==a||a()},1e3)}catch(e){I("Error: ".concat(e instanceof Error?e.message:"Failed to pull image"))}finally{T(!1)}}},O=async e=>{if(confirm("Are you sure you want to delete this image?"))try{if(!(await fetch("/api/images/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}})).ok)throw Error("Failed to delete image");E(),null==a||a()}catch(e){alert(e instanceof Error?e.message:"Failed to delete image")}};return u?(0,t.jsx)(l.Card,{className:"bg-card/50 border-border/50",children:(0,t.jsx)(l.CardContent,{className:"flex items-center justify-center py-12",children:(0,t.jsx)(L.Loader2,{className:"w-8 h-8 animate-spin text-accent"})})}):j?(0,t.jsx)(l.Card,{className:"bg-card/50 border-border/50",children:(0,t.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(_.AlertCircle,{className:"w-12 h-12 text-destructive mb-4"}),(0,t.jsx)("p",{className:"text-destructive mb-4",children:j}),(0,t.jsxs)(i.Button,{onClick:E,variant:"outline",children:[(0,t.jsx)(en.RefreshCw,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Card,{className:"bg-card/50 border-border/50",children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(er.Package,{className:"w-5 h-5 text-accent"}),"Container Images"]}),(0,t.jsx)(l.CardDescription,{children:"Manage container images available on this system"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{onClick:E,variant:"outline",size:"sm",children:[(0,t.jsx)(en.RefreshCw,{className:"w-4 h-4 mr-2"}),"Refresh"]}),P&&(0,t.jsxs)(i.Button,{onClick:()=>b(!0),size:"sm",children:[(0,t.jsx)(G.Download,{className:"w-4 h-4 mr-2"}),"Pull Image"]})]})]})}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search images by name...",value:f,onChange:e=>N(e.target.value),className:"pl-9"})]}),0===x.length?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(er.Package,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:f?"No images match your search":"No images found"})]}):(0,t.jsx)("div",{className:"rounded-lg border border-border/50 overflow-hidden",children:(0,t.jsxs)($,{children:[(0,t.jsx)(Q,{children:(0,t.jsxs)(et,{className:"bg-muted/50",children:[(0,t.jsx)(es,{children:"Repository:Tag"}),(0,t.jsx)(es,{children:"Image ID"}),(0,t.jsx)(es,{children:"Size"}),(0,t.jsx)(es,{children:"Created"}),(0,t.jsx)(es,{children:"Containers"}),P&&(0,t.jsx)(es,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(ee,{children:x.map(e=>{var s;return(0,t.jsxs)(et,{className:"hover:bg-muted/30",children:[(0,t.jsx)(ea,{children:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:e.repo_tags&&e.repo_tags.length>0?e.repo_tags.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(el.Tag,{className:"w-3 h-3 text-accent"}),(0,t.jsx)("span",{className:"font-mono text-sm",children:e})]},e)):(0,t.jsx)("span",{className:"text-muted-foreground text-sm italic",children:"<none>"})})}),(0,t.jsx)(ea,{children:(0,t.jsx)("span",{className:"font-mono text-xs text-muted-foreground",children:e.id.substring(0,12)})}),(0,t.jsx)(ea,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-3 h-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm",children:z(e.size)})]})}),(0,t.jsx)(ea,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ei,{className:"w-3 h-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm",children:(s=e.created)?new Date(s).toLocaleString():"-"})]})}),(0,t.jsx)(ea,{children:(0,t.jsx)(R.Badge,{variant:"outline",className:"font-mono",children:e.containers})}),P&&(0,t.jsx)(ea,{className:"text-right",children:(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>O(e.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,t.jsx)(k.Trash2,{className:"w-4 h-4"})})})]},e.id)})})]})}),(0,t.jsx)("div",{className:"flex items-center justify-between pt-4 border-t border-border/50 text-sm text-muted-foreground",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ec.Layers,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[d.length," images"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[z(d.reduce((e,t)=>e+t.size,0))," total"]})]})]})})]})]}),(0,t.jsx)(U.Dialog,{open:v,onOpenChange:b,children:(0,t.jsxs)(U.DialogContent,{children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(G.Download,{className:"w-5 h-5 text-accent"}),"Pull Container Image"]}),(0,t.jsx)(U.DialogDescription,{children:"Download a container image from a registry"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"image-name",children:"Image Name"}),(0,t.jsx)(c.Input,{id:"image-name",placeholder:"e.g., nginx, docker.io/library/redis, ghcr.io/user/app",value:w,onChange:e=>y(e.target.value),disabled:D}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter the full image path or just the image name for Docker Hub"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"image-tag",children:"Tag"}),(0,t.jsx)(c.Input,{id:"image-tag",placeholder:"latest",value:C,onChange:e=>S(e.target.value),disabled:D})]}),B&&(0,t.jsx)("div",{className:"text-sm p-3 rounded-lg ".concat(B.includes("Error")?"bg-destructive/10 text-destructive":"bg-accent/10 text-accent"),children:B})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{b(!1),y(""),S("latest"),I("")},disabled:D,children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:A,disabled:!w.trim()||D,children:[D&&(0,t.jsx)(L.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Pull Image"]})]})]})})]})}var ed=e.i(87336),em=e.i(69035),ex=e.i(7233),eh=e.i(88511),eu=e.i(95468),ep=e.i(73884),ej=e.i(86536),eg=e.i(46696);function ef(e){let{token:a,isAdmin:r,composeAvailable:n}=e,[o,d]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[h,u]=(0,s.useState)(""),[p,j]=(0,s.useState)(null),[g,f]=(0,s.useState)([]),[N,b]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[I,P]=(0,s.useState)(!1),[E,z]=(0,s.useState)(""),[A,O]=(0,s.useState)(""),[H,M]=(0,s.useState)('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),[V,J]=(0,s.useState)(""),[G,X]=(0,s.useState)(!1),[K,Y]=(0,s.useState)([]),[Z,$]=(0,s.useState)(0),Q=(0,s.useRef)(null),ee=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/stacks",{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let t=await e.json();d(t||[])}}catch(e){console.error("Failed to fetch stacks:",e)}finally{x(!1)}},[a]);(0,s.useEffect)(()=>{ee()},[ee]),(0,s.useEffect)(()=>{Q.current&&(Q.current.scrollTop=Q.current.scrollHeight)},[K]);let et=async e=>{try{let t=await fetch("/api/stacks/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(t.ok){let e=await t.json();return j(e),e}}catch(e){console.error("Failed to fetch stack details:",e)}return null},es=async e=>{try{let t=await fetch("/api/stacks/".concat(e,"/containers"),{headers:{Authorization:"Bearer ".concat(a)}});if(t.ok){let e=await t.json();f(e||[])}}catch(e){console.error("Failed to fetch stack containers:",e)}},ea=async()=>{try{let e=await fetch("/api/stacks",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:E,description:A,compose_content:H,env_content:V})});if(e.ok)eg.toast.success("Stack created",{description:'Stack "'.concat(E,'" created successfully')}),b(!1),eo(),ee();else{let t=await e.json();eg.toast.error("Failed to create stack",{description:t.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to create stack",{description:e instanceof Error?e.message:"Unknown error"})}},er=async()=>{if(p)try{let e=await fetch("/api/stacks/".concat(p.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:E||p.name,description:A,compose_content:H,env_content:V})});if(e.ok)eg.toast.success("Stack updated",{description:'Stack "'.concat(p.name,'" updated successfully')}),S(!1),ee();else{let t=await e.json();eg.toast.error("Failed to update stack",{description:t.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to update stack",{description:e instanceof Error?e.message:"Unknown error"})}},en=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(p)try{let t=await fetch("/api/stacks/".concat(p.id,"?volumes=").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(t.ok)eg.toast.success("Stack deleted",{description:'Stack "'.concat(p.name,'" deleted successfully')}),T(!1),j(null),ee();else{let e=await t.json();eg.toast.error("Failed to delete stack",{description:e.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to delete stack",{description:e instanceof Error?e.message:"Unknown error"})}},el=async()=>{if(!p)return;X(!0),Y([]),$(0);let e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/stacks/").concat(p.id,"/deploy?token=").concat(a));t.onmessage=e=>{let t=JSON.parse(e.data);t.output&&(Y(e=>[...e,t.output]),$(e=>Math.min(e+2,90))),t.message&&Y(e=>[...e,"[INFO] ".concat(t.message)]),t.complete&&(X(!1),$(100),t.success?(eg.toast.success("Stack deployed",{description:'Stack "'.concat(p.name,'" is now running')}),ee()):eg.toast.error("Deployment failed",{description:t.error||"Unknown error"}))},t.onerror=()=>{X(!1),eg.toast.error("Connection error",{description:"Failed to connect to deployment service"})}},ei=async e=>{if(p)try{let t=await fetch("/api/stacks/".concat(p.id,"/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(a)}});if(t.ok)eg.toast.success("Stack ".concat(e,"ed"),{description:'Stack "'.concat(p.name,'" ').concat(e,"ed successfully")}),ee();else{let s=await t.json();eg.toast.error("Failed to ".concat(e," stack"),{description:s.error||"Unknown error"})}}catch(t){eg.toast.error("Failed to ".concat(e," stack"),{description:t instanceof Error?t.message:"Unknown error"})}},eo=()=>{z(""),O(""),M('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),J("")},ef=async e=>{let t=await et(e.id);t&&(z(t.name),O(t.description),M(t.compose_content),J(t.env_content),S(!0))},eN=async e=>{await et(e.id),Y([]),$(0),F(!0)},ev=async e=>{await et(e.id),await es(e.id),P(!0)},eb=e=>{switch(e){case"active":return"text-accent";case"partial":return"text-primary";case"stopped":default:return"text-muted-foreground";case"error":return"text-destructive";case"deploying":return"text-blue-400"}},ew=o.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()));return n?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search stacks...",value:h,onChange:e=>u(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),r&&(0,t.jsxs)(i.Button,{onClick:()=>b(!0),className:"gap-2",children:[(0,t.jsx)(ex.Plus,{className:"w-4 h-4"})," Create Stack"]})]}),m?(0,t.jsx)(l.Card,{className:"bg-card/70 border-border/50",children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(L.Loader2,{className:"w-8 h-8 mx-auto mb-4 animate-spin text-accent"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading stacks..."})]})}):0===ew.length?(0,t.jsx)(l.Card,{className:"bg-card/70 border-border/50",children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(ec.Layers,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground/50"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Stacks Found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:h?"No stacks match your search":"Create your first stack to get started"}),r&&!h&&(0,t.jsxs)(i.Button,{onClick:()=>b(!0),className:"gap-2",children:[(0,t.jsx)(ex.Plus,{className:"w-4 h-4"})," Create Stack"]})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ew.map(e=>(0,t.jsxs)(l.Card,{className:"bg-card/70 border-border/50 hover:border-accent/50 transition-colors",children:[(0,t.jsxs)(l.CardHeader,{className:"pb-2",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ec.Layers,{className:"w-5 h-5 text-accent"}),(0,t.jsx)(l.CardTitle,{className:"text-base",children:e.name})]}),(e=>{switch(e){case"active":return(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-accent"});case"partial":return(0,t.jsx)(_.AlertCircle,{className:"w-4 h-4 text-primary"});case"stopped":return(0,t.jsx)(ep.XCircle,{className:"w-4 h-4 text-muted-foreground"});case"error":return(0,t.jsx)(ep.XCircle,{className:"w-4 h-4 text-destructive"});case"deploying":return(0,t.jsx)(L.Loader2,{className:"w-4 h-4 text-blue-400 animate-spin"});default:return(0,t.jsx)(_.AlertCircle,{className:"w-4 h-4"})}})(e.status)]}),e.description&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Containers"}),(0,t.jsxs)("span",{className:eb(e.status),children:[e.running_count,"/",e.container_count," running"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status"}),(0,t.jsx)(R.Badge,{variant:"outline",className:"".concat(eb(e.status)," border-current"),children:e.status.toUpperCase()})]}),(0,t.jsx)(em.Separator,{}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)(i.Button,{size:"sm",variant:"ghost",onClick:()=>ev(e),className:"gap-1 flex-1",children:[(0,t.jsx)(ej.Eye,{className:"w-3 h-3"})," View"]}),r&&(0,t.jsxs)(t.Fragment,{children:["stopped"===e.status||"error"===e.status?(0,t.jsxs)(i.Button,{size:"sm",variant:"ghost",onClick:()=>eN(e),className:"gap-1 flex-1 text-accent hover:text-accent",children:[(0,t.jsx)(w.Play,{className:"w-3 h-3"})," Deploy"]}):(0,t.jsxs)(i.Button,{size:"sm",variant:"ghost",onClick:()=>{j(e),ei("stop")},className:"gap-1 flex-1 text-destructive hover:text-destructive",children:[(0,t.jsx)(y.Square,{className:"w-3 h-3"})," Stop"]}),(0,t.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>ef(e),className:"gap-1",children:(0,t.jsx)(eh.Edit,{className:"w-3 h-3"})}),(0,t.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>{j(e),T(!0)},className:"gap-1 text-destructive hover:text-destructive",children:(0,t.jsx)(k.Trash2,{className:"w-3 h-3"})})]})]})]})]},e.id))}),(0,t.jsx)(U.Dialog,{open:N,onOpenChange:b,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(ec.Layers,{className:"w-5 h-5"}),"Create New Stack"]}),(0,t.jsx)(U.DialogDescription,{children:"Define a new stack using a Docker Compose file"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"name",children:"Stack Name"}),(0,t.jsx)(c.Input,{id:"name",value:E,onChange:e=>z(e.target.value),placeholder:"my-stack"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(c.Input,{id:"description",value:A,onChange:e=>O(e.target.value),placeholder:"Optional description"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"compose",children:"Docker Compose (YAML)"}),(0,t.jsx)("textarea",{id:"compose",value:H,onChange:e=>M(e.target.value),className:"w-full h-64 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",placeholder:"version: '3.8'..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"env",children:"Environment Variables (.env)"}),(0,t.jsx)("textarea",{id:"env",value:V,onChange:e=>J(e.target.value),className:"w-full h-24 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",placeholder:"KEY=value"})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:ea,disabled:!E||!H,children:"Create Stack"})]})]})}),(0,t.jsx)(U.Dialog,{open:C,onOpenChange:S,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(eh.Edit,{className:"w-5 h-5"}),"Edit Stack: ",null==p?void 0:p.name]}),(0,t.jsx)(U.DialogDescription,{children:"Modify the stack configuration. Changes require redeployment."})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-name",children:"Stack Name"}),(0,t.jsx)(c.Input,{id:"edit-name",value:E,onChange:e=>z(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-description",children:"Description"}),(0,t.jsx)(c.Input,{id:"edit-description",value:A,onChange:e=>O(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-compose",children:"Docker Compose (YAML)"}),(0,t.jsx)("textarea",{id:"edit-compose",value:H,onChange:e=>M(e.target.value),className:"w-full h-64 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-env",children:"Environment Variables (.env)"}),(0,t.jsx)("textarea",{id:"edit-env",value:V,onChange:e=>J(e.target.value),className:"w-full h-24 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none"})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:er,children:"Save Changes"})]})]})}),(0,t.jsx)(U.Dialog,{open:B,onOpenChange:e=>!G&&F(e),children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Play,{className:"w-5 h-5"}),"Deploy Stack: ",null==p?void 0:p.name]}),(0,t.jsx)(U.DialogDescription,{children:"Deploy the stack to start all containers"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[G&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Deploying..."}),(0,t.jsxs)("span",{className:"text-accent",children:[Z,"%"]})]}),(0,t.jsx)(ed.Progress,{value:Z,className:"h-2"})]}),(0,t.jsx)("div",{ref:Q,className:"bg-muted/50 border border-border rounded-lg p-4 h-64 overflow-y-auto font-mono text-xs",children:0===K.length?(0,t.jsx)("span",{className:"text-muted-foreground",children:G?"Starting deployment...":"Ready to deploy"}):K.map((e,s)=>(0,t.jsx)("div",{className:"text-foreground/80 whitespace-pre-wrap",children:e},s))})]}),(0,t.jsxs)(U.DialogFooter,{children:[!G&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:el,className:"gap-2",children:[(0,t.jsx)(w.Play,{className:"w-4 h-4"})," Deploy"]})]}),G&&100===Z&&(0,t.jsx)(i.Button,{onClick:()=>F(!1),children:"Close"})]})]})}),(0,t.jsx)(U.Dialog,{open:D,onOpenChange:T,children:(0,t.jsxs)(U.DialogContent,{children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(k.Trash2,{className:"w-5 h-5"}),"Delete Stack"]}),(0,t.jsxs)(U.DialogDescription,{children:['Are you sure you want to delete "',null==p?void 0:p.name,'"? This will stop and remove all containers in the stack.']})]}),(0,t.jsxs)(U.DialogFooter,{className:"gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{variant:"destructive",onClick:()=>en(!1),children:"Delete"}),(0,t.jsx)(i.Button,{variant:"destructive",onClick:()=>en(!0),children:"Delete + Volumes"})]})]})}),(0,t.jsx)(U.Dialog,{open:I,onOpenChange:P,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsx)(U.DialogHeader,{children:(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Box,{className:"w-5 h-5"}),"Stack Containers: ",null==p?void 0:p.name]})}),(0,t.jsx)("div",{className:"space-y-2 py-4",children:0===g.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No containers running in this stack"}):g.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:["running"===e.status?(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-accent"}):(0,t.jsx)(ep.XCircle,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.service}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.image})]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.ports.map(e=>"".concat(e.host_port,":").concat(e.container_port)).join(", ")})]},e.name))}),(0,t.jsx)(U.DialogFooter,{children:(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>P(!1),children:"Close"})})]})})]}):(0,t.jsx)(l.Card,{className:"bg-card/70 border-border/50",children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(_.AlertCircle,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"podman-compose Not Available"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"podman-compose is required to manage stacks. Install it to enable this feature."})]})})}let eN=s.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-y",a),ref:s,...r})});eN.displayName="Textarea";var ev=e.i(71435);let eb=(0,X.default)("file-code-corner",[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]]),ew=(0,X.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var ey=e.i(69074),eC=e.i(84614),ek=e.i(81399);function eS(e){let{token:a,isAdmin:r}=e,[n,o]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(""),[u,p]=(0,s.useState)(null),[j,g]=(0,s.useState)(!1),[f,N]=(0,s.useState)(!1),[w,y]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[I,_]=(0,s.useState)(""),[P,E]=(0,s.useState)(""),[z,A]=(0,s.useState)("1.0.0"),[O,H]=(0,s.useState)('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),[M,V]=(0,s.useState)(""),[J,X]=(0,s.useState)(""),[K,Y]=(0,s.useState)(""),[Z,$]=(0,s.useState)({}),[Q,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(""),ea=(0,s.useCallback)(async()=>{try{let e=await fetch("/api/templates",{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let t=await e.json();o(t||[])}}catch(e){console.error("Failed to fetch templates:",e)}finally{m(!1)}},[a]);(0,s.useEffect)(()=>{ea()},[ea]);let er=()=>{_(""),E(""),A("1.0.0"),H('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),V(""),X("")},en=e=>{let t={};return e.split("\n").forEach(e=>{let s=e.trim();if(s&&!s.startsWith("#")){let[e,...a]=s.split("=");e&&(t[e.trim()]=a.join("=").trim())}}),t},ec=e=>e.split(",").map(e=>e.trim()).filter(e=>e.length>0),eo=async()=>{if(!I||!O)return void eg.toast.error("Validation Error",{description:"Name and compose content are required"});try{let e=await fetch("/api/templates",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:I,description:P,version:z,compose_content:O,env_defaults:en(M),tags:ec(J)})});if(e.ok)eg.toast.success("Template Created",{description:'Template "'.concat(I,'" created successfully')}),g(!1),er(),ea();else{let t=await e.json();eg.toast.error("Failed to create template",{description:t.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to create template",{description:e instanceof Error?e.message:"Unknown error"})}},ed=async()=>{if(u)try{let e=await fetch("/api/templates/".concat(u.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:I||u.name,description:P,version:z,compose_content:O,env_defaults:en(M),tags:ec(J)})});if(e.ok)eg.toast.success("Template Updated",{description:'Template "'.concat(u.name,'" updated successfully')}),N(!1),ea();else{let t=await e.json();eg.toast.error("Failed to update template",{description:t.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to update template",{description:e instanceof Error?e.message:"Unknown error"})}},em=async()=>{if(u)try{let e=await fetch("/api/templates/".concat(u.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(e.ok)eg.toast.success("Template Deleted",{description:'Template "'.concat(u.name,'" deleted successfully')}),y(!1),p(null),ea();else{let t=await e.json();eg.toast.error("Failed to delete template",{description:t.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to delete template",{description:e instanceof Error?e.message:"Unknown error"})}},ep=async()=>{if(u){ee(!0);try{let e=await fetch("/api/templates/".concat(u.id,"/deploy"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({project_name:K,environment:Z})}),t=await e.json();e.ok?(eg.toast.success("Stack Created from Template",{description:'Stack "'.concat(K||u.name,'" created. Go to Stacks tab to deploy it.')}),S(!1),Y(""),$({})):eg.toast.error("Failed to deploy template",{description:t.error||"Unknown error"})}catch(e){eg.toast.error("Failed to deploy template",{description:e instanceof Error?e.message:"Unknown error"})}finally{ee(!1)}}},ej=async e=>{try{let t=await fetch("/api/templates/".concat(e.id,"/export"),{headers:{Authorization:"Bearer ".concat(a)}});if(t.ok){let s=await t.json(),a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="".concat(e.name,".json"),n.click(),URL.revokeObjectURL(r),eg.toast.success("Template Exported",{description:'Template "'.concat(e.name,'" exported successfully')})}else eg.toast.error("Failed to export template")}catch(e){eg.toast.error("Failed to export template",{description:e instanceof Error?e.message:"Unknown error"})}},ef=async e=>{try{let t=await fetch("/api/templates/".concat(e.id,"/export"),{headers:{Authorization:"Bearer ".concat(a)}});if(t.ok){let e=await t.json();await navigator.clipboard.writeText(JSON.stringify(e,null,2)),eg.toast.success("Copied to Clipboard",{description:"Template JSON copied to clipboard"})}}catch(e){eg.toast.error("Failed to copy template",{description:e instanceof Error?e.message:"Unknown error"})}},eS=async()=>{let e;if(!et.trim())return void eg.toast.error("Validation Error",{description:"Please paste template JSON"});try{e=JSON.parse(et)}catch(e){eg.toast.error("Invalid JSON",{description:"Please check the JSON format"});return}try{let t=await fetch("/api/templates/import",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:et});if(t.ok)eg.toast.success("Template Imported",{description:'Template "'.concat(e.name,'" imported successfully')}),T(!1),es(""),ea();else{let e=await t.json();eg.toast.error("Failed to import template",{description:e.error||"Unknown error"})}}catch(e){eg.toast.error("Failed to import template",{description:e instanceof Error?e.message:"Unknown error"})}},eD=e=>{if(p(e),_(e.name),E(e.description),A(e.version),H(e.compose_content),e.env_defaults)try{let t=JSON.parse(e.env_defaults);V(Object.entries(t).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(s)}).join("\n"))}catch(e){V("")}else V("");if(e.tags)try{let t=JSON.parse(e.tags);X(t.join(", "))}catch(e){X("")}else X("");N(!0)},eT=e=>{if(p(e),Y(""),e.env_defaults)try{let t=JSON.parse(e.env_defaults);$(t)}catch(e){$({})}else $({});S(!0)},eB=n.filter(e=>{let t=x.toLowerCase();return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)}),eF=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),eI=e=>{if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}};return d?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(L.Loader2,{className:"w-8 h-8 animate-spin text-accent"})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search templates...",value:x,onChange:e=>h(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),r&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>T(!0),className:"gap-2",children:[(0,t.jsx)(ey.Upload,{className:"w-4 h-4"})," Import"]}),(0,t.jsxs)(i.Button,{onClick:()=>{er(),g(!0)},className:"gap-2",children:[(0,t.jsx)(ex.Plus,{className:"w-4 h-4"})," New Template"]})]})]}),0===eB.length?(0,t.jsx)(l.Card,{className:"border-border/50 bg-card/70",children:(0,t.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(eb,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Templates"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:x?"No templates match your search":"Save your container configurations as reusable templates"}),r&&!x&&(0,t.jsxs)(i.Button,{onClick:()=>{er(),g(!0)},className:"gap-2",children:[(0,t.jsx)(ex.Plus,{className:"w-4 h-4"})," Create First Template"]})]})}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:eB.map(e=>(0,t.jsxs)(l.Card,{className:"border-border/50 bg-card/70 hover:bg-card/90 transition-colors cursor-pointer",onClick:()=>{p(e),F(!0)},children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eb,{className:"w-5 h-5 text-cyan-400"}),(0,t.jsx)(l.CardTitle,{className:"text-base font-medium",children:e.name})]}),(0,t.jsxs)(R.Badge,{variant:"outline",className:"text-xs",children:["v",e.version||"1.0"]})]})}),(0,t.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description||"No description"}),eI(e.tags).length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[eI(e.tags).slice(0,3).map(e=>(0,t.jsxs)(R.Badge,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(el.Tag,{className:"w-3 h-3 mr-1"}),e]},e)),eI(e.tags).length>3&&(0,t.jsxs)(R.Badge,{variant:"secondary",className:"text-xs",children:["+",eI(e.tags).length-3]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t border-border/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(eC.User,{className:"w-3 h-3"}),e.author]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.Box,{className:"w-3 h-3"}),e.usage_count," deploys"]})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(ei,{className:"w-3 h-3"}),eF(e.created_at)]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",onClick:e=>e.stopPropagation(),children:[r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>eT(e),className:"flex-1 gap-1",children:[(0,t.jsx)(ew,{className:"w-3 h-3"})," Deploy"]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>eD(e),children:(0,t.jsx)(eh.Edit,{className:"w-3 h-3"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>ej(e),children:(0,t.jsx)(G.Download,{className:"w-3 h-3"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>ef(e),children:(0,t.jsx)(b.Copy,{className:"w-3 h-3"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{p(e),y(!0)},className:"text-destructive hover:text-destructive",children:(0,t.jsx)(k.Trash2,{className:"w-3 h-3"})})]}),!r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>ej(e),className:"gap-1",children:[(0,t.jsx)(G.Download,{className:"w-3 h-3"})," Export"]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>ef(e),children:(0,t.jsx)(b.Copy,{className:"w-3 h-3"})})]})]})]})]},e.id))}),(0,t.jsx)(U.Dialog,{open:j,onOpenChange:g,children:(0,t.jsxs)(U.DialogContent,{className:"max-w-2xl max-h-[90vh]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(eb,{className:"w-5 h-5 text-cyan-400"}),"Create Template"]}),(0,t.jsx)(U.DialogDescription,{children:"Save a container configuration as a reusable template"})]}),(0,t.jsx)(ev.ScrollArea,{className:"max-h-[60vh]",children:(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"name",children:"Name *"}),(0,t.jsx)(c.Input,{id:"name",value:I,onChange:e=>_(e.target.value),placeholder:"my-app-template",className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"version",children:"Version"}),(0,t.jsx)(c.Input,{id:"version",value:z,onChange:e=>A(e.target.value),placeholder:"1.0.0",className:"bg-background/50"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(eN,{id:"description",value:P,onChange:e=>E(e.target.value),placeholder:"Describe what this template does...",rows:2,className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"compose",children:"Docker Compose Content *"}),(0,t.jsx)(eN,{id:"compose",value:O,onChange:e=>H(e.target.value),placeholder:"version: '3.8'\\nservices:\\n  ...",rows:12,className:"font-mono text-sm bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"env",children:"Environment Variables (KEY=value, one per line)"}),(0,t.jsx)(eN,{id:"env",value:M,onChange:e=>V(e.target.value),placeholder:"DATABASE_URL=postgres://localhost/db API_KEY=",rows:4,className:"font-mono text-sm bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"tags",children:"Tags (comma-separated)"}),(0,t.jsx)(c.Input,{id:"tags",value:J,onChange:e=>X(e.target.value),placeholder:"web, database, monitoring",className:"bg-background/50"})]})]})}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:eo,className:"gap-2",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4"})," Create Template"]})]})]})}),(0,t.jsx)(U.Dialog,{open:f,onOpenChange:N,children:(0,t.jsxs)(U.DialogContent,{className:"max-w-2xl max-h-[90vh]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(eh.Edit,{className:"w-5 h-5 text-cyan-400"}),"Edit Template"]}),(0,t.jsx)(U.DialogDescription,{children:"Update template configuration"})]}),(0,t.jsx)(ev.ScrollArea,{className:"max-h-[60vh]",children:(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-name",children:"Name"}),(0,t.jsx)(c.Input,{id:"edit-name",value:I,onChange:e=>_(e.target.value),className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-version",children:"Version"}),(0,t.jsx)(c.Input,{id:"edit-version",value:z,onChange:e=>A(e.target.value),className:"bg-background/50"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-description",children:"Description"}),(0,t.jsx)(eN,{id:"edit-description",value:P,onChange:e=>E(e.target.value),rows:2,className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-compose",children:"Docker Compose Content"}),(0,t.jsx)(eN,{id:"edit-compose",value:O,onChange:e=>H(e.target.value),rows:12,className:"font-mono text-sm bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-env",children:"Environment Variables"}),(0,t.jsx)(eN,{id:"edit-env",value:M,onChange:e=>V(e.target.value),rows:4,className:"font-mono text-sm bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-tags",children:"Tags"}),(0,t.jsx)(c.Input,{id:"edit-tags",value:J,onChange:e=>X(e.target.value),className:"bg-background/50"})]})]})}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:ed,className:"gap-2",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4"})," Save Changes"]})]})]})}),(0,t.jsx)(U.Dialog,{open:w,onOpenChange:y,children:(0,t.jsxs)(U.DialogContent,{children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(k.Trash2,{className:"w-5 h-5"}),"Delete Template"]}),(0,t.jsxs)(U.DialogDescription,{children:["Are you sure you want to delete ",(0,t.jsx)("strong",{children:null==u?void 0:u.name}),"? This action cannot be undone."]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{variant:"destructive",onClick:em,children:"Delete Template"})]})]})}),(0,t.jsx)(U.Dialog,{open:C,onOpenChange:S,children:(0,t.jsxs)(U.DialogContent,{className:"max-w-lg",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(ew,{className:"w-5 h-5 text-cyan-400"}),"Deploy Template"]}),(0,t.jsxs)(U.DialogDescription,{children:["Create a new stack from ",(0,t.jsx)("strong",{children:null==u?void 0:u.name})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"project-name",children:"Project Name (optional)"}),(0,t.jsx)(c.Input,{id:"project-name",value:K,onChange:e=>Y(e.target.value),placeholder:"".concat((null==u?void 0:u.name)||"project","-").concat(new Date().toISOString().slice(0,10)),className:"bg-background/50"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate a unique name"})]}),Object.keys(Z).length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{children:"Environment Variables"}),(0,t.jsx)(ev.ScrollArea,{className:"max-h-48",children:(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(Z).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.Input,{value:s,disabled:!0,className:"w-1/3 bg-background/30 text-muted-foreground text-sm"}),(0,t.jsx)(c.Input,{value:a,onChange:e=>$(t=>({...t,[s]:e.target.value})),placeholder:"value",className:"bg-background/50 text-sm"})]},s)})})})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:ep,disabled:Q,className:"gap-2",children:[Q?(0,t.jsx)(L.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(ew,{className:"w-4 h-4"}),Q?"Creating...":"Create Stack"]})]})]})}),(0,t.jsx)(U.Dialog,{open:D,onOpenChange:T,children:(0,t.jsxs)(U.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(ey.Upload,{className:"w-5 h-5 text-cyan-400"}),"Import Template"]}),(0,t.jsx)(U.DialogDescription,{children:"Paste exported template JSON to import"})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(eN,{value:et,onChange:e=>es(e.target.value),placeholder:'{"name": "my-template", "compose_content": "...", ...}',rows:12,className:"font-mono text-sm bg-background/50"})}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,t.jsxs)(i.Button,{onClick:eS,className:"gap-2",children:[(0,t.jsx)(ey.Upload,{className:"w-4 h-4"})," Import"]})]})]})}),(0,t.jsx)(U.Dialog,{open:B,onOpenChange:F,children:(0,t.jsxs)(U.DialogContent,{className:"max-w-3xl max-h-[90vh]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(ek.FileJson,{className:"w-5 h-5 text-cyan-400"}),null==u?void 0:u.name,(0,t.jsxs)(R.Badge,{variant:"outline",className:"ml-2",children:["v",(null==u?void 0:u.version)||"1.0"]})]}),(0,t.jsx)(U.DialogDescription,{children:(null==u?void 0:u.description)||"No description"})]}),(0,t.jsx)(ev.ScrollArea,{className:"max-h-[60vh]",children:(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground pb-4 border-b border-border/50",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(eC.User,{className:"w-4 h-4"}),"Author: ",null==u?void 0:u.author]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(ei,{className:"w-4 h-4"}),"Created: ",u?eF(u.created_at):""]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.Box,{className:"w-4 h-4"}),"Used ",null==u?void 0:u.usage_count," times"]})]}),u&&eI(u.tags).length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:eI(u.tags).map(e=>(0,t.jsxs)(R.Badge,{variant:"secondary",children:[(0,t.jsx)(el.Tag,{className:"w-3 h-3 mr-1"}),e]},e))}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{className:"text-sm font-medium",children:"Compose File"}),(0,t.jsx)("pre",{className:"p-4 rounded-lg bg-background/50 border border-border/50 overflow-x-auto text-sm font-mono whitespace-pre",children:null==u?void 0:u.compose_content})]}),(null==u?void 0:u.env_defaults)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{className:"text-sm font-medium",children:"Default Environment Variables"}),(0,t.jsx)("pre",{className:"p-4 rounded-lg bg-background/50 border border-border/50 overflow-x-auto text-sm font-mono",children:(()=>{try{let e=JSON.parse(u.env_defaults);return Object.entries(e).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(s)}).join("\n")}catch(e){return u.env_defaults}})()})]})]})}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>F(!1),children:"Close"}),r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>{F(!1),u&&eD(u)},className:"gap-2",children:[(0,t.jsx)(eh.Edit,{className:"w-4 h-4"})," Edit"]}),(0,t.jsxs)(i.Button,{onClick:()=>{F(!1),u&&eT(u)},className:"gap-2",children:[(0,t.jsx)(ew,{className:"w-4 h-4"})," Deploy"]})]})]})]})})]})}var eD=e.i(73708),eT=e.i(3116),eB=e.i(48256),eF=e.i(75505);let eI=(0,X.default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),e_=(0,X.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function eL(){var e;let{isAuthenticated:m,isLoading:x,token:h,user:u}=(0,r.useAuth)(),{settings:p,updateContainerSettings:j}=(0,n.useSettings)(),g=(0,a.useRouter)(),[f,N]=(0,s.useState)(""),[b,S]=(0,s.useState)(!1),[P,z]=(0,s.useState)(null),A=(null==u?void 0:u.role)==="admin"||(null==u?void 0:u.role)==="operator"||(null==u?void 0:u.is_pam_admin),[O,R]=(0,s.useState)(""),[X,K]=(0,s.useState)(!1),[Y,$]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(""),[ea,en]=(0,s.useState)(0),[el,ei]=(0,s.useState)([]),[em,eh]=(0,s.useState)(null),[ej,eg]=(0,s.useState)(!1),eN=(0,s.useRef)(null),[ev,ew]=(0,s.useState)([]),[ey,eC]=(0,s.useState)([]),[ek,eL]=(0,s.useState)([]),[eP,eE]=(0,s.useState)([]),[eU,ez]=(0,s.useState)([]),[eA,eO]=(0,s.useState)(""),[eR,eH]=(0,s.useState)("all"),[eM,eW]=(0,s.useState)(null),[eV,eJ]=(0,s.useState)(null),[eG,eq]=(0,s.useState)("containers"),[eX,eK]=(0,s.useState)(!1),[eY,eZ]=(0,s.useState)(null),[e$,eQ]=(0,s.useState)(null),[e0,e4]=(0,s.useState)(null),[e2,e1]=(0,s.useState)(null),[e5,e3]=(0,s.useState)(null),[e8,e6]=(0,s.useState)(!1),[e7,e9]=(0,s.useState)(""),[te,tt]=(0,s.useState)(!1),[ts,ta]=(0,s.useState)(null),[tr,tn]=(0,s.useState)(""),[tl,ti]=(0,s.useState)(!1),[tc,to]=(0,s.useState)(null),[td,tm]=(0,s.useState)(!1),[tx,th]=(0,s.useState)(null),[tu,tp]=(0,s.useState)({hasWebUI:!1,webUIPort:"",webUIPath:"/",icon:"",autoStart:!1}),[tj,tg]=(0,s.useState)(!1),[tf,tN]=(0,s.useState)(!1),[tv,tb]=(0,s.useState)(null),[tw,ty]=(0,s.useState)({hasWebUI:!1,webUIPort:"",webUIPath:"/",icon:"",autoStart:!1}),[tC,tk]=(0,s.useState)(!1),[tS,tD]=(0,s.useState)({name:"",image:"",ports:"",volumes:"",environment:"",restart_policy:"no"}),tT=(null==u?void 0:u.role)==="admin",tB=(0,s.useCallback)(async()=>{if(h)try{let e=await fetch("/api/containers/check",{headers:{Authorization:"Bearer ".concat(h)}}),t=await e.json();z(t.available),R(t.version||""),K(t.compose_available||!1)}catch(e){z(!1)}},[h]),tF=(0,s.useCallback)(async()=>{if(h&&tT)try{let e=await fetch("/api/storage-config",{headers:{Authorization:"Bearer ".concat(h)}});if(e.ok){let t=await e.json();ta(t),tn(t.graph_root)}}catch(e){}},[h,tT]),tI=async()=>{if(h&&tr){ti(!0),to(null);try{let e=await fetch("/api/storage-config",{method:"PUT",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({graph_root:tr})}),t=await e.json();if(!e.ok)return void to(t.error||"Failed to update storage location");await tF(),await Promise.all([t_(),tP()])}catch(e){to("Failed to update storage location")}finally{ti(!1)}}},t_=(0,s.useCallback)(async()=>{if(h)try{let e=await fetch("/api/containers",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch containers");let t=await e.json();ew(t||[]),eW(null)}catch(e){eW(e instanceof Error?e.message:"Failed to load containers")}},[h]),tL=(0,s.useCallback)(async()=>{if(h)try{let e=await fetch("/api/images",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch images");let t=await e.json();eC(t||[])}catch(e){console.error("Failed to load images:",e)}},[h]),tP=(0,s.useCallback)(async()=>{if(h)try{let e=await fetch("/api/volumes",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch volumes");let t=await e.json();eL(t||[])}catch(e){console.error("Failed to load volumes:",e)}},[h]),tE=(0,s.useCallback)(async()=>{if(h)try{let e=await fetch("/api/bind-mounts",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch bind mounts");let t=await e.json();eE(t||[])}catch(e){console.error("Failed to load bind mounts:",e)}},[h]),tU=(0,s.useCallback)(async()=>{if(h)try{let e=await fetch("/api/podman-networks",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch networks");let t=await e.json();ez(t||[])}catch(e){console.error("Failed to load networks:",e)}},[h]);if((0,s.useEffect)(()=>{x||m?x||!m||A||g.push("/dashboard"):g.push("/login")},[m,x,A,g]),(0,s.useEffect)(()=>{let e=()=>{N(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,s.useEffect)(()=>{if(m&&h){tB(),t_(),tL(),tP(),tE(),tU(),tF();let e=setInterval(()=>{t_()},5e3);return()=>clearInterval(e)}},[m,h,tB,t_,tL,tP,tE,tU,tF]),x||!m||!A)return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)(v.Box,{className:"w-12 h-12 text-accent animate-pulse"})});let tz=ev.filter(e=>{let t=e.name.toLowerCase().includes(eA.toLowerCase())||e.image.toLowerCase().includes(eA.toLowerCase()),s="all"===eR||e.status===eR;return t&&s}),tA=ev.filter(e=>"running"===e.status).length,tO=ev.filter(e=>"exited"===e.status||"stopped"===e.status).length,tR=async(e,t)=>{if(h&&("remove"!==t||confirm("Are you sure you want to remove this container?"))){eJ(e);try{let s="remove"===t?"/api/containers/".concat(e,"?force=true"):"/api/containers/".concat(e,"/").concat(t),a=await fetch(s,{method:"remove"===t?"DELETE":"POST",headers:{Authorization:"Bearer ".concat(h)}});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to ".concat(t," container"))}await t_()}catch(e){alert(e instanceof Error?e.message:"Failed to ".concat(t," container"))}finally{eJ(null)}}},tH=e=>e.id&&""!==e.id&&e.id!==e.container_id,tM=async()=>{if(h&&tx){tg(!0);try{let e=await fetch("/api/containers/adopt",{method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({container_id:tx.container_id,has_web_ui:tu.hasWebUI,web_ui_port:tu.hasWebUI&&parseInt(tu.webUIPort)||0,web_ui_path:tu.webUIPath||"/",icon:tu.icon,auto_start:tu.autoStart})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"Failed to adopt container")}tm(!1),th(null),await t_(),alert('Container "'.concat(tx.name,'" adopted successfully!'))}catch(e){alert(e instanceof Error?e.message:"Failed to adopt container")}finally{tg(!1)}}},tW=async e=>{if(h)try{let t=await fetch("/api/containers/".concat(e.container_id),{headers:{Authorization:"Bearer ".concat(h)}}),s=await t.json();tb(e),ty({hasWebUI:s.has_web_ui||!1,webUIPort:s.web_ui_port?String(s.web_ui_port):"",webUIPath:s.web_ui_path||"/",icon:s.icon||"",autoStart:s.auto_start||!1}),tN(!0)}catch(e){alert("Failed to load container details")}},tV=async()=>{if(h&&tv){tk(!0);try{let e=await fetch("/api/containers/".concat(tv.container_id),{method:"PUT",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({has_web_ui:tw.hasWebUI,web_ui_port:tw.hasWebUI&&parseInt(tw.webUIPort)||0,web_ui_path:tw.webUIPath||"/",icon:tw.icon,auto_start:tw.autoStart})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"Failed to update container")}tN(!1),tb(null),await t_(),alert('Container "'.concat(tv.name,'" updated successfully!'))}catch(e){alert(e instanceof Error?e.message:"Failed to update container")}finally{tk(!1)}}},tJ=async()=>{if(h&&tS.name&&tS.image){eJ("create");try{let e=tS.ports?tS.ports.split(",").map(e=>{let[t,s]=e.trim().split(":");return{host_port:parseInt(t),container_port:parseInt(s),protocol:"tcp"}}):[],t=tS.volumes?tS.volumes.split(",").map(e=>{let[t,s]=e.trim().split(":");return{source:t,target:s,type:"bind"}}):[],s={};tS.environment&&tS.environment.split(",").forEach(e=>{let[t,...a]=e.trim().split("=");s[t]=a.join("=")});let a=await fetch("/api/containers",{method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({name:tS.name,image:tS.image,ports:e,volumes:t,environment:s,restart_policy:tS.restart_policy,auto_start:!0})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to create container")}eK(!1),tD({name:"",image:"",ports:"",volumes:"",environment:"",restart_policy:"no"}),await t_()}catch(e){alert(e instanceof Error?e.message:"Failed to create container")}finally{eJ(null)}}},tG=async e=>{if(h&&confirm("Are you sure you want to remove this volume?"))try{let t=await fetch("/api/volumes/".concat(e,"?force=true"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(h)}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Failed to remove volume")}await tP()}catch(e){alert(e instanceof Error?e.message:"Failed to remove volume")}},tq=async()=>{if(h&&e7.trim()){tt(!0);try{let e=await fetch("/api/volumes",{method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({name:e7.trim()})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"Failed to create volume")}e6(!1),e9(""),await tP()}catch(e){alert(e instanceof Error?e.message:"Failed to create volume")}finally{tt(!1)}}},tX=e=>{e3(e),e1(e.container_id)};return!1===P?(0,t.jsxs)(o.DashboardLayout,{title:"CONTAINER MANAGER",time:f,children:[(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)(l.Card,{className:"border-amber-500/50 bg-card/70 max-w-2xl mx-auto",children:[(0,t.jsxs)(l.CardHeader,{className:"text-center pb-2",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 rounded-2xl bg-amber-500/20 border border-amber-500/40 flex items-center justify-center mb-4",children:(0,t.jsx)(er.Package,{className:"w-8 h-8 text-amber-500"})}),(0,t.jsx)(l.CardTitle,{className:"text-xl",children:"Podman Not Installed"})]}),(0,t.jsxs)(l.CardContent,{className:"text-center space-y-6",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Podman is required for container management but is not currently installed on this system. Install Podman to create and manage containers, images, volumes, and networks."}),(0,t.jsxs)("div",{className:"bg-background/50 rounded-lg p-4 text-left",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-foreground mb-3",children:"What will be installed:"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-accent"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"EPEL Release"})," - Required repository for Podman packages"]})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-accent"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"Podman"})," - Container engine (Docker-compatible)"]})]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-accent"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"Podman Compose"})," - Docker Compose compatibility layer"]})]})]})]}),tT?(0,t.jsxs)(i.Button,{size:"lg",onClick:()=>{$(!0),ee(!0),es(""),en(0),ei([]),eh(null),eg(!1);let e="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/containers/install?token=").concat(encodeURIComponent(h||"")));t.onmessage=e=>{try{let t=JSON.parse(e.data);if(t.complete){if(ee(!1),t.success)eg(!0),R(t.version||""),en(100),ei(e=>[...e,"Podman v".concat(t.version," installed successfully!")]);else{let e="string"==typeof t.error?t.error:"Installation failed";eh(e)}return}t.step&&(es(t.step),en({epel:25,podman:50,compose:75,verify:90}[t.step]||0)),t.message&&ei(e=>[...e,t.message]),t.output&&ei(e=>[...e,t.output]),eN.current&&(eN.current.scrollTop=eN.current.scrollHeight)}catch(e){}},t.onerror=()=>{ee(!1),eh("WebSocket connection failed")},t.onclose=()=>{Q&&ee(!1)}},className:"gap-2 px-8",children:[(0,t.jsx)(G.Download,{className:"w-5 h-5"}),"Install Podman"]}):(0,t.jsxs)("div",{className:"text-sm text-muted-foreground bg-muted/50 rounded-lg p-4",children:[(0,t.jsx)(_.AlertCircle,{className:"w-4 h-4 inline mr-2"}),"Administrator privileges required to install Podman. Please contact your system administrator."]})]})]})}),(0,t.jsx)(U.Dialog,{open:Y,onOpenChange:e=>!Q&&$(e),children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsx)(U.DialogTitle,{className:"flex items-center gap-2",children:Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Loader2,{className:"w-5 h-5 animate-spin text-accent"}),"Installing Podman..."]}):ej?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-5 h-5 text-green-500"}),"Installation Complete"]}):em?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ep.XCircle,{className:"w-5 h-5 text-destructive"}),"Installation Failed"]}):"Podman Installation"}),(0,t.jsx)(U.DialogDescription,{children:Q?"Please wait while Podman and related packages are being installed...":ej?"Podman v".concat(O," has been successfully installed."):em||"Ready to install Podman"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground capitalize",children:et||"Preparing..."}),(0,t.jsxs)("span",{className:"text-accent",children:[ea,"%"]})]}),(0,t.jsx)(ed.Progress,{value:ea,className:"h-2"})]}),(0,t.jsx)("div",{ref:eN,className:"bg-muted/50 border border-border rounded-lg p-4 h-64 overflow-y-auto font-mono text-xs",children:0===el.length?(0,t.jsx)("span",{className:"text-muted-foreground",children:"Waiting for installation output..."}):el.map((e,s)=>(0,t.jsx)("div",{className:"text-foreground/80 whitespace-pre-wrap",children:e},s))})]}),(0,t.jsx)(U.DialogFooter,{children:!Q&&(0,t.jsx)(i.Button,{onClick:()=>{$(!1),ej&&(z(!0),tB())},children:ej?"Continue to Container Manager":"Close"})})]})})]}):(0,t.jsxs)(o.DashboardLayout,{title:"CONTAINER MANAGER",time:f,children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Containers"}),(0,t.jsx)(v.Box,{className:"w-4 h-4 text-accent"})]}),(0,t.jsxs)(l.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:ev.length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[tA," running, ",tO," stopped"]})]})]}),(0,t.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Running"}),(0,t.jsx)(w.Play,{className:"w-4 h-4 text-primary"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:tA})})]}),(0,t.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Images"}),(0,t.jsx)(eD.Image,{className:"w-4 h-4 text-accent"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:ey.length})})]}),(0,t.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Volumes"}),(0,t.jsx)(F.HardDrive,{className:"w-4 h-4 text-accent"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:ek.length})})]}),(0,t.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Networks"}),(0,t.jsx)(B.Network,{className:"w-4 h-4 text-accent"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:eU.length})})]})]}),O&&(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-3 h-3 text-green-500"}),"Podman v",O]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[X?(0,t.jsx)(eu.CheckCircle2,{className:"w-3 h-3 text-green-500"}):(0,t.jsx)(ep.XCircle,{className:"w-3 h-3 text-muted-foreground"}),"podman-compose ",X?"available":"not installed"]})]}),(0,t.jsxs)(d.Tabs,{value:eG,onValueChange:eq,className:"space-y-4",children:[(0,t.jsxs)(d.TabsList,{className:"bg-card/70 border border-border/50",children:[(0,t.jsxs)(d.TabsTrigger,{value:"containers",className:"gap-2",children:[(0,t.jsx)(v.Box,{className:"w-4 h-4"})," Containers"]}),(0,t.jsxs)(d.TabsTrigger,{value:"images",className:"gap-2",children:[(0,t.jsx)(eD.Image,{className:"w-4 h-4"})," Images"]}),(0,t.jsxs)(d.TabsTrigger,{value:"volumes",className:"gap-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-4 h-4"})," Volumes"]}),(0,t.jsxs)(d.TabsTrigger,{value:"networks",className:"gap-2",children:[(0,t.jsx)(B.Network,{className:"w-4 h-4"})," Networks"]}),(0,t.jsxs)(d.TabsTrigger,{value:"stacks",className:"gap-2",children:[(0,t.jsx)(ec.Layers,{className:"w-4 h-4"})," Stacks"]}),(0,t.jsxs)(d.TabsTrigger,{value:"templates",className:"gap-2",children:[(0,t.jsx)(eb,{className:"w-4 h-4"})," Templates"]})]}),(0,t.jsxs)(d.TabsContent,{value:"containers",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(q.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search containers...",value:eA,onChange:e=>eO(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),(0,t.jsxs)("select",{value:eR,onChange:e=>eH(e.target.value),className:"px-3 py-2 rounded-md bg-card/70 border border-border/50 text-sm",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"running",children:"Running"}),(0,t.jsx)("option",{value:"exited",children:"Stopped"})]})]}),tT&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>S(!0),className:"gap-2",children:[(0,t.jsx)(I.Settings,{className:"w-4 h-4"})," Settings"]}),(0,t.jsxs)(i.Button,{onClick:()=>g.push("/container-create"),className:"gap-2",children:[(0,t.jsx)(ex.Plus,{className:"w-4 h-4"})," Create Container"]})]})]}),eM&&(0,t.jsx)(l.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,t.jsx)(l.CardContent,{className:"py-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:eM})})}),(0,t.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsx)(l.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border/50",children:[(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Image"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Ports"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:0===tz.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"p-8 text-center text-muted-foreground",children:"No containers found"})}):tz.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"running":return(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-primary"});case"exited":case"stopped":return(0,t.jsx)(ep.XCircle,{className:"w-4 h-4 text-muted-foreground"});case"dead":case"error":return(0,t.jsx)(_.AlertCircle,{className:"w-4 h-4 text-destructive"});default:return(0,t.jsx)(eT.Clock,{className:"w-4 h-4 text-yellow-500"})}})(e.status),(0,t.jsx)("span",{className:"font-medium",children:e.name})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:e.container_id.substring(0,12)})]}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"text-sm",children:e.image})}),(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("running"===e.status?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:e.status}),e.uptime&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.uptime})]}),(0,t.jsx)("td",{className:"p-4",children:e.ports&&e.ports.length>0?(0,t.jsx)("div",{className:"space-y-1",children:e.ports.map((e,s)=>(0,t.jsxs)("div",{className:"text-xs font-mono",children:[e.host_port,":",e.container_port,"/",e.protocol]},s))}):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex gap-1",children:["running"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tR(e.container_id,"stop"),disabled:eV===e.container_id,title:"Stop",children:eV===e.container_id?(0,t.jsx)(L.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(y.Square,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tR(e.container_id,"restart"),disabled:eV===e.container_id,title:"Restart",children:(0,t.jsx)(C.RotateCw,{className:"w-4 h-4"})})]}):(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tR(e.container_id,"start"),disabled:eV===e.container_id,title:"Start",children:eV===e.container_id?(0,t.jsx)(L.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(w.Play,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{e3(e),e4(e.container_id)},title:"View Logs",children:(0,t.jsx)(J.FileText,{className:"w-4 h-4"})}),tT&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>g.push("/container-create?edit=".concat(e.container_id)),title:"Edit Container",children:(0,t.jsx)(e_,{className:"w-4 h-4"})}),"running"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{e3(e),eQ(e.container_id)},title:"View Stats",children:(0,t.jsx)(T.Activity,{className:"w-4 h-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tX(e),title:"Open Terminal",children:(0,t.jsx)(D.Terminal,{className:"w-4 h-4"})})]}),e.has_web_ui&&"running"===e.status&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>window.open("/api/containers/".concat(e.container_id,"/proxy/"),"_blank"),title:"Open Web UI",children:(0,t.jsx)(eB.Globe,{className:"w-4 h-4"})}),tT&&!tH(e)&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>(e=>{var t;th(e);let s=null==(t=e.ports)?void 0:t.find(e=>80===e.container_port||443===e.container_port||8080===e.container_port||3e3===e.container_port);tp({hasWebUI:!!s,webUIPort:s?String(s.host_port):"",webUIPath:"/",icon:e.name.split("-")[0].toLowerCase(),autoStart:!1}),tm(!0)})(e),title:"Adopt Container (configure for Stardeck)",className:"text-cyan-400 hover:text-cyan-400",children:(0,t.jsx)(er.Package,{className:"w-4 h-4"})}),tT&&tH(e)&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tW(e),title:"Edit Container Settings",className:"text-amber-400 hover:text-amber-400",children:(0,t.jsx)(e_,{className:"w-4 h-4"})}),tT&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tR(e.container_id,"remove"),disabled:eV===e.container_id,className:"text-destructive hover:text-destructive",title:"Remove",children:(0,t.jsx)(k.Trash2,{className:"w-4 h-4"})})]})})]},e.container_id))})]})})})})]}),(0,t.jsx)(d.TabsContent,{value:"images",className:"space-y-4",children:(0,t.jsx)(eo,{onRefresh:tL})}),(0,t.jsxs)(d.TabsContent,{value:"volumes",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(eF.FolderOpen,{className:"w-5 h-5 text-accent"}),"Bind Mounts"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Host directories mounted into containers"}),(0,t.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsx)(l.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border/50",children:[(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Host Path"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Container Path"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Container"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Mode"})]})}),(0,t.jsx)("tbody",{children:0===eP.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"p-8 text-center text-muted-foreground",children:"No bind mounts found"})}):eP.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 text-sm font-mono text-muted-foreground",children:e.host_path}),(0,t.jsx)("td",{className:"p-4 text-sm font-mono text-muted-foreground",children:e.container_path}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-accent/10 text-accent",children:e.container_name})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.rw?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:e.rw?"RW":"RO"})})]},"".concat(e.container_id,"-").concat(e.host_path,"-").concat(s)))})]})})})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-5 h-5 text-accent"}),"Podman Volumes"]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Managed storage volumes created with Podman"})]}),tT&&(0,t.jsxs)(i.Button,{size:"sm",onClick:()=>e6(!0),children:[(0,t.jsx)(ex.Plus,{className:"w-4 h-4 mr-2"}),"Create Volume"]})]}),(0,t.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsx)(l.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border/50",children:[(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Driver"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Mount Point"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:0===ek.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"p-8 text-center text-muted-foreground",children:"No Podman volumes found"})}):ek.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,t.jsx)("td",{className:"p-4",children:e.driver}),(0,t.jsx)("td",{className:"p-4 text-sm font-mono text-muted-foreground",children:e.mount_point}),(0,t.jsx)("td",{className:"p-4",children:tT&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>tG(e.name),className:"text-destructive hover:text-destructive",title:"Remove",children:(0,t.jsx)(k.Trash2,{className:"w-4 h-4"})})})]},e.name))})]})})})})]})]}),(0,t.jsxs)(d.TabsContent,{value:"networks",className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Podman Networks"}),(0,t.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,t.jsx)(l.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border/50",children:[(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Driver"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Subnet"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Gateway"}),(0,t.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Internal"})]})}),(0,t.jsx)("tbody",{children:0===eU.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"p-8 text-center text-muted-foreground",children:"No networks found"})}):eU.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,t.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,t.jsx)("td",{className:"p-4",children:e.driver}),(0,t.jsx)("td",{className:"p-4 text-sm font-mono",children:e.subnet||"-"}),(0,t.jsx)("td",{className:"p-4 text-sm font-mono",children:e.gateway||"-"}),(0,t.jsx)("td",{className:"p-4",children:e.internal?(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-primary"}):(0,t.jsx)(ep.XCircle,{className:"w-4 h-4 text-muted-foreground"})})]},e.id))})]})})})})]}),(0,t.jsx)(d.TabsContent,{value:"stacks",className:"space-y-4",children:(0,t.jsx)(ef,{token:h||"",isAdmin:tT,composeAvailable:X})}),(0,t.jsx)(d.TabsContent,{value:"templates",className:"space-y-4",children:(0,t.jsx)(eS,{token:h||"",isAdmin:tT})})]})]}),(0,t.jsx)(U.Dialog,{open:eX,onOpenChange:eK,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsx)(U.DialogTitle,{children:"Create Container"}),(0,t.jsx)(U.DialogDescription,{children:"Create a new container from an image."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"name",children:"Container Name"}),(0,t.jsx)(c.Input,{id:"name",placeholder:"my-container",value:tS.name,onChange:e=>tD({...tS,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"image",children:"Image"}),(0,t.jsx)(c.Input,{id:"image",placeholder:"nginx:latest",value:tS.image,onChange:e=>tD({...tS,image:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"ports",children:"Ports (host:container, comma-separated)"}),(0,t.jsx)(c.Input,{id:"ports",placeholder:"8080:80, 443:443",value:tS.ports,onChange:e=>tD({...tS,ports:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"volumes",children:"Volumes (host:container, comma-separated)"}),(0,t.jsx)(c.Input,{id:"volumes",placeholder:"/data:/app/data",value:tS.volumes,onChange:e=>tD({...tS,volumes:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"env",children:"Environment Variables (KEY=value, comma-separated)"}),(0,t.jsx)(c.Input,{id:"env",placeholder:"DEBUG=true, API_KEY=xxx",value:tS.environment,onChange:e=>tD({...tS,environment:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"restart",children:"Restart Policy"}),(0,t.jsxs)("select",{id:"restart",value:tS.restart_policy,onChange:e=>tD({...tS,restart_policy:e.target.value}),className:"w-full px-3 py-2 rounded-md bg-background border border-border text-sm",children:[(0,t.jsx)("option",{value:"no",children:"No"}),(0,t.jsx)("option",{value:"always",children:"Always"}),(0,t.jsx)("option",{value:"on-failure",children:"On Failure"}),(0,t.jsx)("option",{value:"unless-stopped",children:"Unless Stopped"})]})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>eK(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:tJ,disabled:!tS.name||!tS.image||"create"===eV,children:"create"===eV?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Loader2,{className:"w-4 h-4 mr-2 animate-spin"})," Creating..."]}):"Create"})]})]})}),(0,t.jsx)(E,{containerId:e$,onClose:()=>eQ(null),onAction:tR,onOpenTerminal:e=>{let t=ev.find(t=>t.container_id===e);t&&tX(t)},onOpenWebUI:e=>{window.open("/api/containers/".concat(e,"/proxy/"),"_blank")},isAdmin:tT}),(0,t.jsx)(Z,{containerId:e0,containerName:null==e5?void 0:e5.name,onClose:()=>{e4(null),e3(null)}}),(0,t.jsx)(H,{containerId:e2,containerName:null==e5?void 0:e5.name,onClose:()=>{e1(null),e3(null)}}),(0,t.jsx)(U.Dialog,{open:b,onOpenChange:S,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[550px]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(I.Settings,{className:"w-5 h-5 text-accent"}),"Container Settings"]}),(0,t.jsx)(U.DialogDescription,{children:"Configure default settings for container creation"})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-4 h-4 text-accent"}),(0,t.jsx)(W.Label,{className:"font-medium",children:"Podman Storage Location"})]}),ts?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Current location:"}),(0,t.jsx)("code",{className:"font-mono text-xs bg-background px-2 py-1 rounded",children:ts.graph_root})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Storage driver:"}),(0,t.jsx)("span",{className:"text-xs",children:ts.driver})]}),ts.is_default&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Using default Podman storage location"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{className:"text-sm",children:"Change storage location"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.Input,{placeholder:"/mnt/containers/storage",value:tr,onChange:e=>tn(e.target.value),className:"font-mono flex-1",disabled:tl}),(0,t.jsx)(i.Button,{variant:"outline",onClick:tI,disabled:tl||tr===ts.graph_root||!tr,children:tl?(0,t.jsx)(L.Loader2,{className:"w-4 h-4 animate-spin"}):"Apply"})]})]}),tc&&(0,t.jsx)("div",{className:"p-2 bg-destructive/10 border border-destructive/30 rounded text-xs text-destructive",children:tc}),(0,t.jsx)("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:(0,t.jsxs)("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[(0,t.jsx)("strong",{children:"Warning:"})," Changing storage location will reset Podman storage. All existing containers, images, and volumes will be removed. Stop all containers before changing this setting."]})})]}):(0,t.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg text-sm text-muted-foreground",children:"Storage configuration not available. Podman may not be installed."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{children:"Default Restart Policy"}),(0,t.jsxs)(V.Select,{value:p.container.defaultRestartPolicy,onValueChange:e=>j({defaultRestartPolicy:e}),children:[(0,t.jsx)(V.SelectTrigger,{children:(0,t.jsx)(V.SelectValue,{})}),(0,t.jsxs)(V.SelectContent,{children:[(0,t.jsx)(V.SelectItem,{value:"no",children:"No (manual)"}),(0,t.jsx)(V.SelectItem,{value:"always",children:"Always"}),(0,t.jsx)(V.SelectItem,{value:"unless-stopped",children:"Unless Stopped"}),(0,t.jsx)(V.SelectItem,{value:"on-failure",children:"On Failure"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{children:"Default Network Mode"}),(0,t.jsxs)(V.Select,{value:p.container.defaultNetworkMode,onValueChange:e=>j({defaultNetworkMode:e}),children:[(0,t.jsx)(V.SelectTrigger,{children:(0,t.jsx)(V.SelectValue,{})}),(0,t.jsxs)(V.SelectContent,{children:[(0,t.jsx)(V.SelectItem,{value:"bridge",children:"Bridge (isolated)"}),(0,t.jsx)(V.SelectItem,{value:"host",children:"Host (shared)"}),(0,t.jsx)(V.SelectItem,{value:"none",children:"None"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(w.Play,{className:"w-4 h-4 text-green-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(W.Label,{className:"font-medium",children:"Auto-start Containers"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start containers after creation"})]})]}),(0,t.jsx)(M.Switch,{checked:p.container.autoStartContainers,onCheckedChange:e=>j({autoStartContainers:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(eI,{className:"w-4 h-4 text-destructive"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(W.Label,{className:"font-medium",children:"Privileged Mode Default"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Not recommended"})]})]}),(0,t.jsx)(M.Switch,{checked:p.container.enablePrivilegedByDefault,onCheckedChange:e=>j({enablePrivilegedByDefault:e})})]}),p.container.enablePrivilegedByDefault&&(0,t.jsx)("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-xs text-destructive",children:"Privileged containers have full host access. Use with caution."})})]})]}),(0,t.jsx)(U.DialogFooter,{children:(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>S(!1),children:"Done"})})]})}),(0,t.jsx)(U.Dialog,{open:e8,onOpenChange:e6,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[450px]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(F.HardDrive,{className:"w-5 h-5 text-accent"}),"Create Podman Volume"]}),(0,t.jsx)(U.DialogDescription,{children:"Create a managed volume for persistent container storage"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"volume-name",children:"Volume Name"}),(0,t.jsx)(c.Input,{id:"volume-name",placeholder:"my-app-data",value:e7,onChange:e=>e9(e.target.value.replace(/[^a-zA-Z0-9_-]/g,"")),disabled:te}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Only letters, numbers, underscores, and hyphens allowed"})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{children:"Managed by Podman"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{children:"Data persists across container restarts"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(eu.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{children:"Easy backup and migration"})]})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{e6(!1),e9("")},disabled:te,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:tq,disabled:!e7.trim()||te,children:te?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create Volume"})]})]})}),(0,t.jsx)(U.Dialog,{open:td,onOpenChange:tm,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(er.Package,{className:"w-5 h-5 text-cyan-400"}),"Adopt Container"]}),(0,t.jsxs)(U.DialogDescription,{children:["Configure ",(0,t.jsx)("span",{className:"font-mono text-foreground",children:null==tx?void 0:tx.name})," for Stardeck management. This enables desktop icons and web UI proxy."]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(W.Label,{children:"Has Web UI"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable to add desktop icon and proxy"})]}),(0,t.jsx)(M.Switch,{checked:tu.hasWebUI,onCheckedChange:e=>tp(t=>({...t,hasWebUI:e}))})]}),tu.hasWebUI&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"web-ui-port",children:"Web UI Host Port"}),(0,t.jsxs)(V.Select,{value:tu.webUIPort,onValueChange:e=>tp(t=>({...t,webUIPort:e})),children:[(0,t.jsx)(V.SelectTrigger,{children:(0,t.jsx)(V.SelectValue,{placeholder:"Select port"})}),(0,t.jsx)(V.SelectContent,{children:null==tx||null==(e=tx.ports)?void 0:e.map(e=>(0,t.jsxs)(V.SelectItem,{value:String(e.host_port),children:[e.host_port," → ",e.container_port,"/",e.protocol]},e.host_port))})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select the host port that serves the web interface"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"web-ui-path",children:"Web UI Path"}),(0,t.jsx)(c.Input,{id:"web-ui-path",value:tu.webUIPath,onChange:e=>tp(t=>({...t,webUIPath:e.target.value})),placeholder:"/"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:'Path prefix for the web UI (usually "/")'})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"icon-name",children:"Icon Name"}),(0,t.jsx)(c.Input,{id:"icon-name",value:tu.icon,onChange:e=>tp(t=>({...t,icon:e.target.value})),placeholder:"gitea, nextcloud, etc."}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used for desktop icon display"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(W.Label,{children:"Auto Start"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start container on system boot"})]}),(0,t.jsx)(M.Switch,{checked:tu.autoStart,onCheckedChange:e=>tp(t=>({...t,autoStart:e}))})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{tm(!1),th(null)},disabled:tj,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:tM,disabled:tj||tu.hasWebUI&&!tu.webUIPort,className:"gap-2",children:tj?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Loader2,{className:"w-4 h-4 animate-spin"}),"Adopting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(er.Package,{className:"w-4 h-4"}),"Adopt Container"]})})]})]})}),(0,t.jsx)(U.Dialog,{open:tf,onOpenChange:tN,children:(0,t.jsxs)(U.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(U.DialogHeader,{children:[(0,t.jsxs)(U.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(e_,{className:"w-5 h-5 text-amber-400"}),"Edit Container"]}),(0,t.jsxs)(U.DialogDescription,{children:["Update settings for ",null==tv?void 0:tv.name]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-icon",children:"Icon URL"}),(0,t.jsx)(c.Input,{id:"edit-icon",placeholder:"https://example.com/icon.svg",value:tw.icon,onChange:e=>ty(t=>({...t,icon:e.target.value}))}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"URL to an icon image (SVG, PNG, etc.) for the desktop shortcut"}),tw.icon&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Preview:"}),(0,t.jsx)("img",{src:tw.icon,alt:"Icon preview",className:"w-8 h-8 object-contain",onError:e=>e.currentTarget.style.display="none"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-webui",children:"Has Web UI"}),(0,t.jsx)(M.Switch,{id:"edit-webui",checked:tw.hasWebUI,onCheckedChange:e=>ty(t=>({...t,hasWebUI:e}))})]}),tw.hasWebUI&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-port",children:"Web UI Port"}),(0,t.jsx)(c.Input,{id:"edit-port",type:"number",placeholder:"8080",value:tw.webUIPort,onChange:e=>ty(t=>({...t,webUIPort:e.target.value}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-path",children:"Web UI Path"}),(0,t.jsx)(c.Input,{id:"edit-path",placeholder:"/",value:tw.webUIPath,onChange:e=>ty(t=>({...t,webUIPath:e.target.value}))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(W.Label,{htmlFor:"edit-autostart",children:"Auto Start"}),(0,t.jsx)(M.Switch,{id:"edit-autostart",checked:tw.autoStart,onCheckedChange:e=>ty(t=>({...t,autoStart:e}))})]})]}),(0,t.jsxs)(U.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{tN(!1),tb(null)},disabled:tC,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:tV,disabled:tC||tw.hasWebUI&&!tw.webUIPort,className:"gap-2",children:tC?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e_,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]})}}]);