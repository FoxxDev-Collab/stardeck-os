"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2312],{22312:(e,t,r)=>{r.d(t,{N:()=>eo});var a=r(95155),s=r(12115),n=r(52619),o=r.n(n),c=r(97003),l=r(53990),i=r(20063),d=r(6707),m=r(59384),x=r(53270),h=r(34172),u=r(50906),g=r(75159),f=r(15870),p=r(14639),b=r(16140),v=r(26617),j=r(20523),N=r(58734),w=r(50803),y=r(17910),k=r(91169),A=r(89470),C=r(39068),S=r(76907),z=r(89715),M=r(65229),F=r(24033),_=r(27937);let P=[{name:"Desktop",href:"/dashboard",icon:m.A},{name:"Settings",href:"/settings",icon:x.A}],U=[{name:"Server Management",icon:h.A,operatorOrAdmin:!0,items:[{name:"System Monitor",href:"/system-monitor",icon:u.A},{name:"Process Manager",href:"/process-manager",icon:g.A},{name:"Service Manager",href:"/service-manager",icon:f.A},{name:"Network Manager",href:"/network-manager",icon:p.A},{name:"Container Manager",href:"/container-manager",icon:b.A},{name:"RPM Manager",href:"/rpm-manager",icon:v.A},{name:"Storage Viewer",href:"/storage-viewer",icon:j.A},{name:"File Browser",href:"/file-browser",icon:N.A},{name:"Terminal",href:"/terminal",icon:w.A}]},{name:"Administration",icon:y.A,adminOnly:!0,items:[{name:"User Manager",href:"/user-manager",icon:k.A},{name:"Group Manager",href:"/group-manager",icon:A.A},{name:"Realm Manager",href:"/realm-manager",icon:C.A},{name:"Alliance",href:"/alliance",icon:S.A},{name:"Audit Log",href:"/audit-log",icon:z.A}]}];function E(e){let{isOpen:t,onClose:r}=e,n=(0,i.usePathname)(),{user:l}=(0,d.A)(),[m,x]=(0,s.useState)(new Set(["Server Management","Administration"])),h=(null==l?void 0:l.role)==="admin"||(null==l?void 0:l.is_pam_admin),u=(null==l?void 0:l.role)==="admin"||(null==l?void 0:l.role)==="operator"||(null==l?void 0:l.is_pam_admin),g=P.filter(e=>(!e.operatorOrAdmin||!!u)&&(!e.adminOnly||!!h)),f=U.filter(e=>(!e.operatorOrAdmin||!!u)&&(!e.adminOnly||!!h));return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:r}),(0,a.jsxs)("div",{className:"fixed left-0 top-0 h-full w-80 bg-card/95 backdrop-blur-md border-r border-border/50 shadow-2xl z-50 transition-transform duration-300 ease-out ".concat(t?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"h-14 border-b border-border/50 flex items-center justify-between px-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative w-6 h-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 border-2 border-accent rounded rotate-45 flex items-center justify-center shadow-[0_0_10px_rgba(112,187,179,0.5)]",children:(0,a.jsx)("span",{className:"text-[10px] font-bold text-accent -rotate-45 tracking-tighter",children:"SD"})}),(0,a.jsx)("div",{className:"absolute inset-0 border-2 border-accent/30 rounded rotate-45 blur-sm"})]}),(0,a.jsx)("span",{className:"text-sm font-bold tracking-widest text-foreground",children:"STARDECK"})]}),(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0 hover:bg-accent/10",children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"px-6 py-4 border-b border-border/50 bg-background/40",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-accent/20 border border-accent/40 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-accent font-bold text-lg",children:null==l?void 0:l.username[0].toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-foreground truncate",children:null==l?void 0:l.username}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground capitalize",children:null==l?void 0:l.role})]})]})}),(0,a.jsxs)("nav",{className:"p-4 space-y-1 overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:[f.map(e=>{let t=e.icon,s=m.has(e.name),c=e.items.some(e=>n===e.href);return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.name,void x(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"w-full group flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat(c?"bg-accent/10 border border-accent/30":"hover:bg-accent/10 border border-transparent hover:border-accent/20"),children:[(0,a.jsx)(t,{className:"w-5 h-5 transition-colors ".concat(c?"text-accent":"text-muted-foreground group-hover:text-accent")}),(0,a.jsx)("span",{className:"flex-1 text-left font-medium transition-colors ".concat(c?"text-foreground":"text-muted-foreground group-hover:text-foreground"),children:e.name}),(0,a.jsx)(F.A,{className:"w-4 h-4 transition-transform duration-200 ".concat(s?"rotate-0":"-rotate-90"," ").concat(c?"text-accent":"text-muted-foreground")})]}),s&&(0,a.jsx)("div",{className:"ml-6 space-y-1 border-l border-border/30 pl-2",children:e.items.map(e=>{let t=e.icon,s=n===e.href;return(0,a.jsx)(o(),{href:e.href,onClick:r,children:(0,a.jsxs)("div",{className:"group flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 ".concat(s?"bg-accent/20 border border-accent/40 shadow-[0_0_15px_rgba(112,187,179,0.2)]":"hover:bg-accent/10 border border-transparent hover:border-accent/20"),children:[(0,a.jsx)(t,{className:"w-4 h-4 transition-colors ".concat(s?"text-accent":"text-muted-foreground group-hover:text-accent")}),(0,a.jsx)("span",{className:"flex-1 text-sm font-medium transition-colors ".concat(s?"text-foreground":"text-muted-foreground group-hover:text-foreground"),children:e.name}),s&&(0,a.jsx)(_.A,{className:"w-3 h-3 text-accent"})]})},e.href)})})]},e.name)}),g.map(e=>{let t=e.icon,s=n===e.href;return(0,a.jsx)(o(),{href:e.href,onClick:r,children:(0,a.jsxs)("div",{className:"group flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat(s?"bg-accent/20 border border-accent/40 shadow-[0_0_15px_rgba(112,187,179,0.2)]":"hover:bg-accent/10 border border-transparent hover:border-accent/20"),children:[(0,a.jsx)(t,{className:"w-5 h-5 transition-colors ".concat(s?"text-accent":"text-muted-foreground group-hover:text-accent")}),(0,a.jsx)("span",{className:"flex-1 font-medium transition-colors ".concat(s?"text-foreground":"text-muted-foreground group-hover:text-foreground"),children:e.name}),s&&(0,a.jsx)(_.A,{className:"w-4 h-4 text-accent"})]})},e.href)})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border/50 bg-background/40",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground/60 tracking-wider",children:"STARDECK OS v3.0.0"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground/60 mt-1",children:[(0,a.jsx)("span",{className:"text-accent",children:">"})," PHASE 3"]})]})})]})]})}var I=r(99708),O=r(84926),R=r(52056),D=r(37494),L=r(93141),$=r(52952);function T(){let{logout:e,user:t}=(0,d.A)(),r=(0,i.useRouter)(),[n,l]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),h=async()=>{l(!1),await e(),r.push("/login")},u=async e=>{let t={poweroff:"Power Off",reboot:"Reboot",suspend:"Suspend"};if(confirm("Are you sure you want to ".concat(t[e].toLowerCase()," the system?"))){l(!1),x(!0);try{if(!(await fetch("/api/system/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("stardeck-token"))}})).ok)throw Error("Failed to ".concat(e," system"));"poweroff"===e?alert("System is shutting down..."):"reboot"===e&&alert("System is rebooting...")}catch(r){console.error("Failed to ".concat(e,":"),r),alert("Failed to ".concat(t[e].toLowerCase()," the system"))}finally{x(!1)}}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>l(!n),className:"gap-2 border-border/50 hover:border-accent/50 hover:bg-accent/10 transition-all duration-200 ".concat(n?"bg-accent/10 border-accent/50":""),disabled:m,children:[(0,a.jsx)("div",{className:"w-7 h-7 rounded-lg bg-accent/20 border border-accent/40 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-accent font-bold text-xs",children:null==t?void 0:t.username[0].toUpperCase()})}),(0,a.jsx)("span",{className:"text-xs font-medium max-w-[100px] truncate",children:null==t?void 0:t.username}),(0,a.jsx)(F.A,{className:"w-3 h-3 transition-transform duration-200 ".concat(n?"rotate-180":"")})]}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-56 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-2xl shadow-accent/10 z-50 overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-border/50 bg-background/40",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-accent/20 border border-accent/40 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-accent font-bold text-lg",children:null==t?void 0:t.username[0].toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-foreground truncate text-sm",children:null==t?void 0:t.username}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground capitalize",children:null==t?void 0:t.role})]})]})}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("button",{onClick:()=>{l(!1),r.push("/login")},className:"w-full px-4 py-2.5 flex items-center gap-3 hover:bg-accent/10 transition-colors text-left group",children:[(0,a.jsx)(I.A,{className:"w-4 h-4 text-muted-foreground group-hover:text-accent"}),(0,a.jsx)("span",{className:"text-sm text-foreground group-hover:text-accent",children:"Lock Session"})]}),(0,a.jsxs)("button",{onClick:h,className:"w-full px-4 py-2.5 flex items-center gap-3 hover:bg-accent/10 transition-colors text-left group",children:[(0,a.jsx)(O.A,{className:"w-4 h-4 text-muted-foreground group-hover:text-accent"}),(0,a.jsx)("span",{className:"text-sm text-foreground group-hover:text-accent",children:"Logout"})]}),(0,a.jsx)("div",{className:"my-2 h-px bg-border/50"}),(0,a.jsxs)(o(),{href:"/settings",onClick:()=>l(!1),className:"w-full px-4 py-2.5 flex items-center gap-3 hover:bg-accent/10 transition-colors text-left group",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-muted-foreground group-hover:text-accent"}),(0,a.jsx)("span",{className:"text-sm text-foreground group-hover:text-accent",children:"Settings"})]}),(null==t?void 0:t.role)==="admin"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"my-2 h-px bg-border/50"}),(0,a.jsx)("div",{className:"px-4 py-1",children:(0,a.jsxs)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:[(0,a.jsx)(R.A,{className:"w-3 h-3"}),"System Actions"]})}),(0,a.jsxs)("button",{onClick:()=>u("suspend"),className:"w-full px-4 py-2.5 flex items-center gap-3 hover:bg-chart-2/10 transition-colors text-left group",disabled:m,children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-muted-foreground group-hover:text-chart-2"}),(0,a.jsx)("span",{className:"text-sm text-foreground group-hover:text-chart-2",children:"Suspend"})]}),(0,a.jsxs)("button",{onClick:()=>u("reboot"),className:"w-full px-4 py-2.5 flex items-center gap-3 hover:bg-chart-2/10 transition-colors text-left group",disabled:m,children:[(0,a.jsx)(L.A,{className:"w-4 h-4 text-muted-foreground group-hover:text-chart-2"}),(0,a.jsx)("span",{className:"text-sm text-foreground group-hover:text-chart-2",children:"Reboot"})]}),(0,a.jsxs)("button",{onClick:()=>u("poweroff"),className:"w-full px-4 py-2.5 flex items-center gap-3 hover:bg-destructive/10 transition-colors text-left group",disabled:m,children:[(0,a.jsx)($.A,{className:"w-4 h-4 text-muted-foreground group-hover:text-destructive"}),(0,a.jsx)("span",{className:"text-sm text-foreground group-hover:text-destructive",children:"Power Off"})]})]})]}),(0,a.jsx)("div",{className:"px-4 py-2 border-t border-border/50 bg-background/20",children:(0,a.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[(0,a.jsx)("span",{className:"text-accent",children:">"})," Session active"]})})]})]})]})}var B=r(26198),V=r(57113),G=r(25016);function H(e){let{...t}=e;return(0,a.jsx)(V.bL,{"data-slot":"popover",...t})}function K(e){let{...t}=e;return(0,a.jsx)(V.l9,{"data-slot":"popover-trigger",...t})}function W(e){let{className:t,align:r="center",sideOffset:s=4,...n}=e;return(0,a.jsx)(V.ZL,{children:(0,a.jsx)(V.UC,{"data-slot":"popover-content",align:r,sideOffset:s,className:(0,G.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var q=r(3166),Q=r(33738),X=r(52987),Z=r(95707),J=r(85710);function Y(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB","TB"][t]}function ee(e){let{icon:t,value:r,percentage:s,color:n="bg-accent"}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded hover:bg-accent/10 transition-colors cursor-pointer group",children:[(0,a.jsx)("div",{className:"text-muted-foreground group-hover:text-accent transition-colors",children:t}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs font-mono text-foreground leading-none",children:r}),void 0!==s&&(0,a.jsx)("div",{className:"w-12 h-1 bg-muted rounded-full mt-1 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(n," transition-all duration-300"),style:{width:"".concat(Math.min(s,100),"%")}})})]})]})}function et(e){let{label:t,value:r,highlight:s}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:t}),(0,a.jsx)("span",{className:"text-xs font-mono ".concat(s?"text-accent font-semibold":"text-foreground"),children:r})]})}function er(){var e,t,r,n,o,l,m,x,h,g;let{token:f}=(0,d.A)(),{settings:p}=(0,B.t)(),b=(0,i.useRouter)(),[v,N]=(0,s.useState)(null),[w,y]=(0,s.useState)(!0),k=(0,s.useCallback)(async()=>{if(f)try{let e=await fetch("/api/system/resources",{headers:{Authorization:"Bearer ".concat(f)}});if(!e.ok)throw Error("Failed to fetch");let t=await e.json();N(t),y(!0)}catch(e){y(!1)}},[f]);(0,s.useEffect)(()=>{if(f){k();let e=setInterval(k,1e3*p.tray.refreshInterval);return()=>clearInterval(e)}},[f,k,p.tray.refreshInterval]);let A=null!=(e=null==v?void 0:v.cpu.usage_percent)?e:0,C=null!=(t=null==v?void 0:v.cpu.cores)?t:0,S=null!=(r=null==v?void 0:v.memory.used)?r:0,z=null!=(n=null==v?void 0:v.memory.total)?n:1,M=null!=(o=null==v?void 0:v.memory.free)?o:0,F=null!=(l=null==v?void 0:v.memory.available)?l:0,_=null!=(m=null==v?void 0:v.memory.cached)?m:0,P=S/z*100,U=null!=(x=null==v?void 0:v.disk.used)?x:0,E=null!=(h=null==v?void 0:v.disk.total)?h:1,I=null!=(g=null==v?void 0:v.disk.free)?g:0,O=U/E*100,{showCpu:R,showMemory:D,showDisk:L,showNetwork:$}=p.tray;return R||D||L||$?(0,a.jsxs)("div",{className:"flex items-center gap-1 border-l border-border/50 pl-3 ml-2",children:[$&&(0,a.jsxs)(H,{children:[(0,a.jsx)(K,{asChild:!0,children:(0,a.jsx)("button",{className:"px-2 py-1 rounded hover:bg-accent/10 transition-colors",children:w?(0,a.jsx)(q.A,{className:"w-3.5 h-3.5 text-primary"}):(0,a.jsx)(Q.A,{className:"w-3.5 h-3.5 text-destructive"})})}),(0,a.jsx)(W,{className:"w-64",align:"end",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[w?(0,a.jsx)(q.A,{className:"w-4 h-4 text-primary"}):(0,a.jsx)(Q.A,{className:"w-4 h-4 text-destructive"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:w?"Connected":"Disconnected"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:w?"System monitoring is active and receiving data.":"Unable to connect to the backend server."}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"w-full gap-2",onClick:()=>b.push("/network-manager"),children:["Network Manager",(0,a.jsx)(X.A,{className:"w-3 h-3"})]})]})})]}),$&&(R||D||L)&&(0,a.jsx)("div",{className:"h-4 w-px bg-border/50"}),R&&(0,a.jsxs)(H,{children:[(0,a.jsx)(K,{asChild:!0,children:(0,a.jsx)("button",{children:(0,a.jsx)(ee,{icon:(0,a.jsx)(Z.A,{className:"w-3.5 h-3.5"}),value:"".concat(A.toFixed(0),"%"),percentage:A,color:"bg-chart-3"})})}),(0,a.jsx)(W,{className:"w-72",align:"end",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Z.A,{className:"w-4 h-4 text-chart-3"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"CPU Usage"})]}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-chart-3",children:[A.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-chart-3 transition-all duration-300",style:{width:"".concat(Math.min(A,100),"%")}})}),(0,a.jsxs)("div",{className:"border-t border-border pt-2 space-y-1",children:[(0,a.jsx)(et,{label:"Cores",value:"".concat(C)}),(0,a.jsx)(et,{label:"Usage",value:"".concat(A.toFixed(1),"%"),highlight:!0})]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"w-full gap-2",onClick:()=>b.push("/process-manager"),children:[(0,a.jsx)(u.A,{className:"w-3 h-3"}),"View Processes",(0,a.jsx)(X.A,{className:"w-3 h-3"})]})]})})]}),D&&(0,a.jsxs)(H,{children:[(0,a.jsx)(K,{asChild:!0,children:(0,a.jsx)("button",{children:(0,a.jsx)(ee,{icon:(0,a.jsx)(J.A,{className:"w-3.5 h-3.5"}),value:"".concat(Y(S),"/").concat(Y(z)),percentage:P,color:"bg-chart-4"})})}),(0,a.jsx)(W,{className:"w-72",align:"end",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.A,{className:"w-4 h-4 text-chart-4"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Memory Usage"})]}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-chart-4",children:[P.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-chart-4 transition-all duration-300",style:{width:"".concat(Math.min(P,100),"%")}})}),(0,a.jsxs)("div",{className:"border-t border-border pt-2 space-y-1",children:[(0,a.jsx)(et,{label:"Total",value:Y(z)}),(0,a.jsx)(et,{label:"Used",value:Y(S),highlight:!0}),(0,a.jsx)(et,{label:"Free",value:Y(M)}),(0,a.jsx)(et,{label:"Available",value:Y(F)}),_>0&&(0,a.jsx)(et,{label:"Cached",value:Y(_)})]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"w-full gap-2",onClick:()=>b.push("/process-manager"),children:[(0,a.jsx)(u.A,{className:"w-3 h-3"}),"View Processes",(0,a.jsx)(X.A,{className:"w-3 h-3"})]})]})})]}),L&&(0,a.jsxs)(H,{children:[(0,a.jsx)(K,{asChild:!0,children:(0,a.jsx)("button",{children:(0,a.jsx)(ee,{icon:(0,a.jsx)(j.A,{className:"w-3.5 h-3.5"}),value:"".concat(O.toFixed(0),"%"),percentage:O,color:"bg-chart-5"})})}),(0,a.jsx)(W,{className:"w-72",align:"end",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-chart-5"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Disk Usage"})]}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-chart-5",children:[O.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-chart-5 transition-all duration-300",style:{width:"".concat(Math.min(O,100),"%")}})}),(0,a.jsxs)("div",{className:"border-t border-border pt-2 space-y-1",children:[(0,a.jsx)(et,{label:"Total",value:Y(E)}),(0,a.jsx)(et,{label:"Used",value:Y(U),highlight:!0}),(0,a.jsx)(et,{label:"Free",value:Y(I)})]}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",className:"w-full gap-2",onClick:()=>b.push("/storage"),children:[(0,a.jsx)(j.A,{className:"w-3 h-3"}),"Storage Manager",(0,a.jsx)(X.A,{className:"w-3 h-3"})]})]})})]})]}):null}var ea=r(72342),es=r(9540),en=r(65993);function eo(e){let{children:t,title:r,time:n,actions:i,onCustomizeClick:m,showCustomize:x}=e,[h,u]=(0,s.useState)(!1),{settings:g}=(0,B.t)(),{token:p}=(0,d.A)(),b="bottom"===g.taskbarPosition,v=(0,a.jsxs)("header",{className:"\n        relative z-30 h-14 bg-card/60 backdrop-blur-md flex items-center justify-between px-6 shadow-lg\n        ".concat(b?"border-t border-border/50":"border-b border-border/50","\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>u(!h),className:"gap-2 border-accent/50 hover:bg-accent/10 hover:border-accent transition-all duration-200 ".concat(h?"bg-accent/20 border-accent":""),children:[(0,a.jsx)(es.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs tracking-wider font-semibold",children:"START"})]}),(0,a.jsx)(o(),{href:"/dashboard",children:(0,a.jsx)(c.$,{variant:"outline",size:"sm",className:"gap-2 border-accent/50 hover:bg-accent/10 hover:border-accent transition-all duration-200",children:(0,a.jsx)(en.A,{className:"w-4 h-4"})})}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-6 w-px bg-border/50"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-accent",children:">"})," ",r]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[i,x&&m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:m,className:"gap-2 border-accent/50 hover:bg-accent/10 hover:border-accent transition-all duration-200",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"h-6 w-px bg-border/50"})]}),(0,a.jsx)(er,{}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-4 w-px bg-border/50"}),(0,a.jsx)("span",{className:"text-xs font-mono text-accent px-3 py-1 rounded bg-gray-800 dark:bg-transparent",children:n})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-border/50"}),(0,a.jsx)(l.U,{}),(0,a.jsx)(T,{})]})]}),j=(()=>{switch(g.desktop.backgroundType){case"color":return{backgroundColor:g.desktop.backgroundColor};case"gradient":return{background:g.desktop.backgroundGradient};case"image":return g.desktop.backgroundImage?{backgroundImage:"url(".concat((e=>{if(!e||!p)return e;if(e.startsWith("/api/files/")){let t=e.includes("?")?"&":"?";return"".concat(e).concat(t,"token=").concat(encodeURIComponent(p))}return e})(g.desktop.backgroundImage),")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{};default:return{}}})(),N="default"!==g.desktop.backgroundType;return(0,a.jsxs)("div",{className:"min-h-screen relative overflow-hidden flex flex-col ".concat(b?"flex-col-reverse":""," ").concat(N?"":"bg-background"),style:N?j:void 0,children:[!N&&(0,a.jsx)(ea.I,{}),(0,a.jsx)("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-[128px] animate-pulse pointer-events-none",style:{animationDuration:"6s"}}),(0,a.jsx)(E,{isOpen:h,onClose:()=>u(!1)}),v,(0,a.jsx)("main",{className:"relative z-10 flex-1",children:t})]})}},25016:(e,t,r)=>{r.d(t,{cn:()=>n});var a=r(2821),s=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},53990:(e,t,r)=>{r.d(t,{U:()=>i});var a=r(95155);r(12115);var s=r(37494),n=r(59427),o=r(79451),c=r(81901),l=r(97003);function i(){let{theme:e,setTheme:t}=(0,c.D)(),r=()=>{switch(e){case"dark":return"Dark";case"light":return"Light";case"system":return"System"}};return(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{"dark"===e?t("light"):"light"===e?t("system"):t("dark")},className:"gap-2 border-border/50 hover:border-accent/50 hover:bg-accent/10 transition-all duration-200",title:"Current theme: ".concat(r(),". Click to change."),children:[(()=>{switch(e){case"dark":return(0,a.jsx)(s.A,{className:"h-4 w-4"});case"light":return(0,a.jsx)(n.A,{className:"h-4 w-4"});case"system":return(0,a.jsx)(o.A,{className:"h-4 w-4"})}})(),(0,a.jsx)("span",{className:"text-xs tracking-wider",children:r()})]})}},72342:(e,t,r)=>{r.d(t,{I:()=>o});var a=r(95155),s=r(12115),n=r(81901);function o(e){let{starCount:t=80,speed:r=.08,opacity:o=.6}=e,c=(0,s.useRef)(null),{theme:l}=(0,n.D)(),[i,d]=(0,s.useState)("dark");(0,s.useEffect)(()=>{if("system"===l){d(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{d(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}d(l)},[l]),(0,s.useEffect)(()=>{let e,a=c.current;if(!a)return;let s=a.getContext("2d");if(!s)return;let n="dark"===i,l=()=>{a.width=window.innerWidth,a.height=window.innerHeight};l(),window.addEventListener("resize",l);let d=[];for(let e=0;e<t;e++)d.push({x:Math.random()*a.width,y:Math.random()*a.height,size:1.2*Math.random()+.3,speed:(.5*Math.random()+.5)*r,brightness:.4*Math.random()+.3,twinkleOffset:Math.random()*Math.PI*2});let m=()=>{n?s.fillStyle="rgba(0, 0, 0, 0.03)":s.fillStyle="rgba(255, 255, 255, 0.05)",s.fillRect(0,0,a.width,a.height);let t=.001*Date.now();d.forEach(e=>{e.x-=e.speed,e.x<-5&&(e.x=a.width+5,e.y=Math.random()*a.height);let r=.3*Math.sin(.5*t+e.twinkleOffset)+.7,c=e.brightness*r*o;s.beginPath(),s.arc(e.x,e.y,e.size,0,2*Math.PI),n?s.fillStyle="rgba(200, 210, 255, ".concat(c,")"):s.fillStyle="rgba(80, 100, 140, ".concat(.7*c,")"),s.fill(),e.size>.8&&(s.beginPath(),s.arc(e.x,e.y,2*e.size,0,2*Math.PI),n?s.fillStyle="rgba(180, 200, 255, ".concat(.15*c,")"):s.fillStyle="rgba(60, 80, 120, ".concat(.1*c,")"),s.fill())}),e=requestAnimationFrame(m)};return n?s.fillStyle="rgba(0, 0, 0, 1)":s.fillStyle="rgba(255, 255, 255, 1)",s.fillRect(0,0,a.width,a.height),m(),()=>{window.removeEventListener("resize",l),cancelAnimationFrame(e)}},[t,r,o,i]);let m="dark"===i;return(0,a.jsx)("canvas",{ref:c,className:"absolute inset-0 z-0 pointer-events-none",style:{mixBlendMode:m?"screen":"multiply"}})}},97003:(e,t,r)=>{r.d(t,{$:()=>l,r:()=>c});var a=r(95155);r(12115);var s=r(32467),n=r(83101),o=r(25016);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:n,asChild:l=!1,...i}=e,d=l?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,o.cn)(c({variant:r,size:n,className:t})),...i})}}}]);