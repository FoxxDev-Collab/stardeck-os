(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34386,e=>{"use strict";e.s(["default",()=>eS],34386);var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(91432),n=e.i(17995),l=e.i(70065),i=e.i(67881),c=e.i(23750),o=e.i(48654),d=e.i(27341),m=e.i(26999),x=e.i(95926),h=e.i(47163);function u(e){let{...t}=e;return(0,s.jsx)(m.Root,{"data-slot":"sheet",...t})}function p(e){let{...t}=e;return(0,s.jsx)(m.Portal,{"data-slot":"sheet-portal",...t})}function j(e){let{className:t,...a}=e;return(0,s.jsx)(m.Overlay,{"data-slot":"sheet-overlay",className:(0,h.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function g(e){let{className:t,children:a,side:r="right",...n}=e;return(0,s.jsxs)(p,{children:[(0,s.jsx)(j,{}),(0,s.jsxs)(m.Content,{"data-slot":"sheet-content",className:(0,h.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[a,(0,s.jsxs)(m.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,s.jsx)(x.XIcon,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function f(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-header",className:(0,h.cn)("flex flex-col gap-1.5 p-4",t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(m.Title,{"data-slot":"sheet-title",className:(0,h.cn)("text-foreground font-semibold",t),...a})}var v=e.i(72664),b=e.i(74886),w=e.i(31343),y=e.i(52044),C=e.i(91810),k=e.i(27612),S=e.i(78917),D=e.i(68054),T=e.i(21218),F=e.i(78094),I=e.i(52786),B=e.i(39616),L=e.i(63209),P=e.i(31278),_=e.i(63059);function E(e){var a,n,c;let{containerId:o,onClose:m,onAction:x,onOpenTerminal:h,onOpenWebUI:p,isAdmin:j}=e,{token:E}=(0,r.useAuth)(),[U,A]=(0,t.useState)(null),[z,O]=(0,t.useState)(null),[R,H]=(0,t.useState)(!0),[M,W]=(0,t.useState)(null),[V,J]=(0,t.useState)("overview"),[q,G]=(0,t.useState)(!1),K=(0,t.useCallback)(async()=>{if(E&&o)try{let e=await fetch("/api/containers/".concat(o),{headers:{Authorization:"Bearer ".concat(E)}});if(!e.ok)throw Error("Failed to fetch container details");let s=await e.json();A(s),W(null)}catch(e){W(e instanceof Error?e.message:"Failed to load details")}finally{H(!1)}},[E,o]),X=(0,t.useCallback)(async()=>{if(E&&o&&(null==U?void 0:U.running))try{let e=await fetch("/api/containers/".concat(o,"/stats"),{headers:{Authorization:"Bearer ".concat(E)}});if(e.ok){let s=await e.json();O(s)}}catch(e){}},[E,o,null==U?void 0:U.running]);(0,t.useEffect)(()=>{o&&(H(!0),A(null),O(null),K())},[o,K]),(0,t.useEffect)(()=>{if(null==U?void 0:U.running){X();let e=setInterval(X,3e3);return()=>clearInterval(e)}},[null==U?void 0:U.running,X]);let Y=async e=>{if(o){G(!0);try{await x(o,e),"remove"!==e?await K():m()}finally{G(!1)}}},Z=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB","TB"][s]},Q=e=>e&&"0001-01-01T00:00:00Z"!==e?new Date(e).toLocaleString():"-";return(0,s.jsx)(u,{open:!!o,onOpenChange:()=>m(),children:(0,s.jsxs)(g,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,s.jsx)(f,{className:"border-b border-border/50 pb-4",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)(N,{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/20 border border-cyan-500/40 flex items-center justify-center",children:(0,s.jsx)(v.Box,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block",children:(null==U?void 0:U.name)||"Loading..."}),U&&(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat((e=>{switch(e){case"running":return"text-green-500 bg-green-500/20";case"paused":return"text-yellow-500 bg-yellow-500/20";case"exited":case"dead":return"text-red-500 bg-red-500/20";default:return"text-gray-500 bg-gray-500/20"}})(U.status)),children:U.status})]})]})})}),R?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(P.Loader2,{className:"w-8 h-8 animate-spin text-accent"})}):M?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(L.AlertCircle,{className:"w-12 h-12 text-destructive mb-4"}),(0,s.jsx)("p",{className:"text-destructive",children:M})]}):U?(0,s.jsxs)("div",{className:"py-4 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[U.running?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("stop"),disabled:q,className:"gap-2",children:[(0,s.jsx)(y.Square,{className:"w-4 h-4"}),"Stop"]}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("restart"),disabled:q,className:"gap-2",children:[(0,s.jsx)(C.RotateCw,{className:"w-4 h-4"}),"Restart"]}),(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>h(o),className:"gap-2",children:[(0,s.jsx)(D.Terminal,{className:"w-4 h-4"}),"Shell"]}),U.has_web_ui&&p&&(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>p(o),className:"gap-2",children:[(0,s.jsx)(S.ExternalLink,{className:"w-4 h-4"}),"Web UI"]})]}):(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("start"),disabled:q,className:"gap-2",children:[(0,s.jsx)(w.Play,{className:"w-4 h-4"}),"Start"]}),j&&(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Y("remove"),disabled:q,className:"gap-2 text-destructive hover:text-destructive",children:[(0,s.jsx)(k.Trash2,{className:"w-4 h-4"}),"Remove"]})]}),U.running&&z&&(0,s.jsxs)(l.Card,{className:"bg-card/50 border-border/50",children:[(0,s.jsx)(l.CardHeader,{className:"py-3",children:(0,s.jsxs)(l.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,s.jsx)(T.Activity,{className:"w-4 h-4 text-accent"}),"Live Statistics"]})}),(0,s.jsxs)(l.CardContent,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"CPU"}),(0,s.jsxs)("div",{className:"text-lg font-semibold",children:[z.cpu_percent.toFixed(1),"%"]}),(0,s.jsx)("div",{className:"h-1 bg-muted rounded-full overflow-hidden mt-1",children:(0,s.jsx)("div",{className:"h-full bg-cyan-500 transition-all",style:{width:"".concat(Math.min(z.cpu_percent,100),"%")}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Memory"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:Z(z.memory_used)}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["/ ",Z(z.memory_limit)," (",z.memory_percent.toFixed(1),"%)"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Network I/O"}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-green-500",children:"↓"})," ",Z(z.network_rx)]}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-blue-500",children:"↑"})," ",Z(z.network_tx)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"PIDs"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:z.pids})]})]})]}),(0,s.jsxs)(d.Tabs,{value:V,onValueChange:J,children:[(0,s.jsxs)(d.TabsList,{className:"grid grid-cols-4 w-full",children:[(0,s.jsx)(d.TabsTrigger,{value:"overview",className:"text-xs",children:"Overview"}),(0,s.jsx)(d.TabsTrigger,{value:"network",className:"text-xs",children:"Network"}),(0,s.jsx)(d.TabsTrigger,{value:"volumes",className:"text-xs",children:"Volumes"}),(0,s.jsx)(d.TabsTrigger,{value:"env",className:"text-xs",children:"Environment"})]}),(0,s.jsxs)(d.TabsContent,{value:"overview",className:"space-y-4 mt-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Container ID"}),(0,s.jsxs)("div",{className:"font-mono text-xs flex items-center gap-2",children:[U.container_id,(0,s.jsx)("button",{onClick:()=>{var e;return e=U.container_id,void navigator.clipboard.writeText(e)},className:"text-muted-foreground hover:text-accent",children:(0,s.jsx)(b.Copy,{className:"w-3 h-3"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Image"}),(0,s.jsx)("div",{className:"font-mono text-xs truncate",children:U.image})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Created"}),(0,s.jsx)("div",{className:"text-xs",children:Q(U.created)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Started"}),(0,s.jsx)("div",{className:"text-xs",children:Q(U.started_at)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Hostname"}),(0,s.jsx)("div",{className:"font-mono text-xs",children:U.hostname||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"PID"}),(0,s.jsx)("div",{className:"font-mono text-xs",children:U.running?U.pid:"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"User"}),(0,s.jsx)("div",{className:"font-mono text-xs",children:U.user||"root"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Restart Policy"}),(0,s.jsx)("div",{className:"text-xs",children:(null==(a=U.restart_policy)?void 0:a.name)||"no"})]})]}),((null==(n=U.entrypoint)?void 0:n.length)>0||(null==(c=U.cmd)?void 0:c.length)>0)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Command"}),(0,s.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 font-mono text-xs overflow-x-auto",children:[...U.entrypoint||[],...U.cmd||[]].join(" ")})]}),U.labels&&Object.keys(U.labels).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Labels"}),(0,s.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1 max-h-40 overflow-y-auto",children:Object.entries(U.labels).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"font-mono text-xs",children:[(0,s.jsx)("span",{className:"text-cyan-400",children:t}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"="}),(0,s.jsx)("span",{children:a})]},t)})})]})]}),(0,s.jsxs)(d.TabsContent,{value:"network",className:"space-y-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Network Mode"}),(0,s.jsx)("div",{className:"text-sm",children:U.network_mode||"bridge"})]}),U.networks&&Object.keys(U.networks).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Connected Networks"}),(0,s.jsx)("div",{className:"space-y-3",children:Object.entries(U.networks).map(e=>{let[t,a]=e;return(0,s.jsx)(l.Card,{className:"bg-muted/30",children:(0,s.jsxs)(l.CardContent,{className:"p-3",children:[(0,s.jsxs)("div",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[(0,s.jsx)(F.Network,{className:"w-4 h-4 text-accent"}),t]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"IP Address:"}),(0,s.jsx)("span",{className:"ml-2 font-mono",children:a.IPAddress||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Gateway:"}),(0,s.jsx)("span",{className:"ml-2 font-mono",children:a.Gateway||"-"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"MAC Address:"}),(0,s.jsx)("span",{className:"ml-2 font-mono",children:a.MacAddress||"-"})]})]})]})},t)})})]})]}),(0,s.jsx)(d.TabsContent,{value:"volumes",className:"space-y-4 mt-4",children:U.mounts&&U.mounts.length>0?(0,s.jsx)("div",{className:"space-y-3",children:U.mounts.map((e,t)=>(0,s.jsx)(l.Card,{className:"bg-muted/30",children:(0,s.jsxs)(l.CardContent,{className:"p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-4 h-4 text-accent"}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:e.Type}),(0,s.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded ".concat(e.RW?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"),children:e.RW?"RW":"RO"})]}),(0,s.jsxs)("div",{className:"space-y-1 text-xs font-mono",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground w-16",children:"Source:"}),(0,s.jsx)("span",{className:"truncate",children:e.Source})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(_.ChevronRight,{className:"w-3 h-3 text-muted-foreground"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground w-16",children:"Target:"}),(0,s.jsx)("span",{className:"truncate",children:e.Destination})]})]})]})},t))}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(I.HardDrive,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No volumes mounted"})]})}),(0,s.jsx)(d.TabsContent,{value:"env",className:"space-y-4 mt-4",children:U.env&&U.env.length>0?(0,s.jsx)("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1 max-h-80 overflow-y-auto",children:U.env.map((e,t)=>{let[a,...r]=e.split("="),n=r.join("="),l=a.toLowerCase().includes("password")||a.toLowerCase().includes("secret")||a.toLowerCase().includes("key")||a.toLowerCase().includes("token");return(0,s.jsxs)("div",{className:"font-mono text-xs",children:[(0,s.jsx)("span",{className:"text-cyan-400",children:a}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"="}),(0,s.jsx)("span",{children:l?"••••••••":n})]},t)})}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(B.Settings,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No environment variables"})]})})]})]}):null]})})}var U=e.i(24390),A=e.i(46236),z=e.i(94179);function O(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,h.cn)("w-full caption-bottom text-sm",t),...a})})}function R(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,h.cn)("[&_tr]:border-b",t),...a})}function H(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,h.cn)("[&_tr:last-child]:border-0",t),...a})}function M(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,h.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function W(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,h.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function V(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,h.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var J=e.i(30374),q=e.i(10708),G=e.i(88844),K=e.i(55436),X=e.i(40160),Y=e.i(16715),Z=e.i(51975),Q=e.i(75254);let $=(0,Q.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var ee=e.i(52008);function es(e){let{onRefresh:a}=e,{token:n,user:o}=(0,r.useAuth)(),[d,m]=(0,t.useState)([]),[x,h]=(0,t.useState)([]),[u,p]=(0,t.useState)(!0),[j,g]=(0,t.useState)(null),[f,N]=(0,t.useState)(""),[v,b]=(0,t.useState)(!1),[w,y]=(0,t.useState)(""),[C,S]=(0,t.useState)("latest"),[D,T]=(0,t.useState)(!1),[F,B]=(0,t.useState)(""),_=(null==o?void 0:o.role)==="admin",E=async()=>{if(n){p(!0),g(null);try{let e=await fetch("/api/images",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok)throw Error("Failed to fetch images");let s=await e.json();m(s||[])}catch(e){g(e instanceof Error?e.message:"Failed to load images")}finally{p(!1)}}};(0,t.useEffect)(()=>{E()},[n]),(0,t.useEffect)(()=>{f.trim()?h(d.filter(e=>e.repo_tags.some(e=>e.toLowerCase().includes(f.toLowerCase())))):h(d)},[d,f]);let U=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB","TB"][s]},A=async()=>{if(w.trim()){T(!0),B("Pulling image...");try{let e="".concat(w,":").concat(C);if(!(await fetch("/api/images/pull",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({image:e})})).ok)throw Error("Failed to pull image");B("Image pulled successfully!"),setTimeout(()=>{b(!1),y(""),S("latest"),B(""),E(),null==a||a()},1e3)}catch(e){B("Error: ".concat(e instanceof Error?e.message:"Failed to pull image"))}finally{T(!1)}}},Q=async e=>{if(confirm("Are you sure you want to delete this image?"))try{if(!(await fetch("/api/images/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}})).ok)throw Error("Failed to delete image");E(),null==a||a()}catch(e){alert(e instanceof Error?e.message:"Failed to delete image")}};return u?(0,s.jsx)(l.Card,{className:"bg-card/50 border-border/50",children:(0,s.jsx)(l.CardContent,{className:"flex items-center justify-center py-12",children:(0,s.jsx)(P.Loader2,{className:"w-8 h-8 animate-spin text-accent"})})}):j?(0,s.jsx)(l.Card,{className:"bg-card/50 border-border/50",children:(0,s.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(L.AlertCircle,{className:"w-12 h-12 text-destructive mb-4"}),(0,s.jsx)("p",{className:"text-destructive mb-4",children:j}),(0,s.jsxs)(i.Button,{onClick:E,variant:"outline",children:[(0,s.jsx)(Y.RefreshCw,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Card,{className:"bg-card/50 border-border/50",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(G.Package,{className:"w-5 h-5 text-accent"}),"Container Images"]}),(0,s.jsx)(l.CardDescription,{children:"Manage container images available on this system"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(i.Button,{onClick:E,variant:"outline",size:"sm",children:[(0,s.jsx)(Y.RefreshCw,{className:"w-4 h-4 mr-2"}),"Refresh"]}),_&&(0,s.jsxs)(i.Button,{onClick:()=>b(!0),size:"sm",children:[(0,s.jsx)(X.Download,{className:"w-4 h-4 mr-2"}),"Pull Image"]})]})]})}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(K.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(c.Input,{placeholder:"Search images by name...",value:f,onChange:e=>N(e.target.value),className:"pl-9"})]}),0===x.length?(0,s.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,s.jsx)(G.Package,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:f?"No images match your search":"No images found"})]}):(0,s.jsx)("div",{className:"rounded-lg border border-border/50 overflow-hidden",children:(0,s.jsxs)(O,{children:[(0,s.jsx)(R,{children:(0,s.jsxs)(M,{className:"bg-muted/50",children:[(0,s.jsx)(W,{children:"Repository:Tag"}),(0,s.jsx)(W,{children:"Image ID"}),(0,s.jsx)(W,{children:"Size"}),(0,s.jsx)(W,{children:"Created"}),(0,s.jsx)(W,{children:"Containers"}),_&&(0,s.jsx)(W,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(H,{children:x.map(e=>{var t;return(0,s.jsxs)(M,{className:"hover:bg-muted/30",children:[(0,s.jsx)(V,{children:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:e.repo_tags&&e.repo_tags.length>0?e.repo_tags.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.Tag,{className:"w-3 h-3 text-accent"}),(0,s.jsx)("span",{className:"font-mono text-sm",children:e})]},e)):(0,s.jsx)("span",{className:"text-muted-foreground text-sm italic",children:"<none>"})})}),(0,s.jsx)(V,{children:(0,s.jsx)("span",{className:"font-mono text-xs text-muted-foreground",children:e.id.substring(0,12)})}),(0,s.jsx)(V,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-3 h-3 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:U(e.size)})]})}),(0,s.jsx)(V,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)($,{className:"w-3 h-3 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm",children:(t=e.created)?new Date(t).toLocaleString():"-"})]})}),(0,s.jsx)(V,{children:(0,s.jsx)(z.Badge,{variant:"outline",className:"font-mono",children:e.containers})}),_&&(0,s.jsx)(V,{className:"text-right",children:(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>Q(e.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,s.jsx)(k.Trash2,{className:"w-4 h-4"})})})]},e.id)})})]})}),(0,s.jsx)("div",{className:"flex items-center justify-between pt-4 border-t border-border/50 text-sm text-muted-foreground",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ee.Layers,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[d.length," images"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[U(d.reduce((e,s)=>e+s.size,0))," total"]})]})]})})]})]}),(0,s.jsx)(J.Dialog,{open:v,onOpenChange:b,children:(0,s.jsxs)(J.DialogContent,{children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(X.Download,{className:"w-5 h-5 text-accent"}),"Pull Container Image"]}),(0,s.jsx)(J.DialogDescription,{children:"Download a container image from a registry"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"image-name",children:"Image Name"}),(0,s.jsx)(c.Input,{id:"image-name",placeholder:"e.g., nginx, docker.io/library/redis, ghcr.io/user/app",value:w,onChange:e=>y(e.target.value),disabled:D}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter the full image path or just the image name for Docker Hub"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"image-tag",children:"Tag"}),(0,s.jsx)(c.Input,{id:"image-tag",placeholder:"latest",value:C,onChange:e=>S(e.target.value),disabled:D})]}),F&&(0,s.jsx)("div",{className:"text-sm p-3 rounded-lg ".concat(F.includes("Error")?"bg-destructive/10 text-destructive":"bg-accent/10 text-accent"),children:F})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>{b(!1),y(""),S("latest"),B("")},disabled:D,children:"Cancel"}),(0,s.jsxs)(i.Button,{onClick:A,disabled:!w.trim()||D,children:[D&&(0,s.jsx)(P.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Pull Image"]})]})]})})]})}var et=e.i(87336),ea=e.i(69035),er=e.i(7233),en=e.i(88511),el=e.i(95468),ei=e.i(73884),ec=e.i(86536),eo=e.i(46696);function ed(e){let{token:a,isAdmin:r,composeAvailable:n}=e,[o,d]=(0,t.useState)([]),[m,x]=(0,t.useState)(!0),[h,u]=(0,t.useState)(""),[p,j]=(0,t.useState)(null),[g,f]=(0,t.useState)([]),[N,b]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[D,T]=(0,t.useState)(!1),[F,I]=(0,t.useState)(!1),[B,_]=(0,t.useState)(!1),[E,U]=(0,t.useState)(""),[A,O]=(0,t.useState)(""),[R,H]=(0,t.useState)('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),[M,W]=(0,t.useState)(""),[V,G]=(0,t.useState)(!1),[X,Y]=(0,t.useState)([]),[Z,Q]=(0,t.useState)(0),$=(0,t.useRef)(null),es=(0,t.useCallback)(async()=>{try{let e=await fetch("/api/stacks",{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let s=await e.json();d(s||[])}}catch(e){console.error("Failed to fetch stacks:",e)}finally{x(!1)}},[a]);(0,t.useEffect)(()=>{es()},[es]),(0,t.useEffect)(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[X]);let ed=async e=>{try{let s=await fetch("/api/stacks/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}});if(s.ok){let e=await s.json();return j(e),e}}catch(e){console.error("Failed to fetch stack details:",e)}return null},em=async e=>{try{let s=await fetch("/api/stacks/".concat(e,"/containers"),{headers:{Authorization:"Bearer ".concat(a)}});if(s.ok){let e=await s.json();f(e||[])}}catch(e){console.error("Failed to fetch stack containers:",e)}},ex=async()=>{try{let e=await fetch("/api/stacks",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:E,description:A,compose_content:R,env_content:M})});if(e.ok)eo.toast.success("Stack created",{description:'Stack "'.concat(E,'" created successfully')}),b(!1),eg(),es();else{let s=await e.json();eo.toast.error("Failed to create stack",{description:s.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to create stack",{description:e instanceof Error?e.message:"Unknown error"})}},eh=async()=>{if(p)try{let e=await fetch("/api/stacks/".concat(p.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:E||p.name,description:A,compose_content:R,env_content:M})});if(e.ok)eo.toast.success("Stack updated",{description:'Stack "'.concat(p.name,'" updated successfully')}),S(!1),es();else{let s=await e.json();eo.toast.error("Failed to update stack",{description:s.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to update stack",{description:e instanceof Error?e.message:"Unknown error"})}},eu=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(p)try{let s=await fetch("/api/stacks/".concat(p.id,"?volumes=").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(s.ok)eo.toast.success("Stack deleted",{description:'Stack "'.concat(p.name,'" deleted successfully')}),T(!1),j(null),es();else{let e=await s.json();eo.toast.error("Failed to delete stack",{description:e.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to delete stack",{description:e instanceof Error?e.message:"Unknown error"})}},ep=async()=>{if(!p)return;G(!0),Y([]),Q(0);let e="https:"===window.location.protocol?"wss:":"ws:",s=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/stacks/").concat(p.id,"/deploy?token=").concat(a));s.onmessage=e=>{let s=JSON.parse(e.data);s.output&&(Y(e=>[...e,s.output]),Q(e=>Math.min(e+2,90))),s.message&&Y(e=>[...e,"[INFO] ".concat(s.message)]),s.complete&&(G(!1),Q(100),s.success?(eo.toast.success("Stack deployed",{description:'Stack "'.concat(p.name,'" is now running')}),es()):eo.toast.error("Deployment failed",{description:s.error||"Unknown error"}))},s.onerror=()=>{G(!1),eo.toast.error("Connection error",{description:"Failed to connect to deployment service"})}},ej=async e=>{if(p)try{let s=await fetch("/api/stacks/".concat(p.id,"/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(a)}});if(s.ok)eo.toast.success("Stack ".concat(e,"ed"),{description:'Stack "'.concat(p.name,'" ').concat(e,"ed successfully")}),es();else{let t=await s.json();eo.toast.error("Failed to ".concat(e," stack"),{description:t.error||"Unknown error"})}}catch(s){eo.toast.error("Failed to ".concat(e," stack"),{description:s instanceof Error?s.message:"Unknown error"})}},eg=()=>{U(""),O(""),H('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),W("")},ef=async e=>{let s=await ed(e.id);s&&(U(s.name),O(s.description),H(s.compose_content),W(s.env_content),S(!0))},eN=async e=>{await ed(e.id),Y([]),Q(0),I(!0)},ev=async e=>{await ed(e.id),await em(e.id),_(!0)},eb=e=>{switch(e){case"active":return"text-accent";case"partial":return"text-primary";case"stopped":default:return"text-muted-foreground";case"error":return"text-destructive";case"deploying":return"text-blue-400"}},ew=o.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()));return n?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(K.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(c.Input,{placeholder:"Search stacks...",value:h,onChange:e=>u(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),r&&(0,s.jsxs)(i.Button,{onClick:()=>b(!0),className:"gap-2",children:[(0,s.jsx)(er.Plus,{className:"w-4 h-4"})," Create Stack"]})]}),m?(0,s.jsx)(l.Card,{className:"bg-card/70 border-border/50",children:(0,s.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)(P.Loader2,{className:"w-8 h-8 mx-auto mb-4 animate-spin text-accent"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading stacks..."})]})}):0===ew.length?(0,s.jsx)(l.Card,{className:"bg-card/70 border-border/50",children:(0,s.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)(ee.Layers,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground/50"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Stacks Found"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:h?"No stacks match your search":"Create your first stack to get started"}),r&&!h&&(0,s.jsxs)(i.Button,{onClick:()=>b(!0),className:"gap-2",children:[(0,s.jsx)(er.Plus,{className:"w-4 h-4"})," Create Stack"]})]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ew.map(e=>(0,s.jsxs)(l.Card,{className:"bg-card/70 border-border/50 hover:border-accent/50 transition-colors",children:[(0,s.jsxs)(l.CardHeader,{className:"pb-2",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ee.Layers,{className:"w-5 h-5 text-accent"}),(0,s.jsx)(l.CardTitle,{className:"text-base",children:e.name})]}),(e=>{switch(e){case"active":return(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-accent"});case"partial":return(0,s.jsx)(L.AlertCircle,{className:"w-4 h-4 text-primary"});case"stopped":return(0,s.jsx)(ei.XCircle,{className:"w-4 h-4 text-muted-foreground"});case"error":return(0,s.jsx)(ei.XCircle,{className:"w-4 h-4 text-destructive"});case"deploying":return(0,s.jsx)(P.Loader2,{className:"w-4 h-4 text-blue-400 animate-spin"});default:return(0,s.jsx)(L.AlertCircle,{className:"w-4 h-4"})}})(e.status)]}),e.description&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Containers"}),(0,s.jsxs)("span",{className:eb(e.status),children:[e.running_count,"/",e.container_count," running"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Status"}),(0,s.jsx)(z.Badge,{variant:"outline",className:"".concat(eb(e.status)," border-current"),children:e.status.toUpperCase()})]}),(0,s.jsx)(ea.Separator,{}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)(i.Button,{size:"sm",variant:"ghost",onClick:()=>ev(e),className:"gap-1 flex-1",children:[(0,s.jsx)(ec.Eye,{className:"w-3 h-3"})," View"]}),r&&(0,s.jsxs)(s.Fragment,{children:["stopped"===e.status||"error"===e.status?(0,s.jsxs)(i.Button,{size:"sm",variant:"ghost",onClick:()=>eN(e),className:"gap-1 flex-1 text-accent hover:text-accent",children:[(0,s.jsx)(w.Play,{className:"w-3 h-3"})," Deploy"]}):(0,s.jsxs)(i.Button,{size:"sm",variant:"ghost",onClick:()=>{j(e),ej("stop")},className:"gap-1 flex-1 text-destructive hover:text-destructive",children:[(0,s.jsx)(y.Square,{className:"w-3 h-3"})," Stop"]}),(0,s.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>ef(e),className:"gap-1",children:(0,s.jsx)(en.Edit,{className:"w-3 h-3"})}),(0,s.jsx)(i.Button,{size:"sm",variant:"ghost",onClick:()=>{j(e),T(!0)},className:"gap-1 text-destructive hover:text-destructive",children:(0,s.jsx)(k.Trash2,{className:"w-3 h-3"})})]})]})]})]},e.id))}),(0,s.jsx)(J.Dialog,{open:N,onOpenChange:b,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(ee.Layers,{className:"w-5 h-5"}),"Create New Stack"]}),(0,s.jsx)(J.DialogDescription,{children:"Define a new stack using a Docker Compose file"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"name",children:"Stack Name"}),(0,s.jsx)(c.Input,{id:"name",value:E,onChange:e=>U(e.target.value),placeholder:"my-stack"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(c.Input,{id:"description",value:A,onChange:e=>O(e.target.value),placeholder:"Optional description"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"compose",children:"Docker Compose (YAML)"}),(0,s.jsx)("textarea",{id:"compose",value:R,onChange:e=>H(e.target.value),className:"w-full h-64 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",placeholder:"version: '3.8'..."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"env",children:"Environment Variables (.env)"}),(0,s.jsx)("textarea",{id:"env",value:M,onChange:e=>W(e.target.value),className:"w-full h-24 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none",placeholder:"KEY=value"})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:ex,disabled:!E||!R,children:"Create Stack"})]})]})}),(0,s.jsx)(J.Dialog,{open:C,onOpenChange:S,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(en.Edit,{className:"w-5 h-5"}),"Edit Stack: ",null==p?void 0:p.name]}),(0,s.jsx)(J.DialogDescription,{children:"Modify the stack configuration. Changes require redeployment."})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-name",children:"Stack Name"}),(0,s.jsx)(c.Input,{id:"edit-name",value:E,onChange:e=>U(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-description",children:"Description"}),(0,s.jsx)(c.Input,{id:"edit-description",value:A,onChange:e=>O(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-compose",children:"Docker Compose (YAML)"}),(0,s.jsx)("textarea",{id:"edit-compose",value:R,onChange:e=>H(e.target.value),className:"w-full h-64 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-env",children:"Environment Variables (.env)"}),(0,s.jsx)("textarea",{id:"edit-env",value:M,onChange:e=>W(e.target.value),className:"w-full h-24 px-3 py-2 font-mono text-sm bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-accent resize-none"})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:eh,children:"Save Changes"})]})]})}),(0,s.jsx)(J.Dialog,{open:F,onOpenChange:e=>!V&&I(e),children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Play,{className:"w-5 h-5"}),"Deploy Stack: ",null==p?void 0:p.name]}),(0,s.jsx)(J.DialogDescription,{children:"Deploy the stack to start all containers"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[V&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Deploying..."}),(0,s.jsxs)("span",{className:"text-accent",children:[Z,"%"]})]}),(0,s.jsx)(et.Progress,{value:Z,className:"h-2"})]}),(0,s.jsx)("div",{ref:$,className:"bg-muted/50 border border-border rounded-lg p-4 h-64 overflow-y-auto font-mono text-xs",children:0===X.length?(0,s.jsx)("span",{className:"text-muted-foreground",children:V?"Starting deployment...":"Ready to deploy"}):X.map((e,t)=>(0,s.jsx)("div",{className:"text-foreground/80 whitespace-pre-wrap",children:e},t))})]}),(0,s.jsxs)(J.DialogFooter,{children:[!V&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,s.jsxs)(i.Button,{onClick:ep,className:"gap-2",children:[(0,s.jsx)(w.Play,{className:"w-4 h-4"})," Deploy"]})]}),V&&100===Z&&(0,s.jsx)(i.Button,{onClick:()=>I(!1),children:"Close"})]})]})}),(0,s.jsx)(J.Dialog,{open:D,onOpenChange:T,children:(0,s.jsxs)(J.DialogContent,{children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)(k.Trash2,{className:"w-5 h-5"}),"Delete Stack"]}),(0,s.jsxs)(J.DialogDescription,{children:['Are you sure you want to delete "',null==p?void 0:p.name,'"? This will stop and remove all containers in the stack.']})]}),(0,s.jsxs)(J.DialogFooter,{className:"gap-2",children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,s.jsx)(i.Button,{variant:"destructive",onClick:()=>eu(!1),children:"Delete"}),(0,s.jsx)(i.Button,{variant:"destructive",onClick:()=>eu(!0),children:"Delete + Volumes"})]})]})}),(0,s.jsx)(J.Dialog,{open:B,onOpenChange:_,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[600px]",children:[(0,s.jsx)(J.DialogHeader,{children:(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Box,{className:"w-5 h-5"}),"Stack Containers: ",null==p?void 0:p.name]})}),(0,s.jsx)("div",{className:"space-y-2 py-4",children:0===g.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No containers running in this stack"}):g.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["running"===e.status?(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-accent"}):(0,s.jsx)(ei.XCircle,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.service}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.image})]})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.ports.map(e=>"".concat(e.host_port,":").concat(e.container_port)).join(", ")})]},e.name))}),(0,s.jsx)(J.DialogFooter,{children:(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>_(!1),children:"Close"})})]})})]}):(0,s.jsx)(l.Card,{className:"bg-card/70 border-border/50",children:(0,s.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)(L.AlertCircle,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"podman-compose Not Available"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"podman-compose is required to manage stacks. Install it to enable this feature."})]})})}let em=t.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,h.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-y",a),ref:t,...r})});em.displayName="Textarea";var ex=e.i(71435);let eh=(0,Q.default)("file-code-corner",[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]]),eu=(0,Q.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var ep=e.i(69074),ej=e.i(84614),eg=e.i(81399);function ef(e){let{token:a,isAdmin:r}=e,[n,o]=(0,t.useState)([]),[d,m]=(0,t.useState)(!0),[x,h]=(0,t.useState)(""),[u,p]=(0,t.useState)(null),[j,g]=(0,t.useState)(!1),[f,N]=(0,t.useState)(!1),[w,y]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[D,T]=(0,t.useState)(!1),[F,I]=(0,t.useState)(!1),[B,L]=(0,t.useState)(""),[_,E]=(0,t.useState)(""),[U,A]=(0,t.useState)("1.0.0"),[O,R]=(0,t.useState)('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),[H,M]=(0,t.useState)(""),[W,V]=(0,t.useState)(""),[G,Y]=(0,t.useState)(""),[Q,ee]=(0,t.useState)({}),[es,et]=(0,t.useState)(!1),[ea,ei]=(0,t.useState)(""),ec=(0,t.useCallback)(async()=>{try{let e=await fetch("/api/templates",{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let s=await e.json();o(s||[])}}catch(e){console.error("Failed to fetch templates:",e)}finally{m(!1)}},[a]);(0,t.useEffect)(()=>{ec()},[ec]);let ed=()=>{L(""),E(""),A("1.0.0"),R('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),M(""),V("")},ef=e=>{let s={};return e.split("\n").forEach(e=>{let t=e.trim();if(t&&!t.startsWith("#")){let[e,...a]=t.split("=");e&&(s[e.trim()]=a.join("=").trim())}}),s},eN=e=>e.split(",").map(e=>e.trim()).filter(e=>e.length>0),ev=async()=>{if(!B||!O)return void eo.toast.error("Validation Error",{description:"Name and compose content are required"});try{let e=await fetch("/api/templates",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:B,description:_,version:U,compose_content:O,env_defaults:ef(H),tags:eN(W)})});if(e.ok)eo.toast.success("Template Created",{description:'Template "'.concat(B,'" created successfully')}),g(!1),ed(),ec();else{let s=await e.json();eo.toast.error("Failed to create template",{description:s.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to create template",{description:e instanceof Error?e.message:"Unknown error"})}},eb=async()=>{if(u)try{let e=await fetch("/api/templates/".concat(u.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:B||u.name,description:_,version:U,compose_content:O,env_defaults:ef(H),tags:eN(W)})});if(e.ok)eo.toast.success("Template Updated",{description:'Template "'.concat(u.name,'" updated successfully')}),N(!1),ec();else{let s=await e.json();eo.toast.error("Failed to update template",{description:s.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to update template",{description:e instanceof Error?e.message:"Unknown error"})}},ew=async()=>{if(u)try{let e=await fetch("/api/templates/".concat(u.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}});if(e.ok)eo.toast.success("Template Deleted",{description:'Template "'.concat(u.name,'" deleted successfully')}),y(!1),p(null),ec();else{let s=await e.json();eo.toast.error("Failed to delete template",{description:s.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to delete template",{description:e instanceof Error?e.message:"Unknown error"})}},ey=async()=>{if(u){et(!0);try{let e=await fetch("/api/templates/".concat(u.id,"/deploy"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({project_name:G,environment:Q})}),s=await e.json();e.ok?(eo.toast.success("Stack Created from Template",{description:'Stack "'.concat(G||u.name,'" created. Go to Stacks tab to deploy it.')}),S(!1),Y(""),ee({})):eo.toast.error("Failed to deploy template",{description:s.error||"Unknown error"})}catch(e){eo.toast.error("Failed to deploy template",{description:e instanceof Error?e.message:"Unknown error"})}finally{et(!1)}}},eC=async e=>{try{let s=await fetch("/api/templates/".concat(e.id,"/export"),{headers:{Authorization:"Bearer ".concat(a)}});if(s.ok){let t=await s.json(),a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="".concat(e.name,".json"),n.click(),URL.revokeObjectURL(r),eo.toast.success("Template Exported",{description:'Template "'.concat(e.name,'" exported successfully')})}else eo.toast.error("Failed to export template")}catch(e){eo.toast.error("Failed to export template",{description:e instanceof Error?e.message:"Unknown error"})}},ek=async e=>{try{let s=await fetch("/api/templates/".concat(e.id,"/export"),{headers:{Authorization:"Bearer ".concat(a)}});if(s.ok){let e=await s.json();await navigator.clipboard.writeText(JSON.stringify(e,null,2)),eo.toast.success("Copied to Clipboard",{description:"Template JSON copied to clipboard"})}}catch(e){eo.toast.error("Failed to copy template",{description:e instanceof Error?e.message:"Unknown error"})}},eS=async()=>{let e;if(!ea.trim())return void eo.toast.error("Validation Error",{description:"Please paste template JSON"});try{e=JSON.parse(ea)}catch(e){eo.toast.error("Invalid JSON",{description:"Please check the JSON format"});return}try{let s=await fetch("/api/templates/import",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:ea});if(s.ok)eo.toast.success("Template Imported",{description:'Template "'.concat(e.name,'" imported successfully')}),T(!1),ei(""),ec();else{let e=await s.json();eo.toast.error("Failed to import template",{description:e.error||"Unknown error"})}}catch(e){eo.toast.error("Failed to import template",{description:e instanceof Error?e.message:"Unknown error"})}},eD=e=>{if(p(e),L(e.name),E(e.description),A(e.version),R(e.compose_content),e.env_defaults)try{let s=JSON.parse(e.env_defaults);M(Object.entries(s).map(e=>{let[s,t]=e;return"".concat(s,"=").concat(t)}).join("\n"))}catch(e){M("")}else M("");if(e.tags)try{let s=JSON.parse(e.tags);V(s.join(", "))}catch(e){V("")}else V("");N(!0)},eT=e=>{if(p(e),Y(""),e.env_defaults)try{let s=JSON.parse(e.env_defaults);ee(s)}catch(e){ee({})}else ee({});S(!0)},eF=n.filter(e=>{let s=x.toLowerCase();return e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.author.toLowerCase().includes(s)}),eI=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),eB=e=>{if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}};return d?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(P.Loader2,{className:"w-8 h-8 animate-spin text-accent"})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(K.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(c.Input,{placeholder:"Search templates...",value:x,onChange:e=>h(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),r&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.Button,{variant:"outline",onClick:()=>T(!0),className:"gap-2",children:[(0,s.jsx)(ep.Upload,{className:"w-4 h-4"})," Import"]}),(0,s.jsxs)(i.Button,{onClick:()=>{ed(),g(!0)},className:"gap-2",children:[(0,s.jsx)(er.Plus,{className:"w-4 h-4"})," New Template"]})]})]}),0===eF.length?(0,s.jsx)(l.Card,{className:"border-border/50 bg-card/70",children:(0,s.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,s.jsx)(eh,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Templates"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:x?"No templates match your search":"Save your container configurations as reusable templates"}),r&&!x&&(0,s.jsxs)(i.Button,{onClick:()=>{ed(),g(!0)},className:"gap-2",children:[(0,s.jsx)(er.Plus,{className:"w-4 h-4"})," Create First Template"]})]})}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:eF.map(e=>(0,s.jsxs)(l.Card,{className:"border-border/50 bg-card/70 hover:bg-card/90 transition-colors cursor-pointer",onClick:()=>{p(e),I(!0)},children:[(0,s.jsx)(l.CardHeader,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eh,{className:"w-5 h-5 text-cyan-400"}),(0,s.jsx)(l.CardTitle,{className:"text-base font-medium",children:e.name})]}),(0,s.jsxs)(z.Badge,{variant:"outline",className:"text-xs",children:["v",e.version||"1.0"]})]})}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description||"No description"}),eB(e.tags).length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[eB(e.tags).slice(0,3).map(e=>(0,s.jsxs)(z.Badge,{variant:"secondary",className:"text-xs",children:[(0,s.jsx)(Z.Tag,{className:"w-3 h-3 mr-1"}),e]},e)),eB(e.tags).length>3&&(0,s.jsxs)(z.Badge,{variant:"secondary",className:"text-xs",children:["+",eB(e.tags).length-3]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ej.User,{className:"w-3 h-3"}),e.author]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(v.Box,{className:"w-3 h-3"}),e.usage_count," deploys"]})]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)($,{className:"w-3 h-3"}),eI(e.created_at)]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",onClick:e=>e.stopPropagation(),children:[r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>eT(e),className:"flex-1 gap-1",children:[(0,s.jsx)(eu,{className:"w-3 h-3"})," Deploy"]}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>eD(e),children:(0,s.jsx)(en.Edit,{className:"w-3 h-3"})}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>eC(e),children:(0,s.jsx)(X.Download,{className:"w-3 h-3"})}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>ek(e),children:(0,s.jsx)(b.Copy,{className:"w-3 h-3"})}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{p(e),y(!0)},className:"text-destructive hover:text-destructive",children:(0,s.jsx)(k.Trash2,{className:"w-3 h-3"})})]}),!r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>eC(e),className:"gap-1",children:[(0,s.jsx)(X.Download,{className:"w-3 h-3"})," Export"]}),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>ek(e),children:(0,s.jsx)(b.Copy,{className:"w-3 h-3"})})]})]})]})]},e.id))}),(0,s.jsx)(J.Dialog,{open:j,onOpenChange:g,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-2xl max-h-[90vh]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(eh,{className:"w-5 h-5 text-cyan-400"}),"Create Template"]}),(0,s.jsx)(J.DialogDescription,{children:"Save a container configuration as a reusable template"})]}),(0,s.jsx)(ex.ScrollArea,{className:"max-h-[60vh]",children:(0,s.jsxs)("div",{className:"space-y-4 p-1",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"name",children:"Name *"}),(0,s.jsx)(c.Input,{id:"name",value:B,onChange:e=>L(e.target.value),placeholder:"my-app-template",className:"bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"version",children:"Version"}),(0,s.jsx)(c.Input,{id:"version",value:U,onChange:e=>A(e.target.value),placeholder:"1.0.0",className:"bg-background/50"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(em,{id:"description",value:_,onChange:e=>E(e.target.value),placeholder:"Describe what this template does...",rows:2,className:"bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"compose",children:"Docker Compose Content *"}),(0,s.jsx)(em,{id:"compose",value:O,onChange:e=>R(e.target.value),placeholder:"version: '3.8'\\nservices:\\n  ...",rows:12,className:"font-mono text-sm bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"env",children:"Environment Variables (KEY=value, one per line)"}),(0,s.jsx)(em,{id:"env",value:H,onChange:e=>M(e.target.value),placeholder:"DATABASE_URL=postgres://localhost/db API_KEY=",rows:4,className:"font-mono text-sm bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"tags",children:"Tags (comma-separated)"}),(0,s.jsx)(c.Input,{id:"tags",value:W,onChange:e=>V(e.target.value),placeholder:"web, database, monitoring",className:"bg-background/50"})]})]})}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,s.jsxs)(i.Button,{onClick:ev,className:"gap-2",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4"})," Create Template"]})]})]})}),(0,s.jsx)(J.Dialog,{open:f,onOpenChange:N,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-2xl max-h-[90vh]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(en.Edit,{className:"w-5 h-5 text-cyan-400"}),"Edit Template"]}),(0,s.jsx)(J.DialogDescription,{children:"Update template configuration"})]}),(0,s.jsx)(ex.ScrollArea,{className:"max-h-[60vh]",children:(0,s.jsxs)("div",{className:"space-y-4 p-1",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-name",children:"Name"}),(0,s.jsx)(c.Input,{id:"edit-name",value:B,onChange:e=>L(e.target.value),className:"bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-version",children:"Version"}),(0,s.jsx)(c.Input,{id:"edit-version",value:U,onChange:e=>A(e.target.value),className:"bg-background/50"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-description",children:"Description"}),(0,s.jsx)(em,{id:"edit-description",value:_,onChange:e=>E(e.target.value),rows:2,className:"bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-compose",children:"Docker Compose Content"}),(0,s.jsx)(em,{id:"edit-compose",value:O,onChange:e=>R(e.target.value),rows:12,className:"font-mono text-sm bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-env",children:"Environment Variables"}),(0,s.jsx)(em,{id:"edit-env",value:H,onChange:e=>M(e.target.value),rows:4,className:"font-mono text-sm bg-background/50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-tags",children:"Tags"}),(0,s.jsx)(c.Input,{id:"edit-tags",value:W,onChange:e=>V(e.target.value),className:"bg-background/50"})]})]})}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,s.jsxs)(i.Button,{onClick:eb,className:"gap-2",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4"})," Save Changes"]})]})]})}),(0,s.jsx)(J.Dialog,{open:w,onOpenChange:y,children:(0,s.jsxs)(J.DialogContent,{children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)(k.Trash2,{className:"w-5 h-5"}),"Delete Template"]}),(0,s.jsxs)(J.DialogDescription,{children:["Are you sure you want to delete ",(0,s.jsx)("strong",{children:null==u?void 0:u.name}),"? This action cannot be undone."]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,s.jsx)(i.Button,{variant:"destructive",onClick:ew,children:"Delete Template"})]})]})}),(0,s.jsx)(J.Dialog,{open:C,onOpenChange:S,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-lg",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(eu,{className:"w-5 h-5 text-cyan-400"}),"Deploy Template"]}),(0,s.jsxs)(J.DialogDescription,{children:["Create a new stack from ",(0,s.jsx)("strong",{children:null==u?void 0:u.name})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"project-name",children:"Project Name (optional)"}),(0,s.jsx)(c.Input,{id:"project-name",value:G,onChange:e=>Y(e.target.value),placeholder:"".concat((null==u?void 0:u.name)||"project","-").concat(new Date().toISOString().slice(0,10)),className:"bg-background/50"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate a unique name"})]}),Object.keys(Q).length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{children:"Environment Variables"}),(0,s.jsx)(ex.ScrollArea,{className:"max-h-48",children:(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(Q).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.Input,{value:t,disabled:!0,className:"w-1/3 bg-background/30 text-muted-foreground text-sm"}),(0,s.jsx)(c.Input,{value:a,onChange:e=>ee(s=>({...s,[t]:e.target.value})),placeholder:"value",className:"bg-background/50 text-sm"})]},t)})})})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,s.jsxs)(i.Button,{onClick:ey,disabled:es,className:"gap-2",children:[es?(0,s.jsx)(P.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(eu,{className:"w-4 h-4"}),es?"Creating...":"Create Stack"]})]})]})}),(0,s.jsx)(J.Dialog,{open:D,onOpenChange:T,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-2xl",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(ep.Upload,{className:"w-5 h-5 text-cyan-400"}),"Import Template"]}),(0,s.jsx)(J.DialogDescription,{children:"Paste exported template JSON to import"})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(em,{value:ea,onChange:e=>ei(e.target.value),placeholder:'{"name": "my-template", "compose_content": "...", ...}',rows:12,className:"font-mono text-sm bg-background/50"})}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,s.jsxs)(i.Button,{onClick:eS,className:"gap-2",children:[(0,s.jsx)(ep.Upload,{className:"w-4 h-4"})," Import"]})]})]})}),(0,s.jsx)(J.Dialog,{open:F,onOpenChange:I,children:(0,s.jsxs)(J.DialogContent,{className:"max-w-3xl max-h-[90vh]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(eg.FileJson,{className:"w-5 h-5 text-cyan-400"}),null==u?void 0:u.name,(0,s.jsxs)(z.Badge,{variant:"outline",className:"ml-2",children:["v",(null==u?void 0:u.version)||"1.0"]})]}),(0,s.jsx)(J.DialogDescription,{children:(null==u?void 0:u.description)||"No description"})]}),(0,s.jsx)(ex.ScrollArea,{className:"max-h-[60vh]",children:(0,s.jsxs)("div",{className:"space-y-4 p-1",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground pb-4 border-b border-border/50",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ej.User,{className:"w-4 h-4"}),"Author: ",null==u?void 0:u.author]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)($,{className:"w-4 h-4"}),"Created: ",u?eI(u.created_at):""]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(v.Box,{className:"w-4 h-4"}),"Used ",null==u?void 0:u.usage_count," times"]})]}),u&&eB(u.tags).length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:eB(u.tags).map(e=>(0,s.jsxs)(z.Badge,{variant:"secondary",children:[(0,s.jsx)(Z.Tag,{className:"w-3 h-3 mr-1"}),e]},e))}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{className:"text-sm font-medium",children:"Compose File"}),(0,s.jsx)("pre",{className:"p-4 rounded-lg bg-background/50 border border-border/50 overflow-x-auto text-sm font-mono whitespace-pre",children:null==u?void 0:u.compose_content})]}),(null==u?void 0:u.env_defaults)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{className:"text-sm font-medium",children:"Default Environment Variables"}),(0,s.jsx)("pre",{className:"p-4 rounded-lg bg-background/50 border border-border/50 overflow-x-auto text-sm font-mono",children:(()=>{try{let e=JSON.parse(u.env_defaults);return Object.entries(e).map(e=>{let[s,t]=e;return"".concat(s,"=").concat(t)}).join("\n")}catch(e){return u.env_defaults}})()})]})]})}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>I(!1),children:"Close"}),r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.Button,{variant:"outline",onClick:()=>{I(!1),u&&eD(u)},className:"gap-2",children:[(0,s.jsx)(en.Edit,{className:"w-4 h-4"})," Edit"]}),(0,s.jsxs)(i.Button,{onClick:()=>{I(!1),u&&eT(u)},className:"gap-2",children:[(0,s.jsx)(eu,{className:"w-4 h-4"})," Deploy"]})]})]})]})})]})}var eN=e.i(19036),ev=e.i(62870),eb=e.i(73708),ew=e.i(3116),ey=e.i(75505);let eC=(0,Q.default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),ek=(0,Q.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function eS(){var e;let{isAuthenticated:m,isLoading:x,token:h,user:u}=(0,r.useAuth)(),{settings:p,updateContainerSettings:j}=(0,n.useSettings)(),g=(0,a.useRouter)(),[f,N]=(0,t.useState)(""),[b,C]=(0,t.useState)(!1),[D,T]=(0,t.useState)(null),_=(null==u?void 0:u.role)==="admin"||(null==u?void 0:u.role)==="operator"||(null==u?void 0:u.is_pam_admin),[z,O]=(0,t.useState)(""),[R,H]=(0,t.useState)(!1),[M,W]=(0,t.useState)(!1),[V,Y]=(0,t.useState)(!1),[Z,Q]=(0,t.useState)(""),[$,ea]=(0,t.useState)(0),[en,ec]=(0,t.useState)([]),[eo,em]=(0,t.useState)(null),[ex,eu]=(0,t.useState)(!1),ep=(0,t.useRef)(null),[ej,eg]=(0,t.useState)([]),[eS,eD]=(0,t.useState)([]),[eT,eF]=(0,t.useState)([]),[eI,eB]=(0,t.useState)([]),[eL,eP]=(0,t.useState)([]),[e_,eE]=(0,t.useState)(""),[eU,eA]=(0,t.useState)("all"),[ez,eO]=(0,t.useState)(null),[eR,eH]=(0,t.useState)(null),[eM,eW]=(0,t.useState)("containers"),[eV,eJ]=(0,t.useState)(!1),[eq,eG]=(0,t.useState)(null),[eK,eX]=(0,t.useState)(null),[eY,eZ]=(0,t.useState)(null),[eQ,e$]=(0,t.useState)(null),[e0,e4]=(0,t.useState)(null),[e2,e1]=(0,t.useState)(!1),[e5,e3]=(0,t.useState)(""),[e8,e6]=(0,t.useState)(!1),[e7,e9]=(0,t.useState)(null),[se,ss]=(0,t.useState)(""),[st,sa]=(0,t.useState)(!1),[sr,sn]=(0,t.useState)(null),[sl,si]=(0,t.useState)(!1),[sc,so]=(0,t.useState)(null),[sd,sm]=(0,t.useState)({hasWebUI:!1,webUIPort:"",webUIPath:"/",icon:"",autoStart:!1}),[sx,sh]=(0,t.useState)(!1),[su,sp]=(0,t.useState)(!1),[sj,sg]=(0,t.useState)(null),[sf,sN]=(0,t.useState)({hasWebUI:!1,webUIPort:"",webUIPath:"/",icon:"",iconLight:"",iconDark:"",autoStart:!1}),[sv,sb]=(0,t.useState)(!1),[sw,sy]=(0,t.useState)({name:"",image:"",ports:"",volumes:"",environment:"",restart_policy:"no"}),sC=(null==u?void 0:u.role)==="admin",sk=(0,t.useCallback)(async()=>{if(h)try{let e=await fetch("/api/containers/check",{headers:{Authorization:"Bearer ".concat(h)}}),s=await e.json();T(s.available),O(s.version||""),H(s.compose_available||!1)}catch(e){T(!1)}},[h]),sS=(0,t.useCallback)(async()=>{if(h&&sC)try{let e=await fetch("/api/storage-config",{headers:{Authorization:"Bearer ".concat(h)}});if(e.ok){let s=await e.json();e9(s),ss(s.graph_root)}}catch(e){}},[h,sC]),sD=async()=>{if(h&&se){sa(!0),sn(null);try{let e=await fetch("/api/storage-config",{method:"PUT",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({graph_root:se})}),s=await e.json();if(!e.ok)return void sn(s.error||"Failed to update storage location");await sS(),await Promise.all([sT(),sI()])}catch(e){sn("Failed to update storage location")}finally{sa(!1)}}},sT=(0,t.useCallback)(async()=>{if(h)try{let e=await fetch("/api/containers",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch containers");let s=await e.json();eg(s||[]),eO(null)}catch(e){eO(e instanceof Error?e.message:"Failed to load containers")}},[h]),sF=(0,t.useCallback)(async()=>{if(h)try{let e=await fetch("/api/images",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch images");let s=await e.json();eD(s||[])}catch(e){console.error("Failed to load images:",e)}},[h]),sI=(0,t.useCallback)(async()=>{if(h)try{let e=await fetch("/api/volumes",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch volumes");let s=await e.json();eF(s||[])}catch(e){console.error("Failed to load volumes:",e)}},[h]),sB=(0,t.useCallback)(async()=>{if(h)try{let e=await fetch("/api/bind-mounts",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch bind mounts");let s=await e.json();eB(s||[])}catch(e){console.error("Failed to load bind mounts:",e)}},[h]),sL=(0,t.useCallback)(async()=>{if(h)try{let e=await fetch("/api/podman-networks",{headers:{Authorization:"Bearer ".concat(h)}});if(!e.ok)throw Error("Failed to fetch networks");let s=await e.json();eP(s||[])}catch(e){console.error("Failed to load networks:",e)}},[h]);if((0,t.useEffect)(()=>{x||m?x||!m||_||g.push("/dashboard"):g.push("/login")},[m,x,_,g]),(0,t.useEffect)(()=>{let e=()=>{N(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[]),(0,t.useEffect)(()=>{if(m&&h){sk(),sT(),sF(),sI(),sB(),sL(),sS();let e=setInterval(()=>{sT()},5e3);return()=>clearInterval(e)}},[m,h,sk,sT,sF,sI,sB,sL,sS]),x||!m||!_)return(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)(v.Box,{className:"w-12 h-12 text-accent animate-pulse"})});let sP=ej.filter(e=>{let s=e.name.toLowerCase().includes(e_.toLowerCase())||e.image.toLowerCase().includes(e_.toLowerCase()),t="all"===eU||e.status===eU;return s&&t}),s_=ej.filter(e=>"running"===e.status).length,sE=ej.filter(e=>"exited"===e.status||"stopped"===e.status).length,sU=async(e,s)=>{if(h&&("remove"!==s||confirm("Are you sure you want to remove this container?"))){eH(e);try{let t="remove"===s?"/api/containers/".concat(e,"?force=true"):"/api/containers/".concat(e,"/").concat(s),a=await fetch(t,{method:"remove"===s?"DELETE":"POST",headers:{Authorization:"Bearer ".concat(h)}});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to ".concat(s," container"))}await sT()}catch(e){alert(e instanceof Error?e.message:"Failed to ".concat(s," container"))}finally{eH(null)}}},sA=async()=>{if(h&&sc){sh(!0);try{let e=await fetch("/api/containers/adopt",{method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({container_id:sc.container_id,has_web_ui:sd.hasWebUI,web_ui_port:sd.hasWebUI&&parseInt(sd.webUIPort)||0,web_ui_path:sd.webUIPath||"/",icon:sd.icon,auto_start:sd.autoStart})});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.error||"Failed to adopt container")}si(!1),so(null),await sT(),alert('Container "'.concat(sc.name,'" adopted successfully!'))}catch(e){alert(e instanceof Error?e.message:"Failed to adopt container")}finally{sh(!1)}}},sz=async()=>{if(h&&sj){sb(!0);try{let e=await fetch("/api/containers/".concat(sj.container_id),{method:"PUT",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({has_web_ui:sf.hasWebUI,web_ui_port:sf.hasWebUI&&parseInt(sf.webUIPort)||0,web_ui_path:sf.webUIPath||"/",icon:sf.icon,icon_light:sf.iconLight,icon_dark:sf.iconDark,auto_start:sf.autoStart})});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.error||"Failed to update container")}sp(!1),sg(null),await sT(),alert('Container "'.concat(sj.name,'" updated successfully!'))}catch(e){alert(e instanceof Error?e.message:"Failed to update container")}finally{sb(!1)}}},sO=async()=>{if(h&&sw.name&&sw.image){eH("create");try{let e=sw.ports?sw.ports.split(",").map(e=>{let[s,t]=e.trim().split(":");return{host_port:parseInt(s),container_port:parseInt(t),protocol:"tcp"}}):[],s=sw.volumes?sw.volumes.split(",").map(e=>{let[s,t]=e.trim().split(":");return{source:s,target:t,type:"bind"}}):[],t={};sw.environment&&sw.environment.split(",").forEach(e=>{let[s,...a]=e.trim().split("=");t[s]=a.join("=")});let a=await fetch("/api/containers",{method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({name:sw.name,image:sw.image,ports:e,volumes:s,environment:t,restart_policy:sw.restart_policy,auto_start:!0})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to create container")}eJ(!1),sy({name:"",image:"",ports:"",volumes:"",environment:"",restart_policy:"no"}),await sT()}catch(e){alert(e instanceof Error?e.message:"Failed to create container")}finally{eH(null)}}},sR=async e=>{if(h&&confirm("Are you sure you want to remove this volume?"))try{let s=await fetch("/api/volumes/".concat(e,"?force=true"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(h)}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||"Failed to remove volume")}await sI()}catch(e){alert(e instanceof Error?e.message:"Failed to remove volume")}},sH=async()=>{if(h&&e5.trim()){e6(!0);try{let e=await fetch("/api/volumes",{method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({name:e5.trim()})});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.error||"Failed to create volume")}e1(!1),e3(""),await sI()}catch(e){alert(e instanceof Error?e.message:"Failed to create volume")}finally{e6(!1)}}};return!1===D?(0,s.jsxs)(o.DashboardLayout,{title:"CONTAINER MANAGER",time:f,children:[(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)(l.Card,{className:"border-amber-500/50 bg-card/70 max-w-2xl mx-auto",children:[(0,s.jsxs)(l.CardHeader,{className:"text-center pb-2",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 rounded-2xl bg-amber-500/20 border border-amber-500/40 flex items-center justify-center mb-4",children:(0,s.jsx)(G.Package,{className:"w-8 h-8 text-amber-500"})}),(0,s.jsx)(l.CardTitle,{className:"text-xl",children:"Podman Not Installed"})]}),(0,s.jsxs)(l.CardContent,{className:"text-center space-y-6",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"Podman is required for container management but is not currently installed on this system. Install Podman to create and manage containers, images, volumes, and networks."}),(0,s.jsxs)("div",{className:"bg-background/50 rounded-lg p-4 text-left",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-foreground mb-3",children:"What will be installed:"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-accent"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"EPEL Release"})," - Required repository for Podman packages"]})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-accent"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Podman"})," - Container engine (Docker-compatible)"]})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-accent"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Podman Compose"})," - Docker Compose compatibility layer"]})]})]})]}),sC?(0,s.jsxs)(i.Button,{size:"lg",onClick:()=>{W(!0),Y(!0),Q(""),ea(0),ec([]),em(null),eu(!1);let e="https:"===window.location.protocol?"wss:":"ws:",s=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/containers/install?token=").concat(encodeURIComponent(h||"")));s.onmessage=e=>{try{let s=JSON.parse(e.data);if(s.complete){if(Y(!1),s.success)eu(!0),O(s.version||""),ea(100),ec(e=>[...e,"Podman v".concat(s.version," installed successfully!")]);else{let e="string"==typeof s.error?s.error:"Installation failed";em(e)}return}s.step&&(Q(s.step),ea({epel:25,podman:50,compose:75,verify:90}[s.step]||0)),s.message&&ec(e=>[...e,s.message]),s.output&&ec(e=>[...e,s.output]),ep.current&&(ep.current.scrollTop=ep.current.scrollHeight)}catch(e){}},s.onerror=()=>{Y(!1),em("WebSocket connection failed")},s.onclose=()=>{V&&Y(!1)}},className:"gap-2 px-8",children:[(0,s.jsx)(X.Download,{className:"w-5 h-5"}),"Install Podman"]}):(0,s.jsxs)("div",{className:"text-sm text-muted-foreground bg-muted/50 rounded-lg p-4",children:[(0,s.jsx)(L.AlertCircle,{className:"w-4 h-4 inline mr-2"}),"Administrator privileges required to install Podman. Please contact your system administrator."]})]})]})}),(0,s.jsx)(J.Dialog,{open:M,onOpenChange:e=>!V&&W(e),children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsx)(J.DialogTitle,{className:"flex items-center gap-2",children:V?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Loader2,{className:"w-5 h-5 animate-spin text-accent"}),"Installing Podman..."]}):ex?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el.CheckCircle2,{className:"w-5 h-5 text-green-500"}),"Installation Complete"]}):eo?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ei.XCircle,{className:"w-5 h-5 text-destructive"}),"Installation Failed"]}):"Podman Installation"}),(0,s.jsx)(J.DialogDescription,{children:V?"Please wait while Podman and related packages are being installed...":ex?"Podman v".concat(z," has been successfully installed."):eo||"Ready to install Podman"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground capitalize",children:Z||"Preparing..."}),(0,s.jsxs)("span",{className:"text-accent",children:[$,"%"]})]}),(0,s.jsx)(et.Progress,{value:$,className:"h-2"})]}),(0,s.jsx)("div",{ref:ep,className:"bg-muted/50 border border-border rounded-lg p-4 h-64 overflow-y-auto font-mono text-xs",children:0===en.length?(0,s.jsx)("span",{className:"text-muted-foreground",children:"Waiting for installation output..."}):en.map((e,t)=>(0,s.jsx)("div",{className:"text-foreground/80 whitespace-pre-wrap",children:e},t))})]}),(0,s.jsx)(J.DialogFooter,{children:!V&&(0,s.jsx)(i.Button,{onClick:()=>{W(!1),ex&&(T(!0),sk())},children:ex?"Continue to Container Manager":"Close"})})]})})]}):(0,s.jsxs)(o.DashboardLayout,{title:"CONTAINER MANAGER",time:f,children:[(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Containers"}),(0,s.jsx)(v.Box,{className:"w-4 h-4 text-accent"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:ej.length}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[s_," running, ",sE," stopped"]})]})]}),(0,s.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Running"}),(0,s.jsx)(w.Play,{className:"w-4 h-4 text-primary"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:s_})})]}),(0,s.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Images"}),(0,s.jsx)(eb.Image,{className:"w-4 h-4 text-accent"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:eS.length})})]}),(0,s.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Volumes"}),(0,s.jsx)(I.HardDrive,{className:"w-4 h-4 text-accent"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:eT.length})})]}),(0,s.jsxs)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Networks"}),(0,s.jsx)(F.Network,{className:"w-4 h-4 text-accent"})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:eL.length})})]})]}),z&&(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-3 h-3 text-green-500"}),"Podman v",z]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[R?(0,s.jsx)(el.CheckCircle2,{className:"w-3 h-3 text-green-500"}):(0,s.jsx)(ei.XCircle,{className:"w-3 h-3 text-muted-foreground"}),"podman-compose ",R?"available":"not installed"]})]}),(0,s.jsxs)(d.Tabs,{value:eM,onValueChange:eW,className:"space-y-4",children:[(0,s.jsxs)(d.TabsList,{className:"bg-card/70 border border-border/50",children:[(0,s.jsxs)(d.TabsTrigger,{value:"containers",className:"gap-2",children:[(0,s.jsx)(v.Box,{className:"w-4 h-4"})," Containers"]}),(0,s.jsxs)(d.TabsTrigger,{value:"images",className:"gap-2",children:[(0,s.jsx)(eb.Image,{className:"w-4 h-4"})," Images"]}),(0,s.jsxs)(d.TabsTrigger,{value:"volumes",className:"gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-4 h-4"})," Volumes"]}),(0,s.jsxs)(d.TabsTrigger,{value:"networks",className:"gap-2",children:[(0,s.jsx)(F.Network,{className:"w-4 h-4"})," Networks"]}),(0,s.jsxs)(d.TabsTrigger,{value:"stacks",className:"gap-2",children:[(0,s.jsx)(ee.Layers,{className:"w-4 h-4"})," Stacks"]}),(0,s.jsxs)(d.TabsTrigger,{value:"templates",className:"gap-2",children:[(0,s.jsx)(eh,{className:"w-4 h-4"})," Templates"]})]}),(0,s.jsxs)(d.TabsContent,{value:"containers",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(K.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(c.Input,{placeholder:"Search containers...",value:e_,onChange:e=>eE(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),(0,s.jsxs)("select",{value:eU,onChange:e=>eA(e.target.value),className:"px-3 py-2 rounded-md bg-card/70 border border-border/50 text-sm",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"running",children:"Running"}),(0,s.jsx)("option",{value:"exited",children:"Stopped"})]})]}),sC&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.Button,{variant:"outline",onClick:()=>C(!0),className:"gap-2",children:[(0,s.jsx)(B.Settings,{className:"w-4 h-4"})," Settings"]}),(0,s.jsxs)(i.Button,{onClick:()=>g.push("/container-create"),className:"gap-2",children:[(0,s.jsx)(er.Plus,{className:"w-4 h-4"})," Create Container"]})]})]}),ez&&(0,s.jsx)(l.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,s.jsx)(l.CardContent,{className:"py-3",children:(0,s.jsx)("p",{className:"text-sm text-destructive",children:ez})})}),(0,s.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,s.jsx)(l.CardContent,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border/50",children:[(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Image"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Ports"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===sP.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"p-8 text-center text-muted-foreground",children:"No containers found"})}):sP.map(e=>(0,s.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,s.jsxs)("td",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"running":return(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-primary"});case"exited":case"stopped":return(0,s.jsx)(ei.XCircle,{className:"w-4 h-4 text-muted-foreground"});case"dead":case"error":return(0,s.jsx)(L.AlertCircle,{className:"w-4 h-4 text-destructive"});default:return(0,s.jsx)(ew.Clock,{className:"w-4 h-4 text-yellow-500"})}})(e.status),(0,s.jsx)("span",{className:"font-medium",children:e.name})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:e.container_id.substring(0,12)})]}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"text-sm",children:e.image})}),(0,s.jsxs)("td",{className:"p-4",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("running"===e.status?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:e.status}),e.uptime&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.uptime})]}),(0,s.jsx)("td",{className:"p-4",children:e.ports&&e.ports.length>0?(0,s.jsx)("div",{className:"space-y-1",children:e.ports.map((e,t)=>(0,s.jsxs)("div",{className:"text-xs font-mono",children:[e.host_port,":",e.container_port,"/",e.protocol]},t))}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-1",children:[sC&&("running"===e.status?(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>sU(e.container_id,"stop"),disabled:eR===e.container_id,title:"Stop",children:eR===e.container_id?(0,s.jsx)(P.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(y.Square,{className:"w-4 h-4"})}):(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>sU(e.container_id,"start"),disabled:eR===e.container_id,title:"Start",children:eR===e.container_id?(0,s.jsx)(P.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(w.Play,{className:"w-4 h-4"})})),(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>g.push("/container-details?id=".concat(e.id||e.container_id)),title:"View Details",className:"text-cyan-400 hover:text-cyan-400",children:(0,s.jsx)(S.ExternalLink,{className:"w-4 h-4"})}),sC&&!(e.id&&""!==e.id&&e.id!==e.container_id)&&(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>(e=>{var s;so(e);let t=null==(s=e.ports)?void 0:s.find(e=>80===e.container_port||443===e.container_port||8080===e.container_port||3e3===e.container_port);sm({hasWebUI:!!t,webUIPort:t?String(t.host_port):"",webUIPath:"/",icon:e.name.split("-")[0].toLowerCase(),autoStart:!1}),si(!0)})(e),title:"Adopt Container",className:"text-amber-400 hover:text-amber-400",children:(0,s.jsx)(G.Package,{className:"w-4 h-4"})}),sC&&(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>sU(e.container_id,"remove"),disabled:eR===e.container_id||"running"===e.status,className:"text-destructive hover:text-destructive",title:"running"===e.status?"Stop container first":"Remove",children:(0,s.jsx)(k.Trash2,{className:"w-4 h-4"})})]})})]},e.container_id))})]})})})})]}),(0,s.jsx)(d.TabsContent,{value:"images",className:"space-y-4",children:(0,s.jsx)(es,{onRefresh:sF})}),(0,s.jsxs)(d.TabsContent,{value:"volumes",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(ey.FolderOpen,{className:"w-5 h-5 text-accent"}),"Bind Mounts"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Host directories mounted into containers"}),(0,s.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,s.jsx)(l.CardContent,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border/50",children:[(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Host Path"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Container Path"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Container"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Mode"})]})}),(0,s.jsx)("tbody",{children:0===eI.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"p-8 text-center text-muted-foreground",children:"No bind mounts found"})}):eI.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,s.jsx)("td",{className:"p-4 text-sm font-mono text-muted-foreground",children:e.host_path}),(0,s.jsx)("td",{className:"p-4 text-sm font-mono text-muted-foreground",children:e.container_path}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-accent/10 text-accent",children:e.container_name})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.rw?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:e.rw?"RW":"RO"})})]},"".concat(e.container_id,"-").concat(e.host_path,"-").concat(t)))})]})})})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-5 h-5 text-accent"}),"Podman Volumes"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Managed storage volumes created with Podman"})]}),sC&&(0,s.jsxs)(i.Button,{size:"sm",onClick:()=>e1(!0),children:[(0,s.jsx)(er.Plus,{className:"w-4 h-4 mr-2"}),"Create Volume"]})]}),(0,s.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,s.jsx)(l.CardContent,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border/50",children:[(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Driver"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Mount Point"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===eT.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"p-8 text-center text-muted-foreground",children:"No Podman volumes found"})}):eT.map(e=>(0,s.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,s.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,s.jsx)("td",{className:"p-4",children:e.driver}),(0,s.jsx)("td",{className:"p-4 text-sm font-mono text-muted-foreground",children:e.mount_point}),(0,s.jsx)("td",{className:"p-4",children:sC&&(0,s.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>sR(e.name),className:"text-destructive hover:text-destructive",title:"Remove",children:(0,s.jsx)(k.Trash2,{className:"w-4 h-4"})})})]},e.name))})]})})})})]})]}),(0,s.jsxs)(d.TabsContent,{value:"networks",className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Podman Networks"}),(0,s.jsx)(l.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:(0,s.jsx)(l.CardContent,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border/50",children:[(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Driver"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Subnet"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Gateway"}),(0,s.jsx)("th",{className:"text-left p-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Internal"})]})}),(0,s.jsx)("tbody",{children:0===eL.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"p-8 text-center text-muted-foreground",children:"No networks found"})}):eL.map(e=>(0,s.jsxs)("tr",{className:"border-b border-border/30 hover:bg-accent/5 transition-colors",children:[(0,s.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,s.jsx)("td",{className:"p-4",children:e.driver}),(0,s.jsx)("td",{className:"p-4 text-sm font-mono",children:e.subnet||"-"}),(0,s.jsx)("td",{className:"p-4 text-sm font-mono",children:e.gateway||"-"}),(0,s.jsx)("td",{className:"p-4",children:e.internal?(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-primary"}):(0,s.jsx)(ei.XCircle,{className:"w-4 h-4 text-muted-foreground"})})]},e.id))})]})})})})]}),(0,s.jsx)(d.TabsContent,{value:"stacks",className:"space-y-4",children:(0,s.jsx)(ed,{token:h||"",isAdmin:sC,composeAvailable:R})}),(0,s.jsx)(d.TabsContent,{value:"templates",className:"space-y-4",children:(0,s.jsx)(ef,{token:h||"",isAdmin:sC})})]})]}),(0,s.jsx)(J.Dialog,{open:eV,onOpenChange:eJ,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsx)(J.DialogTitle,{children:"Create Container"}),(0,s.jsx)(J.DialogDescription,{children:"Create a new container from an image."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"name",children:"Container Name"}),(0,s.jsx)(c.Input,{id:"name",placeholder:"my-container",value:sw.name,onChange:e=>sy({...sw,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"image",children:"Image"}),(0,s.jsx)(c.Input,{id:"image",placeholder:"nginx:latest",value:sw.image,onChange:e=>sy({...sw,image:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"ports",children:"Ports (host:container, comma-separated)"}),(0,s.jsx)(c.Input,{id:"ports",placeholder:"8080:80, 443:443",value:sw.ports,onChange:e=>sy({...sw,ports:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"volumes",children:"Volumes (host:container, comma-separated)"}),(0,s.jsx)(c.Input,{id:"volumes",placeholder:"/data:/app/data",value:sw.volumes,onChange:e=>sy({...sw,volumes:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"env",children:"Environment Variables (KEY=value, comma-separated)"}),(0,s.jsx)(c.Input,{id:"env",placeholder:"DEBUG=true, API_KEY=xxx",value:sw.environment,onChange:e=>sy({...sw,environment:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"restart",children:"Restart Policy"}),(0,s.jsxs)("select",{id:"restart",value:sw.restart_policy,onChange:e=>sy({...sw,restart_policy:e.target.value}),className:"w-full px-3 py-2 rounded-md bg-background border border-border text-sm",children:[(0,s.jsx)("option",{value:"no",children:"No"}),(0,s.jsx)("option",{value:"always",children:"Always"}),(0,s.jsx)("option",{value:"on-failure",children:"On Failure"}),(0,s.jsx)("option",{value:"unless-stopped",children:"Unless Stopped"})]})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>eJ(!1),children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:sO,disabled:!sw.name||!sw.image||"create"===eR,children:"create"===eR?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Loader2,{className:"w-4 h-4 mr-2 animate-spin"})," Creating..."]}):"Create"})]})]})}),(0,s.jsx)(E,{containerId:eK,onClose:()=>eX(null),onAction:sU,onOpenTerminal:e=>{let s=ej.find(s=>s.container_id===e);s&&(e4(s),e$(s.container_id))},onOpenWebUI:e=>{window.open("/api/containers/".concat(e,"/proxy/"),"_blank")},isAdmin:sC}),(0,s.jsx)(A.ContainerLogs,{containerId:eY,containerName:null==e0?void 0:e0.name,onClose:()=>{eZ(null),e4(null)}}),(0,s.jsx)(U.ContainerTerminal,{containerId:eQ,containerName:null==e0?void 0:e0.name,onClose:()=>{e$(null),e4(null)}}),(0,s.jsx)(J.Dialog,{open:b,onOpenChange:C,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[550px]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(B.Settings,{className:"w-5 h-5 text-accent"}),"Container Settings"]}),(0,s.jsx)(J.DialogDescription,{children:"Configure default settings for container creation"})]}),(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-4 h-4 text-accent"}),(0,s.jsx)(q.Label,{className:"font-medium",children:"Podman Storage Location"})]}),e7?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Current location:"}),(0,s.jsx)("code",{className:"font-mono text-xs bg-background px-2 py-1 rounded",children:e7.graph_root})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Storage driver:"}),(0,s.jsx)("span",{className:"text-xs",children:e7.driver})]}),e7.is_default&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Using default Podman storage location"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{className:"text-sm",children:"Change storage location"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.Input,{placeholder:"/mnt/containers/storage",value:se,onChange:e=>ss(e.target.value),className:"font-mono flex-1",disabled:st}),(0,s.jsx)(i.Button,{variant:"outline",onClick:sD,disabled:st||se===e7.graph_root||!se,children:st?(0,s.jsx)(P.Loader2,{className:"w-4 h-4 animate-spin"}):"Apply"})]})]}),sr&&(0,s.jsx)("div",{className:"p-2 bg-destructive/10 border border-destructive/30 rounded text-xs text-destructive",children:sr}),(0,s.jsx)("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:(0,s.jsxs)("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[(0,s.jsx)("strong",{children:"Warning:"})," Changing storage location will reset Podman storage. All existing containers, images, and volumes will be removed. Stop all containers before changing this setting."]})})]}):(0,s.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg text-sm text-muted-foreground",children:"Storage configuration not available. Podman may not be installed."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{children:"Default Restart Policy"}),(0,s.jsxs)(ev.Select,{value:p.container.defaultRestartPolicy,onValueChange:e=>j({defaultRestartPolicy:e}),children:[(0,s.jsx)(ev.SelectTrigger,{children:(0,s.jsx)(ev.SelectValue,{})}),(0,s.jsxs)(ev.SelectContent,{children:[(0,s.jsx)(ev.SelectItem,{value:"no",children:"No (manual)"}),(0,s.jsx)(ev.SelectItem,{value:"always",children:"Always"}),(0,s.jsx)(ev.SelectItem,{value:"unless-stopped",children:"Unless Stopped"}),(0,s.jsx)(ev.SelectItem,{value:"on-failure",children:"On Failure"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{children:"Default Network Mode"}),(0,s.jsxs)(ev.Select,{value:p.container.defaultNetworkMode,onValueChange:e=>j({defaultNetworkMode:e}),children:[(0,s.jsx)(ev.SelectTrigger,{children:(0,s.jsx)(ev.SelectValue,{})}),(0,s.jsxs)(ev.SelectContent,{children:[(0,s.jsx)(ev.SelectItem,{value:"bridge",children:"Bridge (isolated)"}),(0,s.jsx)(ev.SelectItem,{value:"host",children:"Host (shared)"}),(0,s.jsx)(ev.SelectItem,{value:"none",children:"None"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(w.Play,{className:"w-4 h-4 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(q.Label,{className:"font-medium",children:"Auto-start Containers"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start containers after creation"})]})]}),(0,s.jsx)(eN.Switch,{checked:p.container.autoStartContainers,onCheckedChange:e=>j({autoStartContainers:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eC,{className:"w-4 h-4 text-destructive"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(q.Label,{className:"font-medium",children:"Privileged Mode Default"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Not recommended"})]})]}),(0,s.jsx)(eN.Switch,{checked:p.container.enablePrivilegedByDefault,onCheckedChange:e=>j({enablePrivilegedByDefault:e})})]}),p.container.enablePrivilegedByDefault&&(0,s.jsx)("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg",children:(0,s.jsx)("p",{className:"text-xs text-destructive",children:"Privileged containers have full host access. Use with caution."})})]})]}),(0,s.jsx)(J.DialogFooter,{children:(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>C(!1),children:"Done"})})]})}),(0,s.jsx)(J.Dialog,{open:e2,onOpenChange:e1,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[450px]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"w-5 h-5 text-accent"}),"Create Podman Volume"]}),(0,s.jsx)(J.DialogDescription,{children:"Create a managed volume for persistent container storage"})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"volume-name",children:"Volume Name"}),(0,s.jsx)(c.Input,{id:"volume-name",placeholder:"my-app-data",value:e5,onChange:e=>e3(e.target.value.replace(/[^a-zA-Z0-9_-]/g,"")),disabled:e8}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Only letters, numbers, underscores, and hyphens allowed"})]}),(0,s.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{children:"Managed by Podman"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{children:"Data persists across container restarts"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(el.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{children:"Easy backup and migration"})]})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>{e1(!1),e3("")},disabled:e8,children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:sH,disabled:!e5.trim()||e8,children:e8?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create Volume"})]})]})}),(0,s.jsx)(J.Dialog,{open:sl,onOpenChange:si,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-[500px]",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(G.Package,{className:"w-5 h-5 text-cyan-400"}),"Adopt Container"]}),(0,s.jsxs)(J.DialogDescription,{children:["Configure ",(0,s.jsx)("span",{className:"font-mono text-foreground",children:null==sc?void 0:sc.name})," for Stardeck management. This enables desktop icons and web UI proxy."]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(q.Label,{children:"Has Web UI"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable to add desktop icon and proxy"})]}),(0,s.jsx)(eN.Switch,{checked:sd.hasWebUI,onCheckedChange:e=>sm(s=>({...s,hasWebUI:e}))})]}),sd.hasWebUI&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"web-ui-port",children:"Web UI Host Port"}),(0,s.jsxs)(ev.Select,{value:sd.webUIPort,onValueChange:e=>sm(s=>({...s,webUIPort:e})),children:[(0,s.jsx)(ev.SelectTrigger,{children:(0,s.jsx)(ev.SelectValue,{placeholder:"Select port"})}),(0,s.jsx)(ev.SelectContent,{children:null==sc||null==(e=sc.ports)?void 0:e.map(e=>(0,s.jsxs)(ev.SelectItem,{value:String(e.host_port),children:[e.host_port," → ",e.container_port,"/",e.protocol]},e.host_port))})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select the host port that serves the web interface"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"web-ui-path",children:"Web UI Path"}),(0,s.jsx)(c.Input,{id:"web-ui-path",value:sd.webUIPath,onChange:e=>sm(s=>({...s,webUIPath:e.target.value})),placeholder:"/"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:'Path prefix for the web UI (usually "/")'})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"icon-name",children:"Icon Name"}),(0,s.jsx)(c.Input,{id:"icon-name",value:sd.icon,onChange:e=>sm(s=>({...s,icon:e.target.value})),placeholder:"gitea, nextcloud, etc."}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used for desktop icon display"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(q.Label,{children:"Auto Start"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start container on system boot"})]}),(0,s.jsx)(eN.Switch,{checked:sd.autoStart,onCheckedChange:e=>sm(s=>({...s,autoStart:e}))})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>{si(!1),so(null)},disabled:sx,children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:sA,disabled:sx||sd.hasWebUI&&!sd.webUIPort,className:"gap-2",children:sx?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Loader2,{className:"w-4 h-4 animate-spin"}),"Adopting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G.Package,{className:"w-4 h-4"}),"Adopt Container"]})})]})]})}),(0,s.jsx)(J.Dialog,{open:su,onOpenChange:sp,children:(0,s.jsxs)(J.DialogContent,{className:"sm:max-w-md",children:[(0,s.jsxs)(J.DialogHeader,{children:[(0,s.jsxs)(J.DialogTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(ek,{className:"w-5 h-5 text-amber-400"}),"Edit Container"]}),(0,s.jsxs)(J.DialogDescription,{children:["Update settings for ",null==sj?void 0:sj.name]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-icon-light",children:"Icon URL (Light Theme)"}),(0,s.jsx)(c.Input,{id:"edit-icon-light",placeholder:"https://cdn.jsdelivr.net/gh/selfhst/icons/svg/app-light.svg",value:sf.iconLight,onChange:e=>sN(s=>({...s,iconLight:e.target.value}))}),sf.iconLight&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white border rounded",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Preview:"}),(0,s.jsx)("img",{src:sf.iconLight,alt:"Light icon preview",className:"w-8 h-8 object-contain",onError:e=>e.currentTarget.style.display="none"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-icon-dark",children:"Icon URL (Dark Theme)"}),(0,s.jsx)(c.Input,{id:"edit-icon-dark",placeholder:"https://cdn.jsdelivr.net/gh/selfhst/icons/svg/app-dark.svg",value:sf.iconDark,onChange:e=>sN(s=>({...s,iconDark:e.target.value}))}),sf.iconDark&&(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-900 border border-gray-700 rounded",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Preview:"}),(0,s.jsx)("img",{src:sf.iconDark,alt:"Dark icon preview",className:"w-8 h-8 object-contain",onError:e=>e.currentTarget.style.display="none"})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Icon URLs from selfh.st/icons or other sources. Light theme icons display on light backgrounds, dark theme icons on dark backgrounds."})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-webui",children:"Has Web UI"}),(0,s.jsx)(eN.Switch,{id:"edit-webui",checked:sf.hasWebUI,onCheckedChange:e=>sN(s=>({...s,hasWebUI:e}))})]}),sf.hasWebUI&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-port",children:"Web UI Port"}),(0,s.jsx)(c.Input,{id:"edit-port",type:"number",placeholder:"8080",value:sf.webUIPort,onChange:e=>sN(s=>({...s,webUIPort:e.target.value}))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-path",children:"Web UI Path"}),(0,s.jsx)(c.Input,{id:"edit-path",placeholder:"/",value:sf.webUIPath,onChange:e=>sN(s=>({...s,webUIPath:e.target.value}))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(q.Label,{htmlFor:"edit-autostart",children:"Auto Start"}),(0,s.jsx)(eN.Switch,{id:"edit-autostart",checked:sf.autoStart,onCheckedChange:e=>sN(s=>({...s,autoStart:e}))})]})]}),(0,s.jsxs)(J.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>{sp(!1),sg(null)},disabled:sv,children:"Cancel"}),(0,s.jsx)(i.Button,{onClick:sz,disabled:sv||sf.hasWebUI&&!sf.webUIPort,className:"gap-2",children:sv?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ek,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]})}}]);