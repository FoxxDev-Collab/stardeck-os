(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";e.s(["Card",()=>r,"CardContent",()=>c,"CardDescription",()=>l,"CardHeader",()=>s,"CardTitle",()=>i]);var t=e.i(43476),a=e.i(47163);function r(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...s})}function s(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...s})}function i(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...s})}function l(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...s})}function c(e){let{className:r,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...s})}},23750,e=>{"use strict";e.s(["Input",()=>r]);var t=e.i(43476),a=e.i(47163);function r(e){let{className:r,type:s,...i}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}},63209,e=>{"use strict";e.s(["AlertCircle",()=>t],63209);let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},55436,e=>{"use strict";e.s(["Search",()=>t],55436);let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},95468,e=>{"use strict";e.s(["CheckCircle2",()=>t],95468);let t=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},73884,e=>{"use strict";e.s(["XCircle",()=>t],73884);let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},21482,e=>{"use strict";e.s(["default",()=>j],21482);var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(91432),i=e.i(70065),l=e.i(67881),c=e.i(23750),n=e.i(48654),d=e.i(21218),o=e.i(39616),u=e.i(55436),m=e.i(75254);let x=(0,m.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),f=(0,m.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var h=e.i(91810),p=e.i(95468),g=e.i(73884),b=e.i(63209),v=e.i(81203);function j(){let{isAuthenticated:e,isLoading:m,token:j}=(0,s.useAuth)(),N=(0,r.useRouter)(),[C,y]=(0,a.useState)(""),[w,k]=(0,a.useState)([]),[S,A]=(0,a.useState)(""),[z,T]=(0,a.useState)("all"),[B,E]=(0,a.useState)(null),[R,_]=(0,a.useState)(null),I=(0,a.useCallback)(async()=>{if(j)try{let e=await fetch("/api/services",{headers:{Authorization:"Bearer ".concat(j)}});if(!e.ok)throw Error("Failed to fetch services");let t=await e.json();k(t||[]),E(null)}catch(e){E(e instanceof Error?e.message:"Failed to load services")}},[j]);if((0,a.useEffect)(()=>{m||e||N.push("/login")},[e,m,N]),(0,a.useEffect)(()=>{let e=()=>{y(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{if(e&&j){I();let e=setInterval(I,1e4);return()=>clearInterval(e)}},[e,j,I]),m||!e)return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)(d.Activity,{className:"w-12 h-12 text-accent animate-pulse"})});let F=w.filter(e=>{let t=e.name.toLowerCase().includes(S.toLowerCase()),a="active"===e.active_state?"running":"failed"===e.active_state?"failed":"stopped";return t&&("all"===z||a===z)}),H=w.filter(e=>"active"===e.active_state).length,L=w.filter(e=>"inactive"===e.active_state).length,P=w.filter(e=>"failed"===e.active_state).length,U=async(e,t)=>{if(j){_(e);try{let a=await fetch("/api/services/".concat(e,"/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(j)}});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to ".concat(t," service"))}await I()}catch(e){alert(e instanceof Error?e.message:"Failed to ".concat(t," service"))}finally{_(null)}}},q=e=>"active"===e.active_state?"running":"failed"===e.active_state?"failed":"stopped";return(0,t.jsx)(n.DashboardLayout,{title:"SERVICE MANAGER",time:C,children:(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(i.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(i.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Services"}),(0,t.jsx)(o.Settings,{className:"w-4 h-4 text-accent"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:w.length})})]}),(0,t.jsxs)(i.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(i.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Running"}),(0,t.jsx)(p.CheckCircle2,{className:"w-4 h-4 text-primary"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold text-primary",children:H})})]}),(0,t.jsxs)(i.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(i.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Stopped"}),(0,t.jsx)(g.XCircle,{className:"w-4 h-4 text-muted-foreground"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:L})})]}),(0,t.jsxs)(i.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(i.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Failed"}),(0,t.jsx)(b.AlertCircle,{className:"w-4 h-4 text-destructive"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold text-destructive",children:P})})]})]}),(0,t.jsxs)(i.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,t.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Settings,{className:"w-5 h-5 text-accent"}),"System Services"]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"all"===z?"default":"outline",size:"sm",onClick:()=>T("all"),className:"all"===z?"bg-accent hover:bg-accent/90":"",children:"All"}),(0,t.jsx)(l.Button,{variant:"running"===z?"default":"outline",size:"sm",onClick:()=>T("running"),className:"running"===z?"bg-primary hover:bg-primary/90":"",children:"Running"}),(0,t.jsx)(l.Button,{variant:"stopped"===z?"default":"outline",size:"sm",onClick:()=>T("stopped"),children:"Stopped"}),(0,t.jsx)(l.Button,{variant:"failed"===z?"default":"outline",size:"sm",onClick:()=>T("failed"),className:"failed"===z?"bg-destructive hover:bg-destructive/90":"",children:"Failed"})]}),(0,t.jsxs)("div",{className:"relative flex-1 md:w-64",children:[(0,t.jsx)(u.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search services...",value:S,onChange:e=>A(e.target.value),className:"pl-10 bg-input/80 border-border/60"})]})]})]})}),(0,t.jsxs)(i.CardContent,{children:[B&&(0,t.jsx)("div",{className:"p-4 mb-4 rounded-lg border border-destructive/50 bg-destructive/10 text-destructive",children:B}),(0,t.jsx)("div",{className:"space-y-2",children:F.map((e,a)=>{let r=q(e);return(0,t.jsx)("div",{className:"p-4 rounded-lg border border-border/50 bg-background/40 hover:bg-background/60 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(e=>{switch(q(e)){case"running":return(0,t.jsx)(p.CheckCircle2,{className:"w-4 h-4 text-primary"});case"stopped":return(0,t.jsx)(g.XCircle,{className:"w-4 h-4 text-muted-foreground"});case"failed":return(0,t.jsx)(b.AlertCircle,{className:"w-4 h-4 text-destructive"})}})(e),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:e.name})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[(0,t.jsx)("span",{className:"running"===r?"text-primary":"failed"===r?"text-destructive":"text-muted-foreground",children:r.toUpperCase()}),e.description&&(0,t.jsx)("span",{className:"truncate max-w-md",children:e.description}),e.enabled&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.Power,{className:"w-3 h-3"}),"Auto-start"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>U(e.name,"start"),disabled:"running"===r||R===e.name,className:"gap-2",children:[(0,t.jsx)(x,{className:"w-3 h-3"}),"Start"]}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>U(e.name,"stop"),disabled:"stopped"===r||R===e.name,className:"gap-2",children:[(0,t.jsx)(f,{className:"w-3 h-3"}),"Stop"]}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>U(e.name,"restart"),disabled:"stopped"===r||R===e.name,className:"gap-2",children:[(0,t.jsx)(h.RotateCw,{className:"w-3 h-3"}),"Restart"]})]})]})},"".concat(e.name,"-").concat(a))})})]})]})]})})}}]);