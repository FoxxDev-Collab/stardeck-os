(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82656,e=>{"use strict";e.s(["default",()=>ea],82656);var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(91432),n=e.i(70065),l=e.i(67881),i=e.i(23750),o=e.i(10708),d=e.i(30374),c=e.i(62870),u=e.i(81140),m=e.i(20783),x=e.i(30030),h=e.i(69340);e.i(74080);var p=Symbol("radix.slottable");function g(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===p}var f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let s=function(e){let r=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){var n,l,i;let e,o,d=(o=(e=null==(l=Object.getOwnPropertyDescriptor((n=r).props,"ref"))?void 0:l.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(o=(e=null==(i=Object.getOwnPropertyDescriptor(n,"ref"))?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref,c=function(e,t){let a={...t};for(let r in t){let s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=n(...t);return s(...t),r}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}(s,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,m.composeRefs)(t,d):d),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),s=a.forwardRef((e,s)=>{let{children:n,...l}=e,i=a.Children.toArray(n),o=i.find(g);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(r,{...l,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,t.jsx)(r,{...l,ref:s,children:n})});return s.displayName="".concat(e,".Slot"),s}("Primitive.".concat(r)),n=a.forwardRef((e,a)=>{let{asChild:n,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?s:r,{...l,ref:a})});return n.displayName="Primitive.".concat(r),{...e,[r]:n}},{}),j=e.i(32006),v=e.i(10772),b="DropdownMenu",[y,N]=(0,x.createContextScope)(b,[j.createMenuScope]),w=(0,j.createMenuScope)(),[C,D]=y(b),S=e=>{let{__scopeDropdownMenu:r,children:s,dir:n,open:l,defaultOpen:i,onOpenChange:o,modal:d=!0}=e,c=w(r),u=a.useRef(null),[m,x]=(0,h.useControllableState)({prop:l,defaultProp:null!=i&&i,onChange:o,caller:b});return(0,t.jsx)(C,{scope:r,triggerId:(0,v.useId)(),triggerRef:u,contentId:(0,v.useId)(),open:m,onOpenChange:x,onOpenToggle:a.useCallback(()=>x(e=>!e),[x]),modal:d,children:(0,t.jsx)(j.Root,{...c,open:m,onOpenChange:x,dir:n,modal:d,children:s})})};S.displayName=b;var k="DropdownMenuTrigger",A=a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,disabled:s=!1,...n}=e,l=D(k,r),i=w(r);return(0,t.jsx)(j.Anchor,{asChild:!0,...i,children:(0,t.jsx)(f.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...n,ref:(0,m.composeRefs)(a,l.triggerRef),onPointerDown:(0,u.composeEventHandlers)(e.onPointerDown,e=>{!s&&0===e.button&&!1===e.ctrlKey&&(l.onOpenToggle(),l.open||e.preventDefault())}),onKeyDown:(0,u.composeEventHandlers)(e.onKeyDown,e=>{!s&&(["Enter"," "].includes(e.key)&&l.onOpenToggle(),"ArrowDown"===e.key&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});A.displayName=k;var T=e=>{let{__scopeDropdownMenu:a,...r}=e,s=w(a);return(0,t.jsx)(j.Portal,{...s,...r})};T.displayName="DropdownMenuPortal";var M="DropdownMenuContent",_=a.forwardRef((e,r)=>{let{__scopeDropdownMenu:s,...n}=e,l=D(M,s),i=w(s),o=a.useRef(!1);return(0,t.jsx)(j.Content,{id:l.contentId,"aria-labelledby":l.triggerId,...i,...n,ref:r,onCloseAutoFocus:(0,u.composeEventHandlers)(e.onCloseAutoFocus,e=>{var t;o.current||null==(t=l.triggerRef.current)||t.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:(0,u.composeEventHandlers)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey,r=2===t.button||a;(!l.modal||r)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_.displayName=M,a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.Group,{...n,...s,ref:a})}).displayName="DropdownMenuGroup",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.Label,{...n,...s,ref:a})}).displayName="DropdownMenuLabel";var I=a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.Item,{...n,...s,ref:a})});I.displayName="DropdownMenuItem",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.CheckboxItem,{...n,...s,ref:a})}).displayName="DropdownMenuCheckboxItem",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.RadioGroup,{...n,...s,ref:a})}).displayName="DropdownMenuRadioGroup",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.RadioItem,{...n,...s,ref:a})}).displayName="DropdownMenuRadioItem",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.ItemIndicator,{...n,...s,ref:a})}).displayName="DropdownMenuItemIndicator";var R=a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.Separator,{...n,...s,ref:a})});R.displayName="DropdownMenuSeparator",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.Arrow,{...n,...s,ref:a})}).displayName="DropdownMenuArrow",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.SubTrigger,{...n,...s,ref:a})}).displayName="DropdownMenuSubTrigger",a.forwardRef((e,a)=>{let{__scopeDropdownMenu:r,...s}=e,n=w(r);return(0,t.jsx)(j.SubContent,{...n,...s,ref:a,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent",e.i(78784),e.i(33565),e.i(33498);var O=e.i(47163);function F(e){let{...a}=e;return(0,t.jsx)(S,{"data-slot":"dropdown-menu",...a})}function P(e){let{...a}=e;return(0,t.jsx)(A,{"data-slot":"dropdown-menu-trigger",...a})}function B(e){let{className:a,sideOffset:r=4,...s}=e;return(0,t.jsx)(T,{children:(0,t.jsx)(_,{"data-slot":"dropdown-menu-content",sideOffset:r,className:(0,O.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...s})})}function E(e){let{className:a,inset:r,variant:s="default",...n}=e;return(0,t.jsx)(I,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":s,className:(0,O.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...n})}function z(e){let{className:a,...r}=e;return(0,t.jsx)(R,{"data-slot":"dropdown-menu-separator",className:(0,O.cn)("bg-border -mx-1 my-1 h-px",a),...r})}var H=e.i(30009),L=e.i(48654),V=e.i(21218),G=e.i(52786),K=e.i(58041),U=e.i(75254);let J=(0,U.default)("disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var W=e.i(52008),q=e.i(7233),X=e.i(27612);let Y=(0,U.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Z=(0,U.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Q=(0,U.default)("folder-input",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]),$=(0,U.default)("folder-output",[["path",{d:"M2 7.5V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-1.5",key:"1yk7aj"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m5 10-3 3 3 3",key:"1r8ie0"}]]);var ee=e.i(16715),et=e.i(78894);function ea(){var e;let{isAuthenticated:u,isLoading:m,token:x,user:h}=(0,s.useAuth)(),p=(0,r.useRouter)(),[g,f]=(0,a.useState)(""),[j,v]=(0,a.useState)([]),b=(null==h?void 0:h.role)==="admin"||(null==h?void 0:h.role)==="operator"||(null==h?void 0:h.is_pam_admin),[y,N]=(0,a.useState)([]),[w,C]=(0,a.useState)(null),[D,S]=(0,a.useState)(null),[k,A]=(0,a.useState)(!1),[T,M]=(0,a.useState)(!1),[_,I]=(0,a.useState)(!1),[R,O]=(0,a.useState)(!1),[U,ea]=(0,a.useState)(!1),[er,es]=(0,a.useState)(!1),[en,el]=(0,a.useState)(!1),[ei,eo]=(0,a.useState)(null),[ed,ec]=(0,a.useState)(null),[eu,em]=(0,a.useState)(null),[ex,eh]=(0,a.useState)(null),[ep,eg]=(0,a.useState)(""),[ef,ej]=(0,a.useState)("ext4"),[ev,eb]=(0,a.useState)(""),[ey,eN]=(0,a.useState)(""),[ew,eC]=(0,a.useState)(1),eD=(null==h?void 0:h.role)==="admin"||(null==h?void 0:h.role)==="operator",eS=(0,a.useCallback)(async()=>{if(x)try{A(!0);let[e,t,a]=await Promise.all([fetch("/api/storage/disks",{headers:{Authorization:"Bearer ".concat(x)}}),fetch("/api/storage/mounts",{headers:{Authorization:"Bearer ".concat(x)}}),fetch("/api/storage/lvm",{headers:{Authorization:"Bearer ".concat(x)}})]);if(!e.ok||!t.ok||!a.ok)throw Error("Failed to fetch storage data");let[r,s,n]=await Promise.all([e.json(),t.json(),a.json()]);v(r||[]),N(s||[]),C(n),S(null)}catch(e){S(e instanceof Error?e.message:"Failed to load storage data")}finally{A(!1)}},[x]);(0,a.useEffect)(()=>{m||u?m||!u||b||p.push("/dashboard"):p.push("/login")},[u,m,b,p]),(0,a.useEffect)(()=>{let e=()=>{f(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{if(u&&x){eS();let e=setInterval(eS,3e4);return()=>clearInterval(e)}},[u,x,eS]);let ek=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(1)," ").concat(["B","KB","MB","GB","TB"][t])},eA=async()=>{if(ed&&x)try{let e=await fetch("/api/storage/partitions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({device:ed.path,size_mb:ep?parseInt(ep):0,fstype:ef,label:ev})}),t=await e.json();eo(t),el(!0),M(!1),t.success&&eS()}catch(e){eo({success:!1,message:e instanceof Error?e.message:"Failed to create partition"}),el(!0)}},eT=async()=>{if(eu&&x)try{let e=await fetch("/api/storage/format",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({device:eu.path,fstype:ef,label:ev,force:!0})}),t=await e.json();eo(t),el(!0),I(!1),t.success&&eS()}catch(e){eo({success:!1,message:e instanceof Error?e.message:"Failed to format partition"}),el(!0)}},eM=async()=>{if(eu&&ey&&x)try{let e=await fetch("/api/storage/mount",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({device:eu.path,mount_point:ey,fstype:eu.fstype||""})}),t=await e.json();eo(t),el(!0),O(!1),t.success&&eS()}catch(e){eo({success:!1,message:e instanceof Error?e.message:"Failed to mount partition"}),el(!0)}},e_=async()=>{if(ex&&x)try{let e=await fetch("/api/storage/unmount",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({mount_point:ex.mount_point})}),t=await e.json();eo(t),el(!0),ea(!1),t.success&&eS()}catch(e){eo({success:!1,message:e instanceof Error?e.message:"Failed to unmount"}),el(!0)}},eI=async()=>{if(ed&&x)try{let e=await fetch("/api/storage/partitions",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({device:ed.path,partition:ew})}),t=await e.json();eo(t),el(!0),es(!1),t.success&&eS()}catch(e){eo({success:!1,message:e instanceof Error?e.message:"Failed to delete partition"}),el(!0)}};if(m||!u||!b)return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)(V.Activity,{className:"w-12 h-12 text-accent animate-pulse"})});let eR=y.reduce((e,t)=>e+t.total,0),eO=y.reduce((e,t)=>e+t.used,0);return(0,t.jsxs)(L.DashboardLayout,{title:"STORAGE MANAGER",time:g,children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Storage"}),(0,t.jsx)(G.HardDrive,{className:"w-4 h-4 text-accent"})]}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:ek(eR)}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ek(eO)," used"]})]})]}),(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Physical Disks"}),(0,t.jsx)(J,{className:"w-4 h-4 text-chart-3"})]}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:j.length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[j.filter(e=>!e.rotational).length," SSD/NVMe"]})]})]}),(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Mount Points"}),(0,t.jsx)(K.Database,{className:"w-4 h-4 text-chart-4"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:y.length})})]}),(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"LVM Volumes"}),(0,t.jsx)(W.Layers,{className:"w-4 h-4 text-chart-5"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:(null==w||null==(e=w.logical_volumes)?void 0:e.length)||0})})]})]}),(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(J,{className:"w-5 h-5 text-chart-3"}),"Physical Disks"]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>eS(),disabled:k,children:(0,t.jsx)(ee.RefreshCw,{className:"w-4 h-4 ".concat(k?"animate-spin":"")})})]}),(0,t.jsxs)(n.CardContent,{children:[D&&(0,t.jsx)("div",{className:"p-4 mb-4 rounded-lg border border-destructive/50 bg-destructive/10 text-destructive",children:D}),(0,t.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border border-border/50 bg-background/40",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground font-mono",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground px-2 py-0.5 rounded bg-muted",children:e.type}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground px-2 py-0.5 rounded bg-muted",children:e.rotational?"HDD":"SSD/NVMe"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:e.model}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.size_human}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:"font-mono",children:e.path})]})]}),eD&&(0,t.jsxs)(F,{children:[(0,t.jsx)(P,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(Z,{className:"w-4 h-4"})})}),(0,t.jsxs)(B,{align:"end",children:[(0,t.jsxs)(E,{onClick:()=>{ec(e),eg(""),ej("ext4"),eb(""),M(!0)},children:[(0,t.jsx)(q.Plus,{className:"w-4 h-4 mr-2"}),"Create Partition"]}),(0,t.jsx)(z,{}),(0,t.jsxs)(E,{className:"text-destructive",onClick:()=>{ec(e),eC(1),es(!0)},children:[(0,t.jsx)(X.Trash2,{className:"w-4 h-4 mr-2"}),"Delete Partition"]})]})]})]}),e.partitions&&e.partitions.length>0&&(0,t.jsx)("div",{className:"mt-3 pl-4 border-l-2 border-border/50 space-y-2",children:e.partitions.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"font-mono text-sm",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.size_human}),e.fstype&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-muted",children:e.fstype}),e.mount_point&&(0,t.jsx)("span",{className:"text-xs text-accent",children:e.mount_point})]}),eD&&(0,t.jsxs)(F,{children:[(0,t.jsx)(P,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(Y,{className:"w-4 h-4"})})}),(0,t.jsxs)(B,{align:"end",children:[(0,t.jsxs)(E,{onClick:()=>{em(e),ej("ext4"),eb(""),I(!0)},children:[(0,t.jsx)(Y,{className:"w-4 h-4 mr-2"}),"Format"]}),!e.mount_point&&(0,t.jsxs)(E,{onClick:()=>{em(e),eN(""),O(!0)},children:[(0,t.jsx)(Q,{className:"w-4 h-4 mr-2"}),"Mount"]})]})]})]},e.path))})]},e.path))})]})]}),(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(K.Database,{className:"w-5 h-5 text-chart-4"}),"Mount Points"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border border-border/50 bg-background/40 hover:bg-background/60 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:e.mount_point}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground px-2 py-0.5 rounded bg-muted",children:e.fstype})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground font-mono",children:e.device})]}),eD&&"/"!==e.mount_point&&!e.mount_point.startsWith("/boot")&&(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>{eh(e),ea(!0)},children:(0,t.jsx)($,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Used"}),(0,t.jsxs)("span",{className:"font-mono",children:[ek(e.used)," / ",ek(e.total)]})]}),(0,t.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all duration-300 ".concat(e.use_percent>90?"bg-destructive":e.use_percent>70?"bg-yellow-500":"bg-chart-4"),style:{width:"".concat(e.use_percent,"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[e.use_percent.toFixed(1),"% used"]})]})]},e.device+e.mount_point))})})]}),(0,t.jsxs)(n.Card,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(W.Layers,{className:"w-5 h-5 text-chart-5"}),"LVM Configuration"]})}),(0,t.jsxs)(n.CardContent,{children:[(null==w?void 0:w.volume_groups)&&w.volume_groups.length>0&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Volume Groups"}),(0,t.jsx)("div",{className:"space-y-2",children:w.volume_groups.map(e=>(0,t.jsxs)("div",{className:"p-3 rounded-lg border border-border/50 bg-background/40",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:e.name}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.size_human," total, ",e.free_human," free"]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[e.pv_count," PV(s), ",e.lv_count," LV(s)"]})]},e.name))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Logical Volumes"}),(0,t.jsx)("div",{className:"space-y-2",children:(null==w?void 0:w.logical_volumes)&&w.logical_volumes.length>0?w.logical_volumes.map(e=>(0,t.jsx)("div",{className:"p-4 rounded-lg border border-border/50 bg-background/40 hover:bg-background/60 transition-colors",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-foreground mb-1",children:[e.vg_name,"/",e.name]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Size: ",e.size_human]}),e.mount_point&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{className:"text-accent",children:["Mounted: ",e.mount_point]})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:e.active?"text-green-500":"text-yellow-500",children:e.active?"Active":"Inactive"})]})]})})},e.path)):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No LVM volumes configured"})})]})]})]})]}),(0,t.jsx)(d.Dialog,{open:T,onOpenChange:M,children:(0,t.jsxs)(d.DialogContent,{children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{children:"Create Partition"}),(0,t.jsxs)(d.DialogDescription,{children:["Create a new partition on ",null==ed?void 0:ed.path]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Size (MB)"}),(0,t.jsx)(i.Input,{type:"number",placeholder:"Leave empty to use all available space",value:ep,onChange:e=>eg(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Filesystem Type (optional)"}),(0,t.jsxs)(c.Select,{value:ef,onValueChange:ej,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"ext4",children:"ext4"}),(0,t.jsx)(c.SelectItem,{value:"xfs",children:"XFS"}),(0,t.jsx)(c.SelectItem,{value:"swap",children:"Swap"}),(0,t.jsx)(c.SelectItem,{value:"vfat",children:"FAT32"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Label (optional)"}),(0,t.jsx)(i.Input,{placeholder:"Partition label",value:ev,onChange:e=>eb(e.target.value)})]})]}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:eA,children:"Create"})]})]})}),(0,t.jsx)(d.Dialog,{open:_,onOpenChange:I,children:(0,t.jsxs)(d.DialogContent,{children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(et.AlertTriangle,{className:"w-5 h-5 text-yellow-500"}),"Format Partition"]}),(0,t.jsxs)(d.DialogDescription,{children:["Format ",null==eu?void 0:eu.path,". This will DESTROY all data on the partition."]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Filesystem Type"}),(0,t.jsxs)(c.Select,{value:ef,onValueChange:ej,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"ext4",children:"ext4"}),(0,t.jsx)(c.SelectItem,{value:"xfs",children:"XFS"}),(0,t.jsx)(c.SelectItem,{value:"swap",children:"Swap"}),(0,t.jsx)(c.SelectItem,{value:"vfat",children:"FAT32"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Label (optional)"}),(0,t.jsx)(i.Input,{placeholder:"Filesystem label",value:ev,onChange:e=>eb(e.target.value)})]})]}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,t.jsx)(l.Button,{variant:"destructive",onClick:eT,children:"Format"})]})]})}),(0,t.jsx)(d.Dialog,{open:R,onOpenChange:O,children:(0,t.jsxs)(d.DialogContent,{children:[(0,t.jsxs)(d.DialogHeader,{children:[(0,t.jsx)(d.DialogTitle,{children:"Mount Partition"}),(0,t.jsxs)(d.DialogDescription,{children:["Mount ",null==eu?void 0:eu.path," to a directory"]})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Mount Point"}),(0,t.jsx)(i.Input,{placeholder:"/mnt/data",value:ey,onChange:e=>eN(e.target.value)})]})}),(0,t.jsxs)(d.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:eM,children:"Mount"})]})]})}),(0,t.jsx)(H.AlertDialog,{open:U,onOpenChange:ea,children:(0,t.jsxs)(H.AlertDialogContent,{children:[(0,t.jsxs)(H.AlertDialogHeader,{children:[(0,t.jsx)(H.AlertDialogTitle,{children:"Unmount Filesystem"}),(0,t.jsxs)(H.AlertDialogDescription,{children:["Are you sure you want to unmount ",null==ex?void 0:ex.mount_point,"? Make sure no processes are using this filesystem."]})]}),(0,t.jsxs)(H.AlertDialogFooter,{children:[(0,t.jsx)(H.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(H.AlertDialogAction,{onClick:e_,children:"Unmount"})]})]})}),(0,t.jsx)(H.AlertDialog,{open:er,onOpenChange:es,children:(0,t.jsxs)(H.AlertDialogContent,{children:[(0,t.jsxs)(H.AlertDialogHeader,{children:[(0,t.jsxs)(H.AlertDialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(et.AlertTriangle,{className:"w-5 h-5 text-destructive"}),"Delete Partition"]}),(0,t.jsxs)(H.AlertDialogDescription,{children:["This will permanently delete a partition from ",null==ed?void 0:ed.path,". All data on the partition will be lost."]})]}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)(o.Label,{children:"Partition Number"}),(0,t.jsx)(i.Input,{type:"number",min:1,value:ew,onChange:e=>eC(parseInt(e.target.value)||1),className:"mt-2"})]}),(0,t.jsxs)(H.AlertDialogFooter,{children:[(0,t.jsx)(H.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(H.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:eI,children:"Delete"})]})]})}),(0,t.jsx)(d.Dialog,{open:en,onOpenChange:el,children:(0,t.jsxs)(d.DialogContent,{children:[(0,t.jsx)(d.DialogHeader,{children:(0,t.jsx)(d.DialogTitle,{className:(null==ei?void 0:ei.success)?"text-green-500":"text-destructive",children:(null==ei?void 0:ei.success)?"Operation Successful":"Operation Failed"})}),(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)("p",{children:null==ei?void 0:ei.message}),(null==ei?void 0:ei.output)&&(0,t.jsx)("pre",{className:"mt-4 p-3 bg-muted rounded-lg text-xs overflow-auto max-h-48",children:ei.output})]}),(0,t.jsx)(d.DialogFooter,{children:(0,t.jsx)(l.Button,{onClick:()=>el(!1),children:"Close"})})]})})]})}}]);